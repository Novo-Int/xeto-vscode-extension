/*!--------------------------------------------------------
 * Copyright (C) Microsoft Corporation. All rights reserved.
 *--------------------------------------------------------*/(function(){var se=["require","exports","vs/base/common/platform","vs/base/common/strings","vs/base/common/errors","vs/base/common/path","vs/base/common/buffer","vs/base/common/lifecycle","vs/base/common/extpath","vs/base/common/network","vs/base/common/uri","vs/editor/common/model/pieceTreeTextBuffer/pieceTreeBase","vs/editor/common/core/range","vs/base/common/map","vs/base/common/stream","vs/base/common/symbols","vs/editor/common/core/eolCounter","vs/editor/common/model/pieceTreeTextBuffer/rbTreeBase","vs/base/common/mime","vs/base/common/resources","vs/base/common/async","vs/base/common/event","vs/base/common/glob","vs/editor/common/core/stringBuilder","vs/editor/common/core/textChange","vs/editor/common/model","vs/editor/common/model/pieceTreeTextBuffer/pieceTreeTextBuffer","vs/editor/common/model/pieceTreeTextBuffer/pieceTreeTextBufferBuilder","vs/nls!vs/platform/contextkey/common/contextkey","vs/nls","vs/nls!vs/workbench/contrib/notebook/common/services/notebookSimpleWorker","vs/nls!vs/platform/contextkey/common/scanner","vs/platform/contextkey/common/scanner","vs/platform/instantiation/common/instantiation","vs/platform/contextkey/common/contextkey","vs/workbench/contrib/notebook/common/notebookCommon","vs/base/common/lazy","vs/base/common/types","vs/base/common/cancellation","vs/base/common/arrays","vs/editor/common/core/position","vs/editor/common/model/textModelSearch","vs/base/common/iterator","vs/workbench/contrib/notebook/common/services/notebookSimpleWorker","vs/base/common/diff/diff","vs/base/common/hash"],re=function(ne){for(var t=[],F=0,B=ne.length;F<B;F++)t[F]=se[ne[F]];return t};define(se[13],re([0,1]),function(ne,t){"use strict";var F,B,U;Object.defineProperty(t,"__esModule",{value:!0}),t.CounterSet=t.LRUCache=t.LinkedMap=t.Touch=t.ResourceSet=t.ResourceMap=t.setToString=t.mapToString=t.getOrSet=void 0;function N(o,s,u){let n=o.get(s);return n===void 0&&(n=u,o.set(s,n)),n}t.getOrSet=N;function z(o){const s=[];return o.forEach((u,n)=>{s.push(`${n} => ${u}`)}),`Map(${o.size}) {${s.join(", ")}}`}t.mapToString=z;function j(o){const s=[];return o.forEach(u=>{s.push(u)}),`Set(${o.size}) {${s.join(", ")}}`}t.setToString=j;class C{constructor(s,u){this.uri=s,this.value=u}}class h{constructor(s,u){this[F]="ResourceMap",s instanceof h?(this.b=new Map(s.b),this.c=u??h.a):(this.b=new Map,this.c=s??h.a)}set(s,u){return this.b.set(this.c(s),new C(s,u)),this}get(s){return this.b.get(this.c(s))?.value}has(s){return this.b.has(this.c(s))}get size(){return this.b.size}clear(){this.b.clear()}delete(s){return this.b.delete(this.c(s))}forEach(s,u){typeof u<"u"&&(s=s.bind(u));for(const[n,a]of this.b)s(a.value,a.uri,this)}*values(){for(const s of this.b.values())yield s.value}*keys(){for(const s of this.b.values())yield s.uri}*entries(){for(const s of this.b.values())yield[s.uri,s.value]}*[(F=Symbol.toStringTag,Symbol.iterator)](){for(const[,s]of this.b)yield[s.uri,s.value]}}t.ResourceMap=h,h.a=o=>o.toString();class b{constructor(s,u){this[B]="ResourceSet",!s||typeof s=="function"?this.a=new h(s):(this.a=new h(u),s.forEach(this.add,this))}get size(){return this.a.size}add(s){return this.a.set(s,s),this}clear(){this.a.clear()}delete(s){return this.a.delete(s)}forEach(s,u){this.a.forEach((n,a)=>s.call(u,a,a,this))}has(s){return this.a.has(s)}entries(){return this.a.entries()}keys(){return this.a.keys()}values(){return this.a.keys()}[(B=Symbol.toStringTag,Symbol.iterator)](){return this.keys()}}t.ResourceSet=b;var A;(function(o){o[o.None=0]="None",o[o.AsOld=1]="AsOld",o[o.AsNew=2]="AsNew"})(A||(t.Touch=A={}));class p{constructor(){this[U]="LinkedMap",this.a=new Map,this.b=void 0,this.c=void 0,this.d=0,this.e=0}clear(){this.a.clear(),this.b=void 0,this.c=void 0,this.d=0,this.e++}isEmpty(){return!this.b&&!this.c}get size(){return this.d}get first(){return this.b?.value}get last(){return this.c?.value}has(s){return this.a.has(s)}get(s,u=0){const n=this.a.get(s);if(n)return u!==0&&this.j(n,u),n.value}set(s,u,n=0){let a=this.a.get(s);if(a)a.value=u,n!==0&&this.j(a,n);else{switch(a={key:s,value:u,next:void 0,previous:void 0},n){case 0:this.h(a);break;case 1:this.g(a);break;case 2:this.h(a);break;default:this.h(a);break}this.a.set(s,a),this.d++}return this}delete(s){return!!this.remove(s)}remove(s){const u=this.a.get(s);if(u)return this.a.delete(s),this.i(u),this.d--,u.value}shift(){if(!this.b&&!this.c)return;if(!this.b||!this.c)throw new Error("Invalid list");const s=this.b;return this.a.delete(s.key),this.i(s),this.d--,s.value}forEach(s,u){const n=this.e;let a=this.b;for(;a;){if(u?s.bind(u)(a.value,a.key,this):s(a.value,a.key,this),this.e!==n)throw new Error("LinkedMap got modified during iteration.");a=a.next}}keys(){const s=this,u=this.e;let n=this.b;const a={[Symbol.iterator](){return a},next(){if(s.e!==u)throw new Error("LinkedMap got modified during iteration.");if(n){const i={value:n.key,done:!1};return n=n.next,i}else return{value:void 0,done:!0}}};return a}values(){const s=this,u=this.e;let n=this.b;const a={[Symbol.iterator](){return a},next(){if(s.e!==u)throw new Error("LinkedMap got modified during iteration.");if(n){const i={value:n.value,done:!1};return n=n.next,i}else return{value:void 0,done:!0}}};return a}entries(){const s=this,u=this.e;let n=this.b;const a={[Symbol.iterator](){return a},next(){if(s.e!==u)throw new Error("LinkedMap got modified during iteration.");if(n){const i={value:[n.key,n.value],done:!1};return n=n.next,i}else return{value:void 0,done:!0}}};return a}[(U=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}f(s){if(s>=this.size)return;if(s===0){this.clear();return}let u=this.b,n=this.size;for(;u&&n>s;)this.a.delete(u.key),u=u.next,n--;this.b=u,this.d=n,u&&(u.previous=void 0),this.e++}g(s){if(!this.b&&!this.c)this.c=s;else if(this.b)s.next=this.b,this.b.previous=s;else throw new Error("Invalid list");this.b=s,this.e++}h(s){if(!this.b&&!this.c)this.b=s;else if(this.c)s.previous=this.c,this.c.next=s;else throw new Error("Invalid list");this.c=s,this.e++}i(s){if(s===this.b&&s===this.c)this.b=void 0,this.c=void 0;else if(s===this.b){if(!s.next)throw new Error("Invalid list");s.next.previous=void 0,this.b=s.next}else if(s===this.c){if(!s.previous)throw new Error("Invalid list");s.previous.next=void 0,this.c=s.previous}else{const u=s.next,n=s.previous;if(!u||!n)throw new Error("Invalid list");u.previous=n,n.next=u}s.next=void 0,s.previous=void 0,this.e++}j(s,u){if(!this.b||!this.c)throw new Error("Invalid list");if(!(u!==1&&u!==2)){if(u===1){if(s===this.b)return;const n=s.next,a=s.previous;s===this.c?(a.next=void 0,this.c=a):(n.previous=a,a.next=n),s.previous=void 0,s.next=this.b,this.b.previous=s,this.b=s,this.e++}else if(u===2){if(s===this.c)return;const n=s.next,a=s.previous;s===this.b?(n.previous=void 0,this.b=n):(n.previous=a,a.next=n),s.next=void 0,s.previous=this.c,this.c.next=s,this.c=s,this.e++}}}toJSON(){const s=[];return this.forEach((u,n)=>{s.push([n,u])}),s}fromJSON(s){this.clear();for(const[u,n]of s)this.set(u,n)}}t.LinkedMap=p;class R extends p{constructor(s,u=1){super(),this.k=s,this.l=Math.min(Math.max(0,u),1)}get limit(){return this.k}set limit(s){this.k=s,this.m()}get ratio(){return this.l}set ratio(s){this.l=Math.min(Math.max(0,s),1),this.m()}get(s,u=2){return super.get(s,u)}peek(s){return super.get(s,0)}set(s,u){return super.set(s,u,2),this.m(),this}m(){this.size>this.k&&this.f(Math.round(this.k*this.l))}}t.LRUCache=R;class m{constructor(){this.a=new Map}add(s){return this.a.set(s,(this.a.get(s)||0)+1),this}delete(s){let u=this.a.get(s)||0;return u===0?!1:(u--,u===0?this.a.delete(s):this.a.set(s,u),!0)}has(s){return this.a.has(s)}}t.CounterSet=m}),define(se[14],re([0,1,4,7]),function(ne,t,F,B){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.prefixedStream=t.prefixedReadable=t.transform=t.toReadable=t.emptyStream=t.toStream=t.peekStream=t.listenStream=t.consumeStream=t.peekReadable=t.consumeReadable=t.newWriteableStream=t.isReadableBufferedStream=t.isReadableStream=t.isReadable=void 0;function U(i){const l=i;return l?typeof l.read=="function":!1}t.isReadable=U;function N(i){const l=i;return l?[l.on,l.pause,l.resume,l.destroy].every(c=>typeof c=="function"):!1}t.isReadableStream=N;function z(i){const l=i;return l?N(l.stream)&&Array.isArray(l.buffer)&&typeof l.ended=="boolean":!1}t.isReadableBufferedStream=z;function j(i,l){return new C(i,l)}t.newWriteableStream=j;class C{constructor(l,c){this.e=l,this.f=c,this.a={flowing:!1,ended:!1,destroyed:!1},this.b={data:[],error:[]},this.c={data:[],error:[],end:[]},this.d=[]}pause(){this.a.destroyed||(this.a.flowing=!1)}resume(){this.a.destroyed||this.a.flowing||(this.a.flowing=!0,this.j(),this.k(),this.l())}write(l){if(!this.a.destroyed){if(this.a.flowing)this.g(l);else if(this.b.data.push(l),typeof this.f?.highWaterMark=="number"&&this.b.data.length>this.f.highWaterMark)return new Promise(c=>this.d.push(c))}}error(l){this.a.destroyed||(this.a.flowing?this.h(l):this.b.error.push(l))}end(l){this.a.destroyed||(typeof l<"u"&&this.write(l),this.a.flowing?(this.i(),this.destroy()):this.a.ended=!0)}g(l){this.c.data.slice(0).forEach(c=>c(l))}h(l){this.c.error.length===0?(0,F.onUnexpectedError)(l):this.c.error.slice(0).forEach(c=>c(l))}i(){this.c.end.slice(0).forEach(l=>l())}on(l,c){if(!this.a.destroyed)switch(l){case"data":this.c.data.push(c),this.resume();break;case"end":this.c.end.push(c),this.a.flowing&&this.l()&&this.destroy();break;case"error":this.c.error.push(c),this.a.flowing&&this.k();break}}removeListener(l,c){if(this.a.destroyed)return;let w;switch(l){case"data":w=this.c.data;break;case"end":w=this.c.end;break;case"error":w=this.c.error;break}if(w){const v=w.indexOf(c);v>=0&&w.splice(v,1)}}j(){if(this.b.data.length>0){const l=this.e(this.b.data);this.g(l),this.b.data.length=0;const c=[...this.d];this.d.length=0,c.forEach(w=>w())}}k(){if(this.c.error.length>0){for(const l of this.b.error)this.h(l);this.b.error.length=0}}l(){return this.a.ended?(this.i(),this.c.end.length>0):!1}destroy(){this.a.destroyed||(this.a.destroyed=!0,this.a.ended=!0,this.b.data.length=0,this.b.error.length=0,this.c.data.length=0,this.c.error.length=0,this.c.end.length=0,this.d.length=0)}}function h(i,l){const c=[];let w;for(;(w=i.read())!==null;)c.push(w);return l(c)}t.consumeReadable=h;function b(i,l,c){const w=[];let v;for(;(v=i.read())!==null&&w.length<c;)w.push(v);return v===null&&w.length>0?l(w):{read:()=>{if(w.length>0)return w.shift();if(typeof v<"u"){const P=v;return v=void 0,P}return i.read()}}}t.peekReadable=b;function A(i,l){return new Promise((c,w)=>{const v=[];p(i,{onData:P=>{l&&v.push(P)},onError:P=>{l?w(P):c(void 0)},onEnd:()=>{c(l?l(v):void 0)}})})}t.consumeStream=A;function p(i,l){let c=!1;return i.on("error",w=>{c||l.onError(w)}),i.on("end",()=>{c||l.onEnd()}),i.on("data",w=>{c||l.onData(w)}),(0,B.toDisposable)(()=>c=!0)}t.listenStream=p;function R(i,l){return new Promise((c,w)=>{const v=new B.DisposableStore,P=[],O=M=>{if(P.push(M),P.length>l)return v.dispose(),i.pause(),c({stream:i,buffer:P,ended:!1})},f=M=>w(M),I=()=>c({stream:i,buffer:P,ended:!0});v.add((0,B.toDisposable)(()=>i.removeListener("error",f))),i.on("error",f),v.add((0,B.toDisposable)(()=>i.removeListener("end",I))),i.on("end",I),v.add((0,B.toDisposable)(()=>i.removeListener("data",O))),i.on("data",O)})}t.peekStream=R;function m(i,l){const c=j(l);return c.end(i),c}t.toStream=m;function o(){const i=j(()=>{throw new Error("not supported")});return i.end(),i}t.emptyStream=o;function s(i){let l=!1;return{read:()=>l?null:(l=!0,i)}}t.toReadable=s;function u(i,l,c){const w=j(c);return p(i,{onData:v=>w.write(l.data(v)),onError:v=>w.error(l.error?l.error(v):v),onEnd:()=>w.end()}),w}t.transform=u;function n(i,l,c){let w=!1;return{read:()=>{const v=l.read();return w?v:(w=!0,v!==null?c([i,v]):i)}}}t.prefixedReadable=n;function a(i,l,c){let w=!1;const v=j(c);return p(l,{onData:P=>w?v.write(P):(w=!0,v.write(c([i,P]))),onError:P=>v.error(P),onEnd:()=>{w||(w=!0,v.write(i)),v.end()}}),v}t.prefixedStream=a}),define(se[6],re([0,1,36,14]),function(ne,t,F,B){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.encodeBase64=t.decodeBase64=t.prefixedBufferStream=t.prefixedBufferReadable=t.newWriteableBufferStream=t.streamToBufferReadableStream=t.bufferToStream=t.bufferedStreamToBuffer=t.streamToBuffer=t.bufferToReadable=t.readableToBuffer=t.writeUInt8=t.readUInt8=t.writeUInt32LE=t.readUInt32LE=t.writeUInt32BE=t.readUInt32BE=t.writeUInt16LE=t.readUInt16LE=t.VSBuffer=void 0;const U=typeof Buffer<"u",N=new F.Lazy(()=>new Uint8Array(256));let z,j;class C{static alloc(S){return U?new C(Buffer.allocUnsafe(S)):new C(new Uint8Array(S))}static wrap(S){return U&&!Buffer.isBuffer(S)&&(S=Buffer.from(S.buffer,S.byteOffset,S.byteLength)),new C(S)}static fromString(S,k){return!(k?.dontUseNodeBuffer||!1)&&U?new C(Buffer.from(S)):(z||(z=new TextEncoder),new C(z.encode(S)))}static fromByteArray(S){const k=C.alloc(S.length);for(let G=0,X=S.length;G<X;G++)k.buffer[G]=S[G];return k}static concat(S,k){if(typeof k>"u"){k=0;for(let Z=0,ee=S.length;Z<ee;Z++)k+=S[Z].byteLength}const G=C.alloc(k);let X=0;for(let Z=0,ee=S.length;Z<ee;Z++){const Y=S[Z];G.set(Y,X),X+=Y.byteLength}return G}constructor(S){this.buffer=S,this.byteLength=this.buffer.byteLength}clone(){const S=C.alloc(this.byteLength);return S.set(this),S}toString(){return U?this.buffer.toString():(j||(j=new TextDecoder),j.decode(this.buffer))}slice(S,k){return new C(this.buffer.subarray(S,k))}set(S,k){if(S instanceof C)this.buffer.set(S.buffer,k);else if(S instanceof Uint8Array)this.buffer.set(S,k);else if(S instanceof ArrayBuffer)this.buffer.set(new Uint8Array(S),k);else if(ArrayBuffer.isView(S))this.buffer.set(new Uint8Array(S.buffer,S.byteOffset,S.byteLength),k);else throw new Error("Unknown argument 'array'")}readUInt32BE(S){return A(this.buffer,S)}writeUInt32BE(S,k){p(this.buffer,S,k)}readUInt32LE(S){return R(this.buffer,S)}writeUInt32LE(S,k){m(this.buffer,S,k)}readUInt8(S){return o(this.buffer,S)}writeUInt8(S,k){s(this.buffer,S,k)}indexOf(S){const k=S instanceof C?S.buffer:S,G=k.byteLength,X=this.buffer,Z=X.byteLength;if(G===0)return 0;if(G===1)return X.indexOf(k[0]);if(G>Z)return-1;const ee=N.value;ee.fill(k.length);for(let L=0;L<k.length;L++)ee[k[L]]=k.length-L-1;let Y=k.length-1,_=Y,ae=-1;for(;Y<Z;)if(X[Y]===k[_]){if(_===0){ae=Y;break}Y--,_--}else Y+=Math.max(k.length-_,ee[X[Y]]),_=k.length-1;return ae}}t.VSBuffer=C;function h(y,S){return y[S+0]<<0>>>0|y[S+1]<<8>>>0}t.readUInt16LE=h;function b(y,S,k){y[k+0]=S&255,S=S>>>8,y[k+1]=S&255}t.writeUInt16LE=b;function A(y,S){return y[S]*2**24+y[S+1]*2**16+y[S+2]*2**8+y[S+3]}t.readUInt32BE=A;function p(y,S,k){y[k+3]=S,S=S>>>8,y[k+2]=S,S=S>>>8,y[k+1]=S,S=S>>>8,y[k]=S}t.writeUInt32BE=p;function R(y,S){return y[S+0]<<0>>>0|y[S+1]<<8>>>0|y[S+2]<<16>>>0|y[S+3]<<24>>>0}t.readUInt32LE=R;function m(y,S,k){y[k+0]=S&255,S=S>>>8,y[k+1]=S&255,S=S>>>8,y[k+2]=S&255,S=S>>>8,y[k+3]=S&255}t.writeUInt32LE=m;function o(y,S){return y[S]}t.readUInt8=o;function s(y,S,k){y[k]=S}t.writeUInt8=s;function u(y){return B.consumeReadable(y,S=>C.concat(S))}t.readableToBuffer=u;function n(y){return B.toReadable(y)}t.bufferToReadable=n;function a(y){return B.consumeStream(y,S=>C.concat(S))}t.streamToBuffer=a;async function i(y){return y.ended?C.concat(y.buffer):C.concat([...y.buffer,await a(y.stream)])}t.bufferedStreamToBuffer=i;function l(y){return B.toStream(y,S=>C.concat(S))}t.bufferToStream=l;function c(y){return B.transform(y,{data:S=>typeof S=="string"?C.fromString(S):C.wrap(S)},S=>C.concat(S))}t.streamToBufferReadableStream=c;function w(y){return B.newWriteableStream(S=>C.concat(S),y)}t.newWriteableBufferStream=w;function v(y,S){return B.prefixedReadable(y,S,k=>C.concat(k))}t.prefixedBufferReadable=v;function P(y,S){return B.prefixedStream(y,S,k=>C.concat(k))}t.prefixedBufferStream=P;function O(y){let S=0,k=0,G=0;const X=new Uint8Array(Math.floor(y.length/4*3)),Z=Y=>{switch(k){case 3:X[G++]=S|Y,k=0;break;case 2:X[G++]=S|Y>>>2,S=Y<<6,k=3;break;case 1:X[G++]=S|Y>>>4,S=Y<<4,k=2;break;default:S=Y<<2,k=1}};for(let Y=0;Y<y.length;Y++){const _=y.charCodeAt(Y);if(_>=65&&_<=90)Z(_-65);else if(_>=97&&_<=122)Z(_-97+26);else if(_>=48&&_<=57)Z(_-48+52);else if(_===43||_===45)Z(62);else if(_===47||_===95)Z(63);else{if(_===61)break;throw new SyntaxError(`Unexpected base64 character ${y[Y]}`)}}const ee=G;for(;k>0;)Z(0);return C.wrap(X).slice(0,ee)}t.decodeBase64=O;const f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",I="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_";function M({buffer:y},S=!0,k=!1){const G=k?I:f;let X="";const Z=y.byteLength%3;let ee=0;for(;ee<y.byteLength-Z;ee+=3){const Y=y[ee+0],_=y[ee+1],ae=y[ee+2];X+=G[Y>>>2],X+=G[(Y<<4|_>>>4)&63],X+=G[(_<<2|ae>>>6)&63],X+=G[ae&63]}if(Z===1){const Y=y[ee+0];X+=G[Y>>>2],X+=G[Y<<4&63],S&&(X+="==")}else if(Z===2){const Y=y[ee+0],_=y[ee+1];X+=G[Y>>>2],X+=G[(Y<<4|_>>>4)&63],X+=G[_<<2&63],S&&(X+="=")}return X}t.encodeBase64=M}),define(se[15],re([0,1]),function(ne,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MicrotaskDelay=void 0,t.MicrotaskDelay=Symbol("MicrotaskDelay")}),define(se[16],re([0,1]),function(ne,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.countEOL=t.StringEOL=void 0;var F;(function(U){U[U.Unknown=0]="Unknown",U[U.Invalid=3]="Invalid",U[U.LF=1]="LF",U[U.CRLF=2]="CRLF"})(F||(t.StringEOL=F={}));function B(U){let N=0,z=0,j=0,C=0;for(let h=0,b=U.length;h<b;h++){const A=U.charCodeAt(h);A===13?(N===0&&(z=h),N++,h+1<b&&U.charCodeAt(h+1)===10?(C|=2,h++):C|=3,j=h+1):A===10&&(C|=1,N===0&&(z=h),N++,j=h+1)}return N===0&&(z=U.length),[N,z,U.length-j,C]}t.countEOL=B}),define(se[17],re([0,1]),function(ne,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.recomputeTreeMetadata=t.updateTreeMetadata=t.fixInsert=t.rbDelete=t.rightRotate=t.leftRotate=t.righttest=t.leftest=t.SENTINEL=t.NodeColor=t.TreeNode=void 0;class F{constructor(s,u){this.piece=s,this.color=u,this.size_left=0,this.lf_left=0,this.parent=this,this.left=this,this.right=this}next(){if(this.right!==t.SENTINEL)return U(this.right);let s=this;for(;s.parent!==t.SENTINEL&&s.parent.left!==s;)s=s.parent;return s.parent===t.SENTINEL?t.SENTINEL:s.parent}prev(){if(this.left!==t.SENTINEL)return N(this.left);let s=this;for(;s.parent!==t.SENTINEL&&s.parent.right!==s;)s=s.parent;return s.parent===t.SENTINEL?t.SENTINEL:s.parent}detach(){this.parent=null,this.left=null,this.right=null}}t.TreeNode=F;var B;(function(o){o[o.Black=0]="Black",o[o.Red=1]="Red"})(B||(t.NodeColor=B={})),t.SENTINEL=new F(null,0),t.SENTINEL.parent=t.SENTINEL,t.SENTINEL.left=t.SENTINEL,t.SENTINEL.right=t.SENTINEL,t.SENTINEL.color=0;function U(o){for(;o.left!==t.SENTINEL;)o=o.left;return o}t.leftest=U;function N(o){for(;o.right!==t.SENTINEL;)o=o.right;return o}t.righttest=N;function z(o){return o===t.SENTINEL?0:o.size_left+o.piece.length+z(o.right)}function j(o){return o===t.SENTINEL?0:o.lf_left+o.piece.lineFeedCnt+j(o.right)}function C(){t.SENTINEL.parent=t.SENTINEL}function h(o,s){const u=s.right;u.size_left+=s.size_left+(s.piece?s.piece.length:0),u.lf_left+=s.lf_left+(s.piece?s.piece.lineFeedCnt:0),s.right=u.left,u.left!==t.SENTINEL&&(u.left.parent=s),u.parent=s.parent,s.parent===t.SENTINEL?o.root=u:s.parent.left===s?s.parent.left=u:s.parent.right=u,u.left=s,s.parent=u}t.leftRotate=h;function b(o,s){const u=s.left;s.left=u.right,u.right!==t.SENTINEL&&(u.right.parent=s),u.parent=s.parent,s.size_left-=u.size_left+(u.piece?u.piece.length:0),s.lf_left-=u.lf_left+(u.piece?u.piece.lineFeedCnt:0),s.parent===t.SENTINEL?o.root=u:s===s.parent.right?s.parent.right=u:s.parent.left=u,u.right=s,s.parent=u}t.rightRotate=b;function A(o,s){let u,n;if(s.left===t.SENTINEL?(n=s,u=n.right):s.right===t.SENTINEL?(n=s,u=n.left):(n=U(s.right),u=n.right),n===o.root){o.root=u,u.color=0,s.detach(),C(),o.root.parent=t.SENTINEL;return}const a=n.color===1;if(n===n.parent.left?n.parent.left=u:n.parent.right=u,n===s?(u.parent=n.parent,m(o,u)):(n.parent===s?u.parent=n:u.parent=n.parent,m(o,u),n.left=s.left,n.right=s.right,n.parent=s.parent,n.color=s.color,s===o.root?o.root=n:s===s.parent.left?s.parent.left=n:s.parent.right=n,n.left!==t.SENTINEL&&(n.left.parent=n),n.right!==t.SENTINEL&&(n.right.parent=n),n.size_left=s.size_left,n.lf_left=s.lf_left,m(o,n)),s.detach(),u.parent.left===u){const l=z(u),c=j(u);if(l!==u.parent.size_left||c!==u.parent.lf_left){const w=l-u.parent.size_left,v=c-u.parent.lf_left;u.parent.size_left=l,u.parent.lf_left=c,R(o,u.parent,w,v)}}if(m(o,u.parent),a){C();return}let i;for(;u!==o.root&&u.color===0;)u===u.parent.left?(i=u.parent.right,i.color===1&&(i.color=0,u.parent.color=1,h(o,u.parent),i=u.parent.right),i.left.color===0&&i.right.color===0?(i.color=1,u=u.parent):(i.right.color===0&&(i.left.color=0,i.color=1,b(o,i),i=u.parent.right),i.color=u.parent.color,u.parent.color=0,i.right.color=0,h(o,u.parent),u=o.root)):(i=u.parent.left,i.color===1&&(i.color=0,u.parent.color=1,b(o,u.parent),i=u.parent.left),i.left.color===0&&i.right.color===0?(i.color=1,u=u.parent):(i.left.color===0&&(i.right.color=0,i.color=1,h(o,i),i=u.parent.left),i.color=u.parent.color,u.parent.color=0,i.left.color=0,b(o,u.parent),u=o.root));u.color=0,C()}t.rbDelete=A;function p(o,s){for(m(o,s);s!==o.root&&s.parent.color===1;)if(s.parent===s.parent.parent.left){const u=s.parent.parent.right;u.color===1?(s.parent.color=0,u.color=0,s.parent.parent.color=1,s=s.parent.parent):(s===s.parent.right&&(s=s.parent,h(o,s)),s.parent.color=0,s.parent.parent.color=1,b(o,s.parent.parent))}else{const u=s.parent.parent.left;u.color===1?(s.parent.color=0,u.color=0,s.parent.parent.color=1,s=s.parent.parent):(s===s.parent.left&&(s=s.parent,b(o,s)),s.parent.color=0,s.parent.parent.color=1,h(o,s.parent.parent))}o.root.color=0}t.fixInsert=p;function R(o,s,u,n){for(;s!==o.root&&s!==t.SENTINEL;)s.parent.left===s&&(s.parent.size_left+=u,s.parent.lf_left+=n),s=s.parent}t.updateTreeMetadata=R;function m(o,s){let u=0,n=0;if(s!==o.root){for(;s!==o.root&&s===s.parent.right;)s=s.parent;if(s!==o.root)for(s=s.parent,u=z(s.left)-s.size_left,n=j(s.left)-s.lf_left,s.size_left+=u,s.lf_left+=n;s!==o.root&&(u!==0||n!==0);)s.parent.left===s&&(s.parent.size_left+=u,s.parent.lf_left+=n),s=s.parent}}t.recomputeTreeMetadata=m}),define(se[18],re([0,1,5]),function(ne,t,F){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.normalizeMimeType=t.getExtensionForMimeType=t.getMediaMime=t.getMediaOrTextMime=t.Mimes=void 0,t.Mimes=Object.freeze({text:"text/plain",binary:"application/octet-stream",unknown:"application/unknown",markdown:"text/markdown",latex:"text/latex",uriList:"text/uri-list"});const B={".css":"text/css",".csv":"text/csv",".htm":"text/html",".html":"text/html",".ics":"text/calendar",".js":"text/javascript",".mjs":"text/javascript",".txt":"text/plain",".xml":"text/xml"},U={".aac":"audio/x-aac",".avi":"video/x-msvideo",".bmp":"image/bmp",".flv":"video/x-flv",".gif":"image/gif",".ico":"image/x-icon",".jpe":"image/jpg",".jpeg":"image/jpg",".jpg":"image/jpg",".m1v":"video/mpeg",".m2a":"audio/mpeg",".m2v":"video/mpeg",".m3a":"audio/mpeg",".mid":"audio/midi",".midi":"audio/midi",".mk3d":"video/x-matroska",".mks":"video/x-matroska",".mkv":"video/x-matroska",".mov":"video/quicktime",".movie":"video/x-sgi-movie",".mp2":"audio/mpeg",".mp2a":"audio/mpeg",".mp3":"audio/mpeg",".mp4":"video/mp4",".mp4a":"audio/mp4",".mp4v":"video/mp4",".mpe":"video/mpeg",".mpeg":"video/mpeg",".mpg":"video/mpeg",".mpg4":"video/mp4",".mpga":"audio/mpeg",".oga":"audio/ogg",".ogg":"audio/ogg",".opus":"audio/opus",".ogv":"video/ogg",".png":"image/png",".psd":"image/vnd.adobe.photoshop",".qt":"video/quicktime",".spx":"audio/ogg",".svg":"image/svg+xml",".tga":"image/x-tga",".tif":"image/tiff",".tiff":"image/tiff",".wav":"audio/x-wav",".webm":"video/webm",".webp":"image/webp",".wma":"audio/x-ms-wma",".wmv":"video/x-ms-wmv",".woff":"application/font-woff"};function N(b){const A=(0,F.extname)(b),p=B[A.toLowerCase()];return p!==void 0?p:z(b)}t.getMediaOrTextMime=N;function z(b){const A=(0,F.extname)(b);return U[A.toLowerCase()]}t.getMediaMime=z;function j(b){for(const A in U)if(U[A]===b)return A}t.getExtensionForMimeType=j;const C=/^(.+)\/(.+?)(;.+)?$/;function h(b,A){const p=C.exec(b);return p?`${p[1].toLowerCase()}/${p[2].toLowerCase()}${p[3]??""}`:A?void 0:b}t.normalizeMimeType=h}),define(se[8],re([0,1,5,2,3,37]),function(ne,t,F,B,U,N){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.randomPath=t.parseLineAndColumnAware=t.indexOfPath=t.getDriveLetter=t.hasDriveLetter=t.isRootOrDriveLetter=t.sanitizeFilePath=t.isWindowsDriveLetter=t.isEqualOrParent=t.isEqual=t.isValidBasename=t.isUNC=t.getRoot=t.toPosixPath=t.toSlashes=t.isPathSeparator=void 0;function z(f){return f===47||f===92}t.isPathSeparator=z;function j(f){return f.replace(/[\\/]/g,F.posix.sep)}t.toSlashes=j;function C(f){return f.indexOf("/")===-1&&(f=j(f)),/^[a-zA-Z]:(\/|$)/.test(f)&&(f="/"+f),f}t.toPosixPath=C;function h(f,I=F.posix.sep){if(!f)return"";const M=f.length,y=f.charCodeAt(0);if(z(y)){if(z(f.charCodeAt(1))&&!z(f.charCodeAt(2))){let k=3;const G=k;for(;k<M&&!z(f.charCodeAt(k));k++);if(G!==k&&!z(f.charCodeAt(k+1))){for(k+=1;k<M;k++)if(z(f.charCodeAt(k)))return f.slice(0,k+1).replace(/[\\/]/g,I)}}return I}else if(u(y)&&f.charCodeAt(1)===58)return z(f.charCodeAt(2))?f.slice(0,2)+I:f.slice(0,2);let S=f.indexOf("://");if(S!==-1){for(S+=3;S<M;S++)if(z(f.charCodeAt(S)))return f.slice(0,S+1)}return""}t.getRoot=h;function b(f){if(!B.isWindows||!f||f.length<5)return!1;let I=f.charCodeAt(0);if(I!==92||(I=f.charCodeAt(1),I!==92))return!1;let M=2;const y=M;for(;M<f.length&&(I=f.charCodeAt(M),I!==92);M++);return!(y===M||(I=f.charCodeAt(M+1),isNaN(I)||I===92))}t.isUNC=b;const A=/[\\/:\*\?"<>\|]/g,p=/[\\/]/g,R=/^(con|prn|aux|clock\$|nul|lpt[0-9]|com[0-9])(\.(.*?))?$/i;function m(f,I=B.isWindows){const M=I?A:p;return!(!f||f.length===0||/^\s+$/.test(f)||(M.lastIndex=0,M.test(f))||I&&R.test(f)||f==="."||f===".."||I&&f[f.length-1]==="."||I&&f.length!==f.trim().length||f.length>255)}t.isValidBasename=m;function o(f,I,M){const y=f===I;return!M||y?y:!f||!I?!1:(0,U.equalsIgnoreCase)(f,I)}t.isEqual=o;function s(f,I,M,y=F.sep){if(f===I)return!0;if(!f||!I||I.length>f.length)return!1;if(M){if(!(0,U.startsWithIgnoreCase)(f,I))return!1;if(I.length===f.length)return!0;let k=I.length;return I.charAt(I.length-1)===y&&k--,f.charAt(k)===y}return I.charAt(I.length-1)!==y&&(I+=y),f.indexOf(I)===0}t.isEqualOrParent=s;function u(f){return f>=65&&f<=90||f>=97&&f<=122}t.isWindowsDriveLetter=u;function n(f,I){return B.isWindows&&f.endsWith(":")&&(f+=F.sep),(0,F.isAbsolute)(f)||(f=(0,F.join)(I,f)),f=(0,F.normalize)(f),B.isWindows?(f=(0,U.rtrim)(f,F.sep),f.endsWith(":")&&(f+=F.sep)):(f=(0,U.rtrim)(f,F.sep),f||(f=F.sep)),f}t.sanitizeFilePath=n;function a(f){const I=(0,F.normalize)(f);return B.isWindows?f.length>3?!1:i(I)&&(f.length===2||I.charCodeAt(2)===92):I===F.posix.sep}t.isRootOrDriveLetter=a;function i(f,I=B.isWindows){return I?u(f.charCodeAt(0))&&f.charCodeAt(1)===58:!1}t.hasDriveLetter=i;function l(f,I=B.isWindows){return i(f,I)?f[0]:void 0}t.getDriveLetter=l;function c(f,I,M){return I.length>f.length?-1:f===I?0:(M&&(f=f.toLowerCase(),I=I.toLowerCase()),f.indexOf(I))}t.indexOfPath=c;function w(f){const I=f.split(":");let M,y,S;for(const k of I){const G=Number(k);(0,N.isNumber)(G)?y===void 0?y=G:S===void 0&&(S=G):M=M?[M,k].join(":"):k}if(!M)throw new Error("Format for `--goto` should be: `FILE:LINE(:COLUMN)`");return{path:M,line:y!==void 0?y:void 0,column:S!==void 0?S:y!==void 0?1:void 0}}t.parseLineAndColumnAware=w;const v="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",P="BDEFGHIJKMOQRSTUVWXYZbdefghijkmoqrstuvwxyz0123456789";function O(f,I,M=8){let y="";for(let k=0;k<M;k++){let G;k===0&&B.isWindows&&!I&&(M===3||M===4)?G=P:G=v,y+=G.charAt(Math.floor(Math.random()*G.length))}let S;return I?S=`${I}-${y}`:S=y,f?(0,F.join)(f,S):S}t.randomPath=O}),define(se[9],re([0,1,4,2,10]),function(ne,t,F,B,U){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.COI=t.FileAccess=t.nodeModulesAsarUnpackedPath=t.nodeModulesAsarPath=t.nodeModulesPath=t.builtinExtensionsPath=t.RemoteAuthorities=t.connectionTokenQueryName=t.connectionTokenCookieName=t.Schemas=void 0;var N;(function(h){h.inMemory="inmemory",h.vscode="vscode",h.internal="private",h.walkThrough="walkThrough",h.walkThroughSnippet="walkThroughSnippet",h.http="http",h.https="https",h.file="file",h.mailto="mailto",h.untitled="untitled",h.data="data",h.command="command",h.vscodeRemote="vscode-remote",h.vscodeRemoteResource="vscode-remote-resource",h.vscodeUserData="vscode-userdata",h.vscodeCustomEditor="vscode-custom-editor",h.vscodeNotebookCell="vscode-notebook-cell",h.vscodeNotebookCellMetadata="vscode-notebook-cell-metadata",h.vscodeNotebookCellOutput="vscode-notebook-cell-output",h.vscodeInteractive="vscode-interactive",h.vscodeInteractiveInput="vscode-interactive-input",h.vscodeSettings="vscode-settings",h.vscodeWorkspaceTrust="vscode-workspace-trust",h.vscodeTerminal="vscode-terminal",h.vscodeInteractiveSesssion="vscode-chat-editor",h.webviewPanel="webview-panel",h.vscodeWebview="vscode-webview",h.extension="extension",h.vscodeFileResource="vscode-file",h.tmp="tmp",h.vsls="vsls",h.vscodeSourceControl="vscode-scm"})(N||(t.Schemas=N={})),t.connectionTokenCookieName="vscode-tkn",t.connectionTokenQueryName="tkn";class z{constructor(){this.a=Object.create(null),this.b=Object.create(null),this.c=Object.create(null),this.d="http",this.e=null,this.f=`/${N.vscodeRemoteResource}`}setPreferredWebSchema(b){this.d=b}setDelegate(b){this.e=b}setServerRootPath(b){this.f=`${b}/${N.vscodeRemoteResource}`}set(b,A,p){this.a[b]=A,this.b[b]=p}setConnectionToken(b,A){this.c[b]=A}getPreferredWebSchema(){return this.d}rewrite(b){if(this.e)try{return this.e(b)}catch(s){return F.onUnexpectedError(s),b}const A=b.authority;let p=this.a[A];p&&p.indexOf(":")!==-1&&p.indexOf("[")===-1&&(p=`[${p}]`);const R=this.b[A],m=this.c[A];let o=`path=${encodeURIComponent(b.path)}`;return typeof m=="string"&&(o+=`&${t.connectionTokenQueryName}=${encodeURIComponent(m)}`),U.URI.from({scheme:B.isWeb?this.d:N.vscodeRemoteResource,authority:`${p}:${R}`,path:this.f,query:o})}}t.RemoteAuthorities=new z,t.builtinExtensionsPath="vs/../../extensions",t.nodeModulesPath="vs/../../node_modules",t.nodeModulesAsarPath="vs/../../node_modules.asar",t.nodeModulesAsarUnpackedPath="vs/../../node_modules.asar.unpacked";class j{asBrowserUri(b){const A=this.b(b,ne);return this.uriToBrowserUri(A)}uriToBrowserUri(b){return b.scheme===N.vscodeRemote?t.RemoteAuthorities.rewrite(b):b.scheme===N.file&&(B.isNative||B.isWebWorker&&B.globals.origin===`${N.vscodeFileResource}://${j.a}`)?b.with({scheme:N.vscodeFileResource,authority:b.authority||j.a,query:null,fragment:null}):b}asFileUri(b){const A=this.b(b,ne);return this.uriToFileUri(A)}uriToFileUri(b){return b.scheme===N.vscodeFileResource?b.with({scheme:N.file,authority:b.authority!==j.a?b.authority:null,query:null,fragment:null}):b}b(b,A){return U.URI.isUri(b)?b:U.URI.parse(A.toUrl(b))}}j.a="vscode-app",t.FileAccess=new j;var C;(function(h){const b=new Map([["1",{"Cross-Origin-Opener-Policy":"same-origin"}],["2",{"Cross-Origin-Embedder-Policy":"require-corp"}],["3",{"Cross-Origin-Opener-Policy":"same-origin","Cross-Origin-Embedder-Policy":"require-corp"}]]);h.CoopAndCoep=Object.freeze(b.get("3"));const A="vscode-coi";function p(m){let o;typeof m=="string"?o=new URL(m).searchParams:m instanceof URL?o=m.searchParams:U.URI.isUri(m)&&(o=new URL(m.toString(!0)).searchParams);const s=o?.get(A);if(s)return b.get(s)}h.getHeadersFromQuery=p;function R(m,o,s){if(!globalThis.crossOriginIsolated)return;const u=o&&s?"3":s?"2":"1";m instanceof URLSearchParams?m.set(A,u):m[A]=u}h.addSearchParam=R})(C||(t.COI=C={}))}),define(se[19],re([0,1,8,9,5,2,3,10]),function(ne,t,F,B,U,N,z,j){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toLocalResource=t.DataUri=t.distinctParents=t.addTrailingPathSeparator=t.removeTrailingPathSeparator=t.hasTrailingPathSeparator=t.isEqualAuthority=t.isAbsolutePath=t.resolvePath=t.relativePath=t.normalizePath=t.joinPath=t.dirname=t.extname=t.basename=t.basenameOrAuthority=t.getComparisonKey=t.isEqualOrParent=t.isEqual=t.extUriIgnorePathCase=t.extUriBiasedIgnorePathCase=t.extUri=t.ExtUri=t.originalFSPath=void 0;function C(R){return(0,j.uriToFsPath)(R,!0)}t.originalFSPath=C;class h{constructor(m){this.a=m}compare(m,o,s=!1){return m===o?0:(0,z.compare)(this.getComparisonKey(m,s),this.getComparisonKey(o,s))}isEqual(m,o,s=!1){return m===o?!0:!m||!o?!1:this.getComparisonKey(m,s)===this.getComparisonKey(o,s)}getComparisonKey(m,o=!1){return m.with({path:this.a(m)?m.path.toLowerCase():void 0,fragment:o?null:void 0}).toString()}ignorePathCasing(m){return this.a(m)}isEqualOrParent(m,o,s=!1){if(m.scheme===o.scheme){if(m.scheme===B.Schemas.file)return F.isEqualOrParent(C(m),C(o),this.a(m))&&m.query===o.query&&(s||m.fragment===o.fragment);if((0,t.isEqualAuthority)(m.authority,o.authority))return F.isEqualOrParent(m.path,o.path,this.a(m),"/")&&m.query===o.query&&(s||m.fragment===o.fragment)}return!1}joinPath(m,...o){return j.URI.joinPath(m,...o)}basenameOrAuthority(m){return(0,t.basename)(m)||m.authority}basename(m){return U.posix.basename(m.path)}extname(m){return U.posix.extname(m.path)}dirname(m){if(m.path.length===0)return m;let o;return m.scheme===B.Schemas.file?o=j.URI.file(U.dirname(C(m))).path:(o=U.posix.dirname(m.path),m.authority&&o.length&&o.charCodeAt(0)!==47&&(console.error(`dirname("${m.toString})) resulted in a relative path`),o="/")),m.with({path:o})}normalizePath(m){if(!m.path.length)return m;let o;return m.scheme===B.Schemas.file?o=j.URI.file(U.normalize(C(m))).path:o=U.posix.normalize(m.path),m.with({path:o})}relativePath(m,o){if(m.scheme!==o.scheme||!(0,t.isEqualAuthority)(m.authority,o.authority))return;if(m.scheme===B.Schemas.file){const n=U.relative(C(m),C(o));return N.isWindows?F.toSlashes(n):n}let s=m.path||"/";const u=o.path||"/";if(this.a(m)){let n=0;for(const a=Math.min(s.length,u.length);n<a&&!(s.charCodeAt(n)!==u.charCodeAt(n)&&s.charAt(n).toLowerCase()!==u.charAt(n).toLowerCase());n++);s=u.substr(0,n)+s.substr(n)}return U.posix.relative(s,u)}resolvePath(m,o){if(m.scheme===B.Schemas.file){const s=j.URI.file(U.resolve(C(m),o));return m.with({authority:s.authority,path:s.path})}return o=F.toPosixPath(o),m.with({path:U.posix.resolve(m.path,o)})}isAbsolutePath(m){return!!m.path&&m.path[0]==="/"}isEqualAuthority(m,o){return m===o||m!==void 0&&o!==void 0&&(0,z.equalsIgnoreCase)(m,o)}hasTrailingPathSeparator(m,o=U.sep){if(m.scheme===B.Schemas.file){const s=C(m);return s.length>F.getRoot(s).length&&s[s.length-1]===o}else{const s=m.path;return s.length>1&&s.charCodeAt(s.length-1)===47&&!/^[a-zA-Z]:(\/$|\\$)/.test(m.fsPath)}}removeTrailingPathSeparator(m,o=U.sep){return(0,t.hasTrailingPathSeparator)(m,o)?m.with({path:m.path.substr(0,m.path.length-1)}):m}addTrailingPathSeparator(m,o=U.sep){let s=!1;if(m.scheme===B.Schemas.file){const u=C(m);s=u!==void 0&&u.length===F.getRoot(u).length&&u[u.length-1]===o}else{o="/";const u=m.path;s=u.length===1&&u.charCodeAt(u.length-1)===47}return!s&&!(0,t.hasTrailingPathSeparator)(m,o)?m.with({path:m.path+"/"}):m}}t.ExtUri=h,t.extUri=new h(()=>!1),t.extUriBiasedIgnorePathCase=new h(R=>R.scheme===B.Schemas.file?!N.isLinux:!0),t.extUriIgnorePathCase=new h(R=>!0),t.isEqual=t.extUri.isEqual.bind(t.extUri),t.isEqualOrParent=t.extUri.isEqualOrParent.bind(t.extUri),t.getComparisonKey=t.extUri.getComparisonKey.bind(t.extUri),t.basenameOrAuthority=t.extUri.basenameOrAuthority.bind(t.extUri),t.basename=t.extUri.basename.bind(t.extUri),t.extname=t.extUri.extname.bind(t.extUri),t.dirname=t.extUri.dirname.bind(t.extUri),t.joinPath=t.extUri.joinPath.bind(t.extUri),t.normalizePath=t.extUri.normalizePath.bind(t.extUri),t.relativePath=t.extUri.relativePath.bind(t.extUri),t.resolvePath=t.extUri.resolvePath.bind(t.extUri),t.isAbsolutePath=t.extUri.isAbsolutePath.bind(t.extUri),t.isEqualAuthority=t.extUri.isEqualAuthority.bind(t.extUri),t.hasTrailingPathSeparator=t.extUri.hasTrailingPathSeparator.bind(t.extUri),t.removeTrailingPathSeparator=t.extUri.removeTrailingPathSeparator.bind(t.extUri),t.addTrailingPathSeparator=t.extUri.addTrailingPathSeparator.bind(t.extUri);function b(R,m){const o=[];for(let s=0;s<R.length;s++){const u=m(R[s]);R.some((n,a)=>a===s?!1:(0,t.isEqualOrParent)(u,m(n)))||o.push(R[s])}return o}t.distinctParents=b;var A;(function(R){R.META_DATA_LABEL="label",R.META_DATA_DESCRIPTION="description",R.META_DATA_SIZE="size",R.META_DATA_MIME="mime";function m(o){const s=new Map;o.path.substring(o.path.indexOf(";")+1,o.path.lastIndexOf(";")).split(";").forEach(a=>{const[i,l]=a.split(":");i&&l&&s.set(i,l)});const n=o.path.substring(0,o.path.indexOf(";"));return n&&s.set(R.META_DATA_MIME,n),s}R.parseMetaData=m})(A||(t.DataUri=A={}));function p(R,m,o){if(m){let s=R.path;return s&&s[0]!==U.posix.sep&&(s=U.posix.sep+s),R.with({scheme:o,authority:m,path:s})}return R.with({scheme:o})}t.toLocalResource=p}),define(se[20],re([0,1,38,4,21,7,19,2,15]),function(ne,t,F,B,U,N,z,j,C){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createCancelableAsyncIterable=t.CancelableAsyncIterableObject=t.AsyncIterableObject=t.Promises=t.DeferredPromise=t.IntervalCounter=t.TaskSequentializer=t.retry=t.IdleValue=t.runWhenIdle=t.ThrottledWorker=t.RunOnceWorker=t.ProcessTimeRunOnceScheduler=t.RunOnceScheduler=t.IntervalTimer=t.TimeoutTimer=t.ResourceQueue=t.Queue=t.Limiter=t.firstParallel=t.first=t.sequence=t.disposableTimeout=t.timeout=t.AutoOpenBarrier=t.Barrier=t.ThrottledDelayer=t.Delayer=t.SequencerByKey=t.Sequencer=t.Throttler=t.asPromise=t.raceTimeout=t.raceCancellablePromises=t.raceCancellationError=t.raceCancellation=t.createCancelablePromise=t.isThenable=void 0;function h(d){return!!d&&typeof d.then=="function"}t.isThenable=h;function b(d){const e=new F.CancellationTokenSource,r=d(e.token),g=new Promise((E,W)=>{const $=e.token.onCancellationRequested(()=>{$.dispose(),e.dispose(),W(new B.CancellationError)});Promise.resolve(r).then(J=>{$.dispose(),e.dispose(),E(J)},J=>{$.dispose(),e.dispose(),W(J)})});return new class{cancel(){e.cancel()}then(E,W){return g.then(E,W)}catch(E){return this.then(void 0,E)}finally(E){return g.finally(E)}}}t.createCancelablePromise=b;function A(d,e,r){return new Promise((g,E)=>{const W=e.onCancellationRequested(()=>{W.dispose(),g(r)});d.then(g,E).finally(()=>W.dispose())})}t.raceCancellation=A;function p(d,e){return new Promise((r,g)=>{const E=e.onCancellationRequested(()=>{E.dispose(),g(new B.CancellationError)});d.then(r,g).finally(()=>E.dispose())})}t.raceCancellationError=p;async function R(d){let e=-1;const r=d.map((g,E)=>g.then(W=>(e=E,W)));try{return await Promise.race(r)}finally{d.forEach((g,E)=>{E!==e&&g.cancel()})}}t.raceCancellablePromises=R;function m(d,e,r){let g;const E=setTimeout(()=>{g?.(void 0),r?.()},e);return Promise.race([d.finally(()=>clearTimeout(E)),new Promise(W=>g=W)])}t.raceTimeout=m;function o(d){return new Promise((e,r)=>{const g=d();h(g)?g.then(e,r):e(g)})}t.asPromise=o;class s{constructor(){this.a=null,this.b=null,this.d=null}queue(e){if(this.a){if(this.d=e,!this.b){const r=()=>{this.b=null;const g=this.queue(this.d);return this.d=null,g};this.b=new Promise(g=>{this.a.then(r,r).then(g)})}return new Promise((r,g)=>{this.b.then(r,g)})}return this.a=e(),new Promise((r,g)=>{this.a.then(E=>{this.a=null,r(E)},E=>{this.a=null,g(E)})})}}t.Throttler=s;class u{constructor(){this.a=Promise.resolve(null)}queue(e){return this.a=this.a.then(()=>e(),()=>e())}}t.Sequencer=u;class n{constructor(){this.a=new Map}queue(e,r){const E=(this.a.get(e)??Promise.resolve()).catch(()=>{}).then(r).finally(()=>{this.a.get(e)===E&&this.a.delete(e)});return this.a.set(e,E),E}}t.SequencerByKey=n;const a=(d,e)=>{let r=!0;const g=setTimeout(()=>{r=!1,e()},d);return{isTriggered:()=>r,dispose:()=>{clearTimeout(g),r=!1}}},i=d=>{let e=!0;return queueMicrotask(()=>{e&&(e=!1,d())}),{isTriggered:()=>e,dispose:()=>{e=!1}}};class l{constructor(e){this.defaultDelay=e,this.a=null,this.b=null,this.d=null,this.f=null,this.g=null}trigger(e,r=this.defaultDelay){this.g=e,this.h(),this.b||(this.b=new Promise((E,W)=>{this.d=E,this.f=W}).then(()=>{if(this.b=null,this.d=null,this.g){const E=this.g;return this.g=null,E()}}));const g=()=>{this.a=null,this.d?.(null)};return this.a=r===C.MicrotaskDelay?i(g):a(r,g),this.b}isTriggered(){return!!this.a?.isTriggered()}cancel(){this.h(),this.b&&(this.f?.(new B.CancellationError),this.b=null)}h(){this.a?.dispose(),this.a=null}dispose(){this.cancel()}}t.Delayer=l;class c{constructor(e){this.a=new l(e),this.b=new s}trigger(e,r){return this.a.trigger(()=>this.b.queue(e),r)}isTriggered(){return this.a.isTriggered()}cancel(){this.a.cancel()}dispose(){this.a.dispose()}}t.ThrottledDelayer=c;class w{constructor(){this.a=!1,this.b=new Promise((e,r)=>{this.d=e})}isOpen(){return this.a}open(){this.a=!0,this.d(!0)}wait(){return this.b}}t.Barrier=w;class v extends w{constructor(e){super(),this.f=setTimeout(()=>this.open(),e)}open(){clearTimeout(this.f),super.open()}}t.AutoOpenBarrier=v;function P(d,e){return e?new Promise((r,g)=>{const E=setTimeout(()=>{W.dispose(),r()},d),W=e.onCancellationRequested(()=>{clearTimeout(E),W.dispose(),g(new B.CancellationError)})}):b(r=>P(d,r))}t.timeout=P;function O(d,e=0){const r=setTimeout(d,e);return(0,N.toDisposable)(()=>clearTimeout(r))}t.disposableTimeout=O;function f(d){const e=[];let r=0;const g=d.length;function E(){return r<g?d[r++]():null}function W($){$!=null&&e.push($);const J=E();return J?J.then(W):Promise.resolve(e)}return Promise.resolve(null).then(W)}t.sequence=f;function I(d,e=g=>!!g,r=null){let g=0;const E=d.length,W=()=>{if(g>=E)return Promise.resolve(r);const $=d[g++];return Promise.resolve($()).then(ie=>e(ie)?Promise.resolve(ie):W())};return W()}t.first=I;function M(d,e=g=>!!g,r=null){if(d.length===0)return Promise.resolve(r);let g=d.length;const E=()=>{g=-1;for(const W of d)W.cancel?.()};return new Promise((W,$)=>{for(const J of d)J.then(ie=>{--g>=0&&e(ie)?(E(),W(ie)):g===0&&W(r)}).catch(ie=>{--g>=0&&(E(),$(ie))})})}t.firstParallel=M;class y{constructor(e){this.a=0,this.d=e,this.f=[],this.b=0,this.g=new U.Emitter}get onDrained(){return this.g.event}get size(){return this.a}queue(e){return this.a++,new Promise((r,g)=>{this.f.push({factory:e,c:r,e:g}),this.h()})}h(){for(;this.f.length&&this.b<this.d;){const e=this.f.shift();this.b++;const r=e.factory();r.then(e.c,e.e),r.then(()=>this.j(),()=>this.j())}}j(){this.a--,this.b--,this.f.length>0?this.h():this.g.fire()}dispose(){this.g.dispose()}}t.Limiter=y;class S extends y{constructor(){super(1)}}t.Queue=S;class k{constructor(){this.a=new Map,this.b=new Set}async whenDrained(){if(this.d())return;const e=new T;return this.b.add(e),e.p}d(){for(const[,e]of this.a)if(e.size>0)return!1;return!0}queueFor(e,r=z.extUri){const g=r.getComparisonKey(e);let E=this.a.get(g);return E||(E=new S,U.Event.once(E.onDrained)(()=>{E?.dispose(),this.a.delete(g),this.f()}),this.a.set(g,E)),E}f(){this.d()&&this.g()}g(){for(const e of this.b)e.complete();this.b.clear()}dispose(){for(const[,e]of this.a)e.dispose();this.a.clear(),this.g()}}t.ResourceQueue=k;class G{constructor(e,r){this.a=-1,typeof e=="function"&&typeof r=="number"&&this.setIfNotSet(e,r)}dispose(){this.cancel()}cancel(){this.a!==-1&&(clearTimeout(this.a),this.a=-1)}cancelAndSet(e,r){this.cancel(),this.a=setTimeout(()=>{this.a=-1,e()},r)}setIfNotSet(e,r){this.a===-1&&(this.a=setTimeout(()=>{this.a=-1,e()},r))}}t.TimeoutTimer=G;class X{constructor(){this.a=-1}dispose(){this.cancel()}cancel(){this.a!==-1&&(clearInterval(this.a),this.a=-1)}cancelAndSet(e,r){this.cancel(),this.a=setInterval(()=>{e()},r)}}t.IntervalTimer=X;class Z{constructor(e,r){this.b=-1,this.a=e,this.d=r,this.f=this.g.bind(this)}dispose(){this.cancel(),this.a=null}cancel(){this.isScheduled()&&(clearTimeout(this.b),this.b=-1)}schedule(e=this.d){this.cancel(),this.b=setTimeout(this.f,e)}get delay(){return this.d}set delay(e){this.d=e}isScheduled(){return this.b!==-1}flush(){this.isScheduled()&&(this.cancel(),this.h())}g(){this.b=-1,this.a&&this.h()}h(){this.a?.()}}t.RunOnceScheduler=Z;class ee{constructor(e,r){r%1e3!==0&&console.warn(`ProcessTimeRunOnceScheduler resolution is 1s, ${r}ms is not a multiple of 1000ms.`),this.a=e,this.b=r,this.d=0,this.f=-1,this.g=this.h.bind(this)}dispose(){this.cancel(),this.a=null}cancel(){this.isScheduled()&&(clearInterval(this.f),this.f=-1)}schedule(e=this.b){e%1e3!==0&&console.warn(`ProcessTimeRunOnceScheduler resolution is 1s, ${e}ms is not a multiple of 1000ms.`),this.cancel(),this.d=Math.ceil(e/1e3),this.f=setInterval(this.g,1e3)}isScheduled(){return this.f!==-1}h(){this.d--,!(this.d>0)&&(clearInterval(this.f),this.f=-1,this.a?.())}}t.ProcessTimeRunOnceScheduler=ee;class Y extends Z{constructor(e,r){super(e,r),this.j=[]}work(e){this.j.push(e),this.isScheduled()||this.schedule()}h(){const e=this.j;this.j=[],this.a?.(e)}dispose(){this.j=[],super.dispose()}}t.RunOnceWorker=Y;class _ extends N.Disposable{constructor(e,r){super(),this.g=e,this.h=r,this.a=[],this.b=this.B(new N.MutableDisposable),this.f=!1}get pending(){return this.a.length}work(e){if(this.f)return!1;if(typeof this.g.maxBufferedWork=="number"){if(this.b.value){if(this.pending+e.length>this.g.maxBufferedWork)return!1}else if(this.pending+e.length-this.g.maxWorkChunkSize>this.g.maxBufferedWork)return!1}for(const r of e)this.a.push(r);return this.b.value||this.j(),!0}j(){this.h(this.a.splice(0,this.g.maxWorkChunkSize)),this.a.length>0&&(this.b.value=new Z(()=>{this.b.clear(),this.j()},this.g.throttleDelay),this.b.value.schedule())}dispose(){super.dispose(),this.f=!0}}t.ThrottledWorker=_,function(){typeof requestIdleCallback!="function"||typeof cancelIdleCallback!="function"?t.runWhenIdle=d=>{(0,j.setTimeout0)(()=>{if(e)return;const r=Date.now()+15;d(Object.freeze({didTimeout:!0,timeRemaining(){return Math.max(0,r-Date.now())}}))});let e=!1;return{dispose(){e||(e=!0)}}}:t.runWhenIdle=(d,e)=>{const r=requestIdleCallback(d,typeof e=="number"?{timeout:e}:void 0);let g=!1;return{dispose(){g||(g=!0,cancelIdleCallback(r))}}}}();class ae{constructor(e){this.d=!1,this.a=()=>{try{this.f=e()}catch(r){this.g=r}finally{this.d=!0}},this.b=(0,t.runWhenIdle)(()=>this.a())}dispose(){this.b.dispose()}get value(){if(this.d||(this.b.dispose(),this.a()),this.g)throw this.g;return this.f}get isInitialized(){return this.d}}t.IdleValue=ae;async function L(d,e,r){let g;for(let E=0;E<r;E++)try{return await d()}catch(W){g=W,await P(e)}throw g}t.retry=L;class Q{hasPending(e){return this.a?typeof e=="number"?this.a.taskId===e:!!this.a:!1}get pending(){return this.a?.promise}cancelPending(){this.a?.cancel()}setPending(e,r,g){return this.a={taskId:e,cancel:()=>g?.(),promise:r},r.then(()=>this.d(e),()=>this.d(e)),r}d(e){this.a&&e===this.a.taskId&&(this.a=void 0,this.f())}f(){if(this.b){const e=this.b;this.b=void 0,e.run().then(e.promiseResolve,e.promiseReject)}}setNext(e){if(this.b)this.b.run=e;else{let r,g;const E=new Promise((W,$)=>{r=W,g=$});this.b={run:e,promise:E,promiseResolve:r,promiseReject:g}}return this.b.promise}hasNext(){return!!this.b}async join(){return this.b?.promise??this.a?.promise}}t.TaskSequentializer=Q;class D{constructor(e,r=()=>Date.now()){this.d=e,this.f=r,this.a=0,this.b=0}increment(){const e=this.f();return e-this.a>this.d&&(this.a=e,this.b=0),this.b++,this.b}}t.IntervalCounter=D;var q;(function(d){d[d.Resolved=0]="Resolved",d[d.Rejected=1]="Rejected"})(q||(q={}));class T{get isRejected(){return this.d?.outcome===1}get isResolved(){return this.d?.outcome===0}get isSettled(){return!!this.d}get value(){return this.d?.outcome===0?this.d?.value:void 0}constructor(){this.p=new Promise((e,r)=>{this.a=e,this.b=r})}complete(e){return new Promise(r=>{this.a(e),this.d={outcome:0,value:e},r()})}error(e){return new Promise(r=>{this.b(e),this.d={outcome:1,value:e},r()})}cancel(){return this.error(new B.CancellationError)}}t.DeferredPromise=T;var K;(function(d){async function e(g){let E;const W=await Promise.all(g.map($=>$.then(J=>J,J=>{E||(E=J)})));if(typeof E<"u")throw E;return W}d.settled=e;function r(g){return new Promise(async(E,W)=>{try{await g(E,W)}catch($){W($)}})}d.withAsyncBody=r})(K||(t.Promises=K={}));var V;(function(d){d[d.Initial=0]="Initial",d[d.DoneOK=1]="DoneOK",d[d.DoneError=2]="DoneError"})(V||(V={}));class H{static fromArray(e){return new H(r=>{r.emitMany(e)})}static fromPromise(e){return new H(async r=>{r.emitMany(await e)})}static fromPromises(e){return new H(async r=>{await Promise.all(e.map(async g=>r.emitOne(await g)))})}static merge(e){return new H(async r=>{await Promise.all(e.map(async g=>{for await(const E of g)r.emitOne(E)}))})}constructor(e){this.a=0,this.b=[],this.d=null,this.f=new U.Emitter,queueMicrotask(async()=>{const r={emitOne:g=>this.g(g),emitMany:g=>this.h(g),reject:g=>this.k(g)};try{await Promise.resolve(e(r)),this.j()}catch(g){this.k(g)}finally{r.emitOne=void 0,r.emitMany=void 0,r.reject=void 0}})}[Symbol.asyncIterator](){let e=0;return{next:async()=>{do{if(this.a===2)throw this.d;if(e<this.b.length)return{done:!1,value:this.b[e++]};if(this.a===1)return{done:!0,value:void 0};await U.Event.toPromise(this.f.event)}while(!0)}}}static map(e,r){return new H(async g=>{for await(const E of e)g.emitOne(r(E))})}map(e){return H.map(this,e)}static filter(e,r){return new H(async g=>{for await(const E of e)r(E)&&g.emitOne(E)})}filter(e){return H.filter(this,e)}static coalesce(e){return H.filter(e,r=>!!r)}coalesce(){return H.coalesce(this)}static async toPromise(e){const r=[];for await(const g of e)r.push(g);return r}toPromise(){return H.toPromise(this)}g(e){this.a===0&&(this.b.push(e),this.f.fire())}h(e){this.a===0&&(this.b=this.b.concat(e),this.f.fire())}j(){this.a===0&&(this.a=1,this.f.fire())}k(e){this.a===0&&(this.a=2,this.d=e,this.f.fire())}}t.AsyncIterableObject=H,H.EMPTY=H.fromArray([]);class te extends H{constructor(e,r){super(r),this.l=e}cancel(){this.l.cancel()}}t.CancelableAsyncIterableObject=te;function x(d){const e=new F.CancellationTokenSource,r=d(e.token);return new te(e,async g=>{const E=e.token.onCancellationRequested(()=>{E.dispose(),e.dispose(),g.reject(new B.CancellationError)});try{for await(const W of r){if(e.token.isCancellationRequested)return;g.emitOne(W)}E.dispose(),e.dispose()}catch(W){E.dispose(),e.dispose(),g.reject(W)}})}t.createCancelableAsyncIterable=x}),define(se[22],re([0,1,39,20,8,13,5,2,3]),function(ne,t,F,B,U,N,z,j,C){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.patternsEquals=t.getPathTerms=t.getBasenameTerms=t.isRelativePattern=t.parse=t.match=t.splitGlobAware=t.GLOB_SPLIT=t.GLOBSTAR=t.getEmptyExpression=void 0;function h(){return Object.create(null)}t.getEmptyExpression=h,t.GLOBSTAR="**",t.GLOB_SPLIT="/";const b="[/\\\\]",A="[^/\\\\]",p=/\//g;function R(D,q){switch(D){case 0:return"";case 1:return`${A}*?`;default:return`(?:${b}|${A}+${b}${q?`|${b}${A}+`:""})*?`}}function m(D,q){if(!D)return[];const T=[];let K=!1,V=!1,H="";for(const te of D){switch(te){case q:if(!K&&!V){T.push(H),H="";continue}break;case"{":K=!0;break;case"}":K=!1;break;case"[":V=!0;break;case"]":V=!1;break}H+=te}return H&&T.push(H),T}t.splitGlobAware=m;function o(D){if(!D)return"";let q="";const T=m(D,t.GLOB_SPLIT);if(T.every(K=>K===t.GLOBSTAR))q=".*";else{let K=!1;T.forEach((V,H)=>{if(V===t.GLOBSTAR){if(K)return;q+=R(2,H===T.length-1)}else{let te=!1,x="",d=!1,e="";for(const r of V){if(r!=="}"&&te){x+=r;continue}if(d&&(r!=="]"||!e)){let g;r==="-"?g=r:(r==="^"||r==="!")&&!e?g="^":r===t.GLOB_SPLIT?g="":g=(0,C.escapeRegExpCharacters)(r),e+=g;continue}switch(r){case"{":te=!0;continue;case"[":d=!0;continue;case"}":{const E=`(?:${m(x,",").map(W=>o(W)).join("|")})`;q+=E,te=!1,x="";break}case"]":{q+="["+e+"]",d=!1,e="";break}case"?":q+=A;continue;case"*":q+=R(1);continue;default:q+=(0,C.escapeRegExpCharacters)(r)}}H<T.length-1&&(T[H+1]!==t.GLOBSTAR||H+2<T.length)&&(q+=b)}K=V===t.GLOBSTAR})}return q}const s=/^\*\*\/\*\.[\w\.-]+$/,u=/^\*\*\/([\w\.-]+)\/?$/,n=/^{\*\*\/\*?[\w\.-]+\/?(,\*\*\/\*?[\w\.-]+\/?)*}$/,a=/^{\*\*\/\*?[\w\.-]+(\/(\*\*)?)?(,\*\*\/\*?[\w\.-]+(\/(\*\*)?)?)*}$/,i=/^\*\*((\/[\w\.-]+)+)\/?$/,l=/^([\w\.-]+(\/[\w\.-]+)*)\/?$/,c=new N.LRUCache(1e4),w=function(){return!1},v=function(){return null};function P(D,q){if(!D)return v;let T;typeof D!="string"?T=D.pattern:T=D,T=T.trim();const K=`${T}_${!!q.trimForExclusions}`;let V=c.get(K);if(V)return O(V,D);let H;return s.test(T)?V=I(T.substr(4),T):(H=u.exec(f(T,q)))?V=M(H[1],T):(q.trimForExclusions?a:n).test(T)?V=y(T,q):(H=i.exec(f(T,q)))?V=S(H[1].substr(1),T,!0):(H=l.exec(f(T,q)))?V=S(H[1],T,!1):V=k(T),c.set(K,V),O(V,D)}function O(D,q){if(typeof q=="string")return D;const T=function(K,V){return(0,U.isEqualOrParent)(K,q.base,!j.isLinux)?D((0,C.ltrim)(K.substr(q.base.length),z.sep),V):null};return T.allBasenames=D.allBasenames,T.allPaths=D.allPaths,T.basenames=D.basenames,T.patterns=D.patterns,T}function f(D,q){return q.trimForExclusions&&D.endsWith("/**")?D.substr(0,D.length-2):D}function I(D,q){return function(T,K){return typeof T=="string"&&T.endsWith(D)?q:null}}function M(D,q){const T=`/${D}`,K=`\\${D}`,V=function(te,x){return typeof te!="string"?null:x?x===D?q:null:te===D||te.endsWith(T)||te.endsWith(K)?q:null},H=[D];return V.basenames=H,V.patterns=[q],V.allBasenames=H,V}function y(D,q){const T=L(D.slice(1,-1).split(",").map(x=>P(x,q)).filter(x=>x!==v),D),K=T.length;if(!K)return v;if(K===1)return T[0];const V=function(x,d){for(let e=0,r=T.length;e<r;e++)if(T[e](x,d))return D;return null},H=T.find(x=>!!x.allBasenames);H&&(V.allBasenames=H.allBasenames);const te=T.reduce((x,d)=>d.allPaths?x.concat(d.allPaths):x,[]);return te.length&&(V.allPaths=te),V}function S(D,q,T){const K=z.sep===z.posix.sep,V=K?D:D.replace(p,z.sep),H=z.sep+V,te=z.posix.sep+D;let x;return T?x=function(d,e){return typeof d=="string"&&(d===V||d.endsWith(H)||!K&&(d===D||d.endsWith(te)))?q:null}:x=function(d,e){return typeof d=="string"&&(d===V||!K&&d===D)?q:null},x.allPaths=[(T?"*/":"./")+D],x}function k(D){try{const q=new RegExp(`^${o(D)}$`);return function(T){return q.lastIndex=0,typeof T=="string"&&q.test(T)?D:null}}catch{return v}}function G(D,q,T){return!D||typeof q!="string"?!1:X(D)(q,void 0,T)}t.match=G;function X(D,q={}){if(!D)return w;if(typeof D=="string"||Z(D)){const T=P(D,q);if(T===v)return w;const K=function(V,H){return!!T(V,H)};return T.allBasenames&&(K.allBasenames=T.allBasenames),T.allPaths&&(K.allPaths=T.allPaths),K}return _(D,q)}t.parse=X;function Z(D){const q=D;return q?typeof q.base=="string"&&typeof q.pattern=="string":!1}t.isRelativePattern=Z;function ee(D){return D.allBasenames||[]}t.getBasenameTerms=ee;function Y(D){return D.allPaths||[]}t.getPathTerms=Y;function _(D,q){const T=L(Object.getOwnPropertyNames(D).map(x=>ae(x,D[x],q)).filter(x=>x!==v)),K=T.length;if(!K)return v;if(!T.some(x=>!!x.requiresSiblings)){if(K===1)return T[0];const x=function(r,g){let E;for(let W=0,$=T.length;W<$;W++){const J=T[W](r,g);if(typeof J=="string")return J;(0,B.isThenable)(J)&&(E||(E=[]),E.push(J))}return E?(async()=>{for(const W of E){const $=await W;if(typeof $=="string")return $}return null})():null},d=T.find(r=>!!r.allBasenames);d&&(x.allBasenames=d.allBasenames);const e=T.reduce((r,g)=>g.allPaths?r.concat(g.allPaths):r,[]);return e.length&&(x.allPaths=e),x}const V=function(x,d,e){let r,g;for(let E=0,W=T.length;E<W;E++){const $=T[E];$.requiresSiblings&&e&&(d||(d=(0,z.basename)(x)),r||(r=d.substr(0,d.length-(0,z.extname)(x).length)));const J=$(x,d,r,e);if(typeof J=="string")return J;(0,B.isThenable)(J)&&(g||(g=[]),g.push(J))}return g?(async()=>{for(const E of g){const W=await E;if(typeof W=="string")return W}return null})():null},H=T.find(x=>!!x.allBasenames);H&&(V.allBasenames=H.allBasenames);const te=T.reduce((x,d)=>d.allPaths?x.concat(d.allPaths):x,[]);return te.length&&(V.allPaths=te),V}function ae(D,q,T){if(q===!1)return v;const K=P(D,T);if(K===v)return v;if(typeof q=="boolean")return K;if(q){const V=q.when;if(typeof V=="string"){const H=(te,x,d,e)=>{if(!e||!K(te,x))return null;const r=V.replace("$(basename)",()=>d),g=e(r);return(0,B.isThenable)(g)?g.then(E=>E?D:null):g?D:null};return H.requiresSiblings=!0,H}}return K}function L(D,q){const T=D.filter(x=>!!x.basenames);if(T.length<2)return D;const K=T.reduce((x,d)=>{const e=d.basenames;return e?x.concat(e):x},[]);let V;if(q){V=[];for(let x=0,d=K.length;x<d;x++)V.push(q)}else V=T.reduce((x,d)=>{const e=d.patterns;return e?x.concat(e):x},[]);const H=function(x,d){if(typeof x!="string")return null;if(!d){let r;for(r=x.length;r>0;r--){const g=x.charCodeAt(r-1);if(g===47||g===92)break}d=x.substr(r)}const e=K.indexOf(d);return e!==-1?V[e]:null};H.basenames=K,H.patterns=V,H.allBasenames=K;const te=D.filter(x=>!x.basenames);return te.push(H),te}function Q(D,q){return(0,F.equals)(D,q,(T,K)=>typeof T=="string"&&typeof K=="string"?T===K:typeof T!="string"&&typeof K!="string"?T.base===K.base&&T.pattern===K.pattern:!1)}t.patternsEquals=Q}),define(se[23],re([0,1,3,2,6]),function(ne,t,F,B,U){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StringBuilder=t.decodeUTF16LE=t.getPlatformTextDecoder=void 0;let N;function z(){return N||(N=new TextDecoder("UTF-16LE")),N}let j;function C(){return j||(j=new TextDecoder("UTF-16BE")),j}let h;function b(){return h||(h=B.isLittleEndian()?z():C()),h}t.getPlatformTextDecoder=b;function A(m,o,s){const u=new Uint16Array(m.buffer,o,s);return s>0&&(u[0]===65279||u[0]===65534)?p(m,o,s):z().decode(u)}t.decodeUTF16LE=A;function p(m,o,s){const u=[];let n=0;for(let a=0;a<s;a++){const i=U.readUInt16LE(m,o);o+=2,u[n++]=String.fromCharCode(i)}return u.join("")}class R{constructor(o){this.a=o|0,this.b=new Uint16Array(this.a),this.c=null,this.d=0}reset(){this.c=null,this.d=0}build(){return this.c!==null?(this.f(),this.c.join("")):this.e()}e(){if(this.d===0)return"";const o=new Uint16Array(this.b.buffer,0,this.d);return b().decode(o)}f(){const o=this.e();this.d=0,this.c===null?this.c=[o]:this.c[this.c.length]=o}appendCharCode(o){const s=this.a-this.d;s<=1&&(s===0||F.isHighSurrogate(o))&&this.f(),this.b[this.d++]=o}appendASCIICharCode(o){this.d===this.a&&this.f(),this.b[this.d++]=o}appendString(o){const s=o.length;if(this.d+s>=this.a){this.f(),this.c[this.c.length]=o;return}for(let u=0;u<s;u++)this.b[this.d++]=o.charCodeAt(u)}}t.StringBuilder=R}),define(se[24],re([0,1,6,23]),function(ne,t,F,B){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.compressConsecutiveTextChanges=t.TextChange=void 0;function U(C){return C.replace(/\n/g,"\\n").replace(/\r/g,"\\r")}class N{get oldLength(){return this.oldText.length}get oldEnd(){return this.oldPosition+this.oldText.length}get newLength(){return this.newText.length}get newEnd(){return this.newPosition+this.newText.length}constructor(h,b,A,p){this.oldPosition=h,this.oldText=b,this.newPosition=A,this.newText=p}toString(){return this.oldText.length===0?`(insert@${this.oldPosition} "${U(this.newText)}")`:this.newText.length===0?`(delete@${this.oldPosition} "${U(this.oldText)}")`:`(replace@${this.oldPosition} "${U(this.oldText)}" with "${U(this.newText)}")`}static a(h){return 4+2*h.length}static c(h,b,A){const p=b.length;F.writeUInt32BE(h,p,A),A+=4;for(let R=0;R<p;R++)F.writeUInt16LE(h,b.charCodeAt(R),A),A+=2;return A}static d(h,b){const A=F.readUInt32BE(h,b);return b+=4,(0,B.decodeUTF16LE)(h,b,A)}writeSize(){return 4+4+N.a(this.oldText)+N.a(this.newText)}write(h,b){return F.writeUInt32BE(h,this.oldPosition,b),b+=4,F.writeUInt32BE(h,this.newPosition,b),b+=4,b=N.c(h,this.oldText,b),b=N.c(h,this.newText,b),b}static read(h,b,A){const p=F.readUInt32BE(h,b);b+=4;const R=F.readUInt32BE(h,b);b+=4;const m=N.d(h,b);b+=N.a(m);const o=N.d(h,b);return b+=N.a(o),A.push(new N(p,m,R,o)),b}}t.TextChange=N;function z(C,h){return C===null||C.length===0?h:new j(C,h).compress()}t.compressConsecutiveTextChanges=z;class j{constructor(h,b){this.a=h,this.c=b,this.d=[],this.e=0,this.f=this.a.length,this.g=0,this.h=this.c.length,this.j=0}compress(){let h=0,b=0,A=this.n(h),p=this.l(b);for(;h<this.f||b<this.h;){if(A===null){this.k(p),p=this.l(++b);continue}if(p===null){this.m(A),A=this.n(++h);continue}if(p.oldEnd<=A.newPosition){this.k(p),p=this.l(++b);continue}if(A.newEnd<=p.oldPosition){this.m(A),A=this.n(++h);continue}if(p.oldPosition<A.newPosition){const[u,n]=j.r(p,A.newPosition-p.oldPosition);this.k(u),p=n;continue}if(A.newPosition<p.oldPosition){const[u,n]=j.q(A,p.oldPosition-A.newPosition);this.m(u),A=n;continue}let o,s;if(p.oldEnd===A.newEnd)o=A,s=p,A=this.n(++h),p=this.l(++b);else if(p.oldEnd<A.newEnd){const[u,n]=j.q(A,p.oldLength);o=u,s=p,A=n,p=this.l(++b)}else{const[u,n]=j.r(p,A.newLength);o=A,s=u,A=this.n(++h),p=n}this.d[this.e++]=new N(o.oldPosition,o.oldText,s.newPosition,s.newText),this.g+=o.newLength-o.oldLength,this.j+=s.newLength-s.oldLength}const R=j.s(this.d);return j.t(R)}k(h){this.d[this.e++]=j.o(this.g,h),this.j+=h.newLength-h.oldLength}l(h){return h<this.h?this.c[h]:null}m(h){this.d[this.e++]=j.p(this.j,h),this.g+=h.newLength-h.oldLength}n(h){return h<this.f?this.a[h]:null}static o(h,b){return new N(b.oldPosition-h,b.oldText,b.newPosition,b.newText)}static p(h,b){return new N(b.oldPosition,b.oldText,b.newPosition+h,b.newText)}static q(h,b){const A=h.newText.substr(0,b),p=h.newText.substr(b);return[new N(h.oldPosition,h.oldText,h.newPosition,A),new N(h.oldEnd,"",h.newPosition+b,p)]}static r(h,b){const A=h.oldText.substr(0,b),p=h.oldText.substr(b);return[new N(h.oldPosition,A,h.newPosition,h.newText),new N(h.oldPosition+b,p,h.newEnd,"")]}static s(h){if(h.length===0)return h;const b=[];let A=0,p=h[0];for(let R=1;R<h.length;R++){const m=h[R];p.oldEnd===m.oldPosition?p=new N(p.oldPosition,p.oldText+m.oldText,p.newPosition,p.newText+m.newText):(b[A++]=p,p=m)}return b[A++]=p,b}static t(h){if(h.length===0)return h;const b=[];let A=0;for(let p=0;p<h.length;p++){const R=h[p];R.oldText!==R.newText&&(b[A++]=R)}return b}}}),define(se[11],re([0,1,40,12,25,17,41]),function(ne,t,F,B,U,N,z){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PieceTreeBase=t.StringBuffer=t.Piece=t.createLineStarts=t.createLineStartsFast=void 0;const j=65535;function C(u){let n;return u[u.length-1]<65536?n=new Uint16Array(u.length):n=new Uint32Array(u.length),n.set(u,0),n}class h{constructor(n,a,i,l,c){this.lineStarts=n,this.cr=a,this.lf=i,this.crlf=l,this.isBasicASCII=c}}function b(u,n=!0){const a=[0];let i=1;for(let l=0,c=u.length;l<c;l++){const w=u.charCodeAt(l);w===13?l+1<c&&u.charCodeAt(l+1)===10?(a[i++]=l+2,l++):a[i++]=l+1:w===10&&(a[i++]=l+1)}return n?C(a):a}t.createLineStartsFast=b;function A(u,n){u.length=0,u[0]=0;let a=1,i=0,l=0,c=0,w=!0;for(let P=0,O=n.length;P<O;P++){const f=n.charCodeAt(P);f===13?P+1<O&&n.charCodeAt(P+1)===10?(c++,u[a++]=P+2,P++):(i++,u[a++]=P+1):f===10?(l++,u[a++]=P+1):w&&f!==9&&(f<32||f>126)&&(w=!1)}const v=new h(C(u),i,l,c,w);return u.length=0,v}t.createLineStarts=A;class p{constructor(n,a,i,l,c){this.bufferIndex=n,this.start=a,this.end=i,this.lineFeedCnt=l,this.length=c}}t.Piece=p;class R{constructor(n,a){this.buffer=n,this.lineStarts=a}}t.StringBuffer=R;class m{constructor(n,a){this.a=[],this.c=n,this.d=a,this.b=0,n.root!==N.SENTINEL&&n.iterate(n.root,i=>(i!==N.SENTINEL&&this.a.push(i.piece),!0))}read(){return this.a.length===0?this.b===0?(this.b++,this.d):null:this.b>this.a.length-1?null:this.b===0?this.d+this.c.getPieceContent(this.a[this.b++]):this.c.getPieceContent(this.a[this.b++])}}class o{constructor(n){this.a=n,this.b=[]}get(n){for(let a=this.b.length-1;a>=0;a--){const i=this.b[a];if(i.nodeStartOffset<=n&&i.nodeStartOffset+i.node.piece.length>=n)return i}return null}get2(n){for(let a=this.b.length-1;a>=0;a--){const i=this.b[a];if(i.nodeStartLineNumber&&i.nodeStartLineNumber<n&&i.nodeStartLineNumber+i.node.piece.lineFeedCnt>=n)return i}return null}set(n){this.b.length>=this.a&&this.b.shift(),this.b.push(n)}validate(n){let a=!1;const i=this.b;for(let l=0;l<i.length;l++){const c=i[l];if(c.node.parent===null||c.nodeStartOffset>=n){i[l]=null,a=!0;continue}}if(a){const l=[];for(const c of i)c!==null&&l.push(c);this.b=l}}}class s{constructor(n,a,i){this.create(n,a,i)}create(n,a,i){this.a=[new R("",[0])],this.g={line:0,column:0},this.root=N.SENTINEL,this.b=1,this.c=0,this.d=a,this.e=a.length,this.f=i;let l=null;for(let c=0,w=n.length;c<w;c++)if(n[c].buffer.length>0){n[c].lineStarts||(n[c].lineStarts=b(n[c].buffer));const v=new p(c+1,{line:0,column:0},{line:n[c].lineStarts.length-1,column:n[c].buffer.length-n[c].lineStarts[n[c].lineStarts.length-1]},n[c].lineStarts.length-1,n[c].buffer.length);this.a.push(n[c]),l=this.S(l,v)}this.h=new o(1),this.j={lineNumber:0,value:""},this.y()}normalizeEOL(n){const a=j,i=a-Math.floor(a/3),l=i*2;let c="",w=0;const v=[];if(this.iterate(this.root,P=>{const O=this.R(P),f=O.length;if(w<=i||w+f<l)return c+=O,w+=f,!0;const I=c.replace(/\r\n|\r|\n/g,n);return v.push(new R(I,b(I))),c=O,w=f,!0}),w>0){const P=c.replace(/\r\n|\r|\n/g,n);v.push(new R(P,b(P)))}this.create(v,n,!0)}getEOL(){return this.d}setEOL(n){this.d=n,this.e=this.d.length,this.normalizeEOL(n)}createSnapshot(n){return new m(this,n)}equal(n){if(this.getLength()!==n.getLength()||this.getLineCount()!==n.getLineCount())return!1;let a=0;return this.iterate(this.root,l=>{if(l===N.SENTINEL)return!0;const c=this.R(l),w=c.length,v=n.G(a),P=n.G(a+w),O=n.getValueInRange2(v,P);return a+=w,c===O})}getOffsetAt(n,a){let i=0,l=this.root;for(;l!==N.SENTINEL;)if(l.left!==N.SENTINEL&&l.lf_left+1>=n)l=l.left;else if(l.lf_left+l.piece.lineFeedCnt+1>=n){i+=l.size_left;const c=this.B(l,n-l.lf_left-2);return i+=c+a-1}else n-=l.lf_left+l.piece.lineFeedCnt,i+=l.size_left+l.piece.length,l=l.right;return i}getPositionAt(n){n=Math.floor(n),n=Math.max(0,n);let a=this.root,i=0;const l=n;for(;a!==N.SENTINEL;)if(a.size_left!==0&&a.size_left>=n)a=a.left;else if(a.size_left+a.piece.length>=n){const c=this.A(a,n-a.size_left);if(i+=a.lf_left+c.index,c.index===0){const w=this.getOffsetAt(i+1,1),v=l-w;return new F.Position(i+1,v+1)}return new F.Position(i+1,c.remainder+1)}else if(n-=a.size_left+a.piece.length,i+=a.lf_left+a.piece.lineFeedCnt,a.right===N.SENTINEL){const c=this.getOffsetAt(i+1,1),w=l-n-c;return new F.Position(i+1,w+1)}else a=a.right;return new F.Position(1,1)}getValueInRange(n,a){if(n.startLineNumber===n.endLineNumber&&n.startColumn===n.endColumn)return"";const i=this.H(n.startLineNumber,n.startColumn),l=this.H(n.endLineNumber,n.endColumn),c=this.getValueInRange2(i,l);return a?a!==this.d||!this.f?c.replace(/\r\n|\r|\n/g,a):a===this.getEOL()&&this.f?c:c.replace(/\r\n|\r|\n/g,a):c}getValueInRange2(n,a){if(n.node===a.node){const v=n.node,P=this.a[v.piece.bufferIndex].buffer,O=this.u(v.piece.bufferIndex,v.piece.start);return P.substring(O+n.remainder,O+a.remainder)}let i=n.node;const l=this.a[i.piece.bufferIndex].buffer,c=this.u(i.piece.bufferIndex,i.piece.start);let w=l.substring(c+n.remainder,c+i.piece.length);for(i=i.next();i!==N.SENTINEL;){const v=this.a[i.piece.bufferIndex].buffer,P=this.u(i.piece.bufferIndex,i.piece.start);if(i===a.node){w+=v.substring(P,P+a.remainder);break}else w+=v.substr(P,i.piece.length);i=i.next()}return w}getLinesContent(){const n=[];let a=0,i="",l=!1;return this.iterate(this.root,c=>{if(c===N.SENTINEL)return!0;const w=c.piece;let v=w.length;if(v===0)return!0;const P=this.a[w.bufferIndex].buffer,O=this.a[w.bufferIndex].lineStarts,f=w.start.line,I=w.end.line;let M=O[f]+w.start.column;if(l&&(P.charCodeAt(M)===10&&(M++,v--),n[a++]=i,i="",l=!1,v===0))return!0;if(f===I)return!this.f&&P.charCodeAt(M+v-1)===13?(l=!0,i+=P.substr(M,v-1)):i+=P.substr(M,v),!0;i+=this.f?P.substring(M,Math.max(M,O[f+1]-this.e)):P.substring(M,O[f+1]).replace(/(\r\n|\r|\n)$/,""),n[a++]=i;for(let y=f+1;y<I;y++)i=this.f?P.substring(O[y],O[y+1]-this.e):P.substring(O[y],O[y+1]).replace(/(\r\n|\r|\n)$/,""),n[a++]=i;return!this.f&&P.charCodeAt(O[I]+w.end.column-1)===13?(l=!0,w.end.column===0?a--:i=P.substr(O[I],w.end.column-1)):i=P.substr(O[I],w.end.column),!0}),l&&(n[a++]=i,i=""),n[a++]=i,n}getLength(){return this.c}getLineCount(){return this.b}getLineContent(n){return this.j.lineNumber===n?this.j.value:(this.j.lineNumber=n,n===this.b?this.j.value=this.getLineRawContent(n):this.f?this.j.value=this.getLineRawContent(n,this.e):this.j.value=this.getLineRawContent(n).replace(/(\r\n|\r|\n)$/,""),this.j.value)}l(n){if(n.remainder===n.node.piece.length){const a=n.node.next();if(!a)return 0;const i=this.a[a.piece.bufferIndex],l=this.u(a.piece.bufferIndex,a.piece.start);return i.buffer.charCodeAt(l)}else{const a=this.a[n.node.piece.bufferIndex],l=this.u(n.node.piece.bufferIndex,n.node.piece.start)+n.remainder;return a.buffer.charCodeAt(l)}}getLineCharCode(n,a){const i=this.H(n,a+1);return this.l(i)}getLineLength(n){if(n===this.getLineCount()){const a=this.getOffsetAt(n,1);return this.getLength()-a}return this.getOffsetAt(n+1,1)-this.getOffsetAt(n,1)-this.e}getCharCode(n){const a=this.G(n);return this.l(a)}findMatchesInNode(n,a,i,l,c,w,v,P,O,f,I){const M=this.a[n.piece.bufferIndex],y=this.u(n.piece.bufferIndex,n.piece.start),S=this.u(n.piece.bufferIndex,c),k=this.u(n.piece.bufferIndex,w);let G;const X={line:0,column:0};let Z,ee;a._wordSeparators?(Z=M.buffer.substring(S,k),ee=Y=>Y+S,a.reset(0)):(Z=M.buffer,ee=Y=>Y,a.reset(S));do if(G=a.next(Z),G){if(ee(G.index)>=k)return f;this.s(n,ee(G.index)-y,X);const Y=this.t(n.piece.bufferIndex,c,X),_=X.line===c.line?X.column-c.column+l:X.column+1,ae=_+G[0].length;if(I[f++]=(0,z.createFindMatch)(new B.Range(i+Y,_,i+Y,ae),G,P),ee(G.index)+G[0].length>=k||f>=O)return f}while(G);return f}findMatchesLineByLine(n,a,i,l){const c=[];let w=0;const v=new z.Searcher(a.wordSeparators,a.regex);let P=this.H(n.startLineNumber,n.startColumn);if(P===null)return[];const O=this.H(n.endLineNumber,n.endColumn);if(O===null)return[];let f=this.s(P.node,P.remainder);const I=this.s(O.node,O.remainder);if(P.node===O.node)return this.findMatchesInNode(P.node,v,n.startLineNumber,n.startColumn,f,I,a,i,l,w,c),c;let M=n.startLineNumber,y=P.node;for(;y!==O.node;){const k=this.t(y.piece.bufferIndex,f,y.piece.end);if(k>=1){const X=this.a[y.piece.bufferIndex].lineStarts,Z=this.u(y.piece.bufferIndex,y.piece.start),ee=X[f.line+k],Y=M===n.startLineNumber?n.startColumn:1;if(w=this.findMatchesInNode(y,v,M,Y,f,this.s(y,ee-Z),a,i,l,w,c),w>=l)return c;M+=k}const G=M===n.startLineNumber?n.startColumn-1:0;if(M===n.endLineNumber){const X=this.getLineContent(M).substring(G,n.endColumn-1);return w=this.n(a,v,X,n.endLineNumber,G,w,c,i,l),c}if(w=this.n(a,v,this.getLineContent(M).substr(G),M,G,w,c,i,l),w>=l)return c;M++,P=this.H(M,1),y=P.node,f=this.s(P.node,P.remainder)}if(M===n.endLineNumber){const k=M===n.startLineNumber?n.startColumn-1:0,G=this.getLineContent(M).substring(k,n.endColumn-1);return w=this.n(a,v,G,n.endLineNumber,k,w,c,i,l),c}const S=M===n.startLineNumber?n.startColumn:1;return w=this.findMatchesInNode(O.node,v,M,S,f,I,a,i,l,w,c),c}n(n,a,i,l,c,w,v,P,O){const f=n.wordSeparators;if(!P&&n.simpleSearch){const M=n.simpleSearch,y=M.length,S=i.length;let k=-y;for(;(k=i.indexOf(M,k+y))!==-1;)if((!f||(0,z.isValidMatch)(f,i,S,k,y))&&(v[w++]=new U.FindMatch(new B.Range(l,k+1+c,l,k+1+y+c),null),w>=O))return w;return w}let I;a.reset(0);do if(I=a.next(i),I&&(v[w++]=(0,z.createFindMatch)(new B.Range(l,I.index+1+c,l,I.index+1+I[0].length+c),I,P),w>=O))return w;while(I);return w}insert(n,a,i=!1){if(this.f=this.f&&i,this.j.lineNumber=0,this.j.value="",this.root!==N.SENTINEL){const{node:l,remainder:c,nodeStartOffset:w}=this.G(n),v=l.piece,P=v.bufferIndex,O=this.s(l,c);if(l.piece.bufferIndex===0&&v.end.line===this.g.line&&v.end.column===this.g.column&&w+v.length===n&&a.length<j){this.F(l,a),this.y();return}if(w===n)this.o(a,l),this.h.validate(n);else if(w+l.piece.length>n){const f=[];let I=new p(v.bufferIndex,O,v.end,this.t(v.bufferIndex,O,v.end),this.u(P,v.end)-this.u(P,O));if(this.K()&&this.M(a)&&this.I(l,c)===10){const k={line:I.start.line+1,column:0};I=new p(I.bufferIndex,k,I.end,this.t(I.bufferIndex,k,I.end),I.length-1),a+=`
`}if(this.K()&&this.L(a))if(this.I(l,c-1)===13){const k=this.s(l,c-1);this.C(l,k),a="\r"+a,l.piece.length===0&&f.push(l)}else this.C(l,O);else this.C(l,O);const M=this.w(a);I.length>0&&this.S(l,I);let y=l;for(let S=0;S<M.length;S++)y=this.S(y,M[S]);this.v(f)}else this.q(a,l)}else{const l=this.w(a);let c=this.T(null,l[0]);for(let w=1;w<l.length;w++)c=this.S(c,l[w])}this.y()}delete(n,a){if(this.j.lineNumber=0,this.j.value="",a<=0||this.root===N.SENTINEL)return;const i=this.G(n),l=this.G(n+a),c=i.node,w=l.node;if(c===w){const M=this.s(c,i.remainder),y=this.s(c,l.remainder);if(i.nodeStartOffset===n){if(a===c.piece.length){const S=c.next();(0,N.rbDelete)(this,c),this.N(S),this.y();return}this.D(c,y),this.h.validate(n),this.N(c),this.y();return}if(i.nodeStartOffset+c.piece.length===n+a){this.C(c,M),this.O(c),this.y();return}this.E(c,M,y),this.y();return}const v=[],P=this.s(c,i.remainder);this.C(c,P),this.h.validate(n),c.piece.length===0&&v.push(c);const O=this.s(w,l.remainder);this.D(w,O),w.piece.length===0&&v.push(w);const f=c.next();for(let M=f;M!==N.SENTINEL&&M!==w;M=M.next())v.push(M);const I=c.piece.length===0?c.prev():c;this.v(v),this.O(I),this.y()}o(n,a){const i=[];if(this.K()&&this.M(n)&&this.L(a)){const w=a.piece,v={line:w.start.line+1,column:0},P=new p(w.bufferIndex,v,w.end,this.t(w.bufferIndex,v,w.end),w.length-1);a.piece=P,n+=`
`,(0,N.updateTreeMetadata)(this,a,-1,-1),a.piece.length===0&&i.push(a)}const l=this.w(n);let c=this.T(a,l[l.length-1]);for(let w=l.length-2;w>=0;w--)c=this.T(c,l[w]);this.N(c),this.v(i)}q(n,a){this.Q(n,a)&&(n+=`
`);const i=this.w(n),l=this.S(a,i[0]);let c=l;for(let w=1;w<i.length;w++)c=this.S(c,i[w]);this.N(l)}s(n,a,i){const l=n.piece,c=n.piece.bufferIndex,w=this.a[c].lineStarts,P=w[l.start.line]+l.start.column+a;let O=l.start.line,f=l.end.line,I=0,M=0,y=0;for(;O<=f&&(I=O+(f-O)/2|0,y=w[I],I!==f);)if(M=w[I+1],P<y)f=I-1;else if(P>=M)O=I+1;else break;return i?(i.line=I,i.column=P-y,null):{line:I,column:P-y}}t(n,a,i){if(i.column===0)return i.line-a.line;const l=this.a[n].lineStarts;if(i.line===l.length-1)return i.line-a.line;const c=l[i.line+1],w=l[i.line]+i.column;if(c>w+1)return i.line-a.line;const v=w-1;return this.a[n].buffer.charCodeAt(v)===13?i.line-a.line+1:i.line-a.line}u(n,a){return this.a[n].lineStarts[a.line]+a.column}v(n){for(let a=0;a<n.length;a++)(0,N.rbDelete)(this,n[a])}w(n){if(n.length>j){const f=[];for(;n.length>j;){const M=n.charCodeAt(j-1);let y;M===13||M>=55296&&M<=56319?(y=n.substring(0,j-1),n=n.substring(j-1)):(y=n.substring(0,j),n=n.substring(j));const S=b(y);f.push(new p(this.a.length,{line:0,column:0},{line:S.length-1,column:y.length-S[S.length-1]},S.length-1,y.length)),this.a.push(new R(y,S))}const I=b(n);return f.push(new p(this.a.length,{line:0,column:0},{line:I.length-1,column:n.length-I[I.length-1]},I.length-1,n.length)),this.a.push(new R(n,I)),f}let a=this.a[0].buffer.length;const i=b(n,!1);let l=this.g;if(this.a[0].lineStarts[this.a[0].lineStarts.length-1]===a&&a!==0&&this.L(n)&&this.M(this.a[0].buffer)){this.g={line:this.g.line,column:this.g.column+1},l=this.g;for(let f=0;f<i.length;f++)i[f]+=a+1;this.a[0].lineStarts=this.a[0].lineStarts.concat(i.slice(1)),this.a[0].buffer+="_"+n,a+=1}else{if(a!==0)for(let f=0;f<i.length;f++)i[f]+=a;this.a[0].lineStarts=this.a[0].lineStarts.concat(i.slice(1)),this.a[0].buffer+=n}const c=this.a[0].buffer.length,w=this.a[0].lineStarts.length-1,v=c-this.a[0].lineStarts[w],P={line:w,column:v},O=new p(0,l,P,this.t(0,l,P),c-a);return this.g=P,[O]}getLinesRawContent(){return this.U(this.root)}getLineRawContent(n,a=0){let i=this.root,l="";const c=this.h.get2(n);if(c){i=c.node;const w=this.B(i,n-c.nodeStartLineNumber-1),v=this.a[i.piece.bufferIndex].buffer,P=this.u(i.piece.bufferIndex,i.piece.start);if(c.nodeStartLineNumber+i.piece.lineFeedCnt===n)l=v.substring(P+w,P+i.piece.length);else{const O=this.B(i,n-c.nodeStartLineNumber);return v.substring(P+w,P+O-a)}}else{let w=0;const v=n;for(;i!==N.SENTINEL;)if(i.left!==N.SENTINEL&&i.lf_left>=n-1)i=i.left;else if(i.lf_left+i.piece.lineFeedCnt>n-1){const P=this.B(i,n-i.lf_left-2),O=this.B(i,n-i.lf_left-1),f=this.a[i.piece.bufferIndex].buffer,I=this.u(i.piece.bufferIndex,i.piece.start);return w+=i.size_left,this.h.set({node:i,nodeStartOffset:w,nodeStartLineNumber:v-(n-1-i.lf_left)}),f.substring(I+P,I+O-a)}else if(i.lf_left+i.piece.lineFeedCnt===n-1){const P=this.B(i,n-i.lf_left-2),O=this.a[i.piece.bufferIndex].buffer,f=this.u(i.piece.bufferIndex,i.piece.start);l=O.substring(f+P,f+i.piece.length);break}else n-=i.lf_left+i.piece.lineFeedCnt,w+=i.size_left+i.piece.length,i=i.right}for(i=i.next();i!==N.SENTINEL;){const w=this.a[i.piece.bufferIndex].buffer;if(i.piece.lineFeedCnt>0){const v=this.B(i,0),P=this.u(i.piece.bufferIndex,i.piece.start);return l+=w.substring(P,P+v-a),l}else{const v=this.u(i.piece.bufferIndex,i.piece.start);l+=w.substr(v,i.piece.length)}i=i.next()}return l}y(){let n=this.root,a=1,i=0;for(;n!==N.SENTINEL;)a+=n.lf_left+n.piece.lineFeedCnt,i+=n.size_left+n.piece.length,n=n.right;this.b=a,this.c=i,this.h.validate(this.c)}A(n,a){const i=n.piece,l=this.s(n,a),c=l.line-i.start.line;if(this.u(i.bufferIndex,i.end)-this.u(i.bufferIndex,i.start)===a){const w=this.t(n.piece.bufferIndex,i.start,l);if(w!==c)return{index:w,remainder:0}}return{index:c,remainder:l.column}}B(n,a){if(a<0)return 0;const i=n.piece,l=this.a[i.bufferIndex].lineStarts,c=i.start.line+a+1;return c>i.end.line?l[i.end.line]+i.end.column-l[i.start.line]-i.start.column:l[c]-l[i.start.line]-i.start.column}C(n,a){const i=n.piece,l=i.lineFeedCnt,c=this.u(i.bufferIndex,i.end),w=a,v=this.u(i.bufferIndex,w),P=this.t(i.bufferIndex,i.start,w),O=P-l,f=v-c,I=i.length+f;n.piece=new p(i.bufferIndex,i.start,w,P,I),(0,N.updateTreeMetadata)(this,n,f,O)}D(n,a){const i=n.piece,l=i.lineFeedCnt,c=this.u(i.bufferIndex,i.start),w=a,v=this.t(i.bufferIndex,w,i.end),P=this.u(i.bufferIndex,w),O=v-l,f=c-P,I=i.length+f;n.piece=new p(i.bufferIndex,w,i.end,v,I),(0,N.updateTreeMetadata)(this,n,f,O)}E(n,a,i){const l=n.piece,c=l.start,w=l.end,v=l.length,P=l.lineFeedCnt,O=a,f=this.t(l.bufferIndex,l.start,O),I=this.u(l.bufferIndex,a)-this.u(l.bufferIndex,c);n.piece=new p(l.bufferIndex,l.start,O,f,I),(0,N.updateTreeMetadata)(this,n,I-v,f-P);const M=new p(l.bufferIndex,i,w,this.t(l.bufferIndex,i,w),this.u(l.bufferIndex,w)-this.u(l.bufferIndex,i)),y=this.S(n,M);this.N(y)}F(n,a){this.Q(a,n)&&(a+=`
`);const i=this.K()&&this.L(a)&&this.M(n),l=this.a[0].buffer.length;this.a[0].buffer+=a;const c=b(a,!1);for(let y=0;y<c.length;y++)c[y]+=l;if(i){const y=this.a[0].lineStarts[this.a[0].lineStarts.length-2];this.a[0].lineStarts.pop(),this.g={line:this.g.line-1,column:l-y}}this.a[0].lineStarts=this.a[0].lineStarts.concat(c.slice(1));const w=this.a[0].lineStarts.length-1,v=this.a[0].buffer.length-this.a[0].lineStarts[w],P={line:w,column:v},O=n.piece.length+a.length,f=n.piece.lineFeedCnt,I=this.t(0,n.piece.start,P),M=I-f;n.piece=new p(n.piece.bufferIndex,n.piece.start,P,I,O),this.g=P,(0,N.updateTreeMetadata)(this,n,a.length,M)}G(n){let a=this.root;const i=this.h.get(n);if(i)return{node:i.node,nodeStartOffset:i.nodeStartOffset,remainder:n-i.nodeStartOffset};let l=0;for(;a!==N.SENTINEL;)if(a.size_left>n)a=a.left;else if(a.size_left+a.piece.length>=n){l+=a.size_left;const c={node:a,remainder:n-a.size_left,nodeStartOffset:l};return this.h.set(c),c}else n-=a.size_left+a.piece.length,l+=a.size_left+a.piece.length,a=a.right;return null}H(n,a){let i=this.root,l=0;for(;i!==N.SENTINEL;)if(i.left!==N.SENTINEL&&i.lf_left>=n-1)i=i.left;else if(i.lf_left+i.piece.lineFeedCnt>n-1){const c=this.B(i,n-i.lf_left-2),w=this.B(i,n-i.lf_left-1);return l+=i.size_left,{node:i,remainder:Math.min(c+a-1,w),nodeStartOffset:l}}else if(i.lf_left+i.piece.lineFeedCnt===n-1){const c=this.B(i,n-i.lf_left-2);if(c+a-1<=i.piece.length)return{node:i,remainder:c+a-1,nodeStartOffset:l};a-=i.piece.length-c;break}else n-=i.lf_left+i.piece.lineFeedCnt,l+=i.size_left+i.piece.length,i=i.right;for(i=i.next();i!==N.SENTINEL;){if(i.piece.lineFeedCnt>0){const c=this.B(i,0),w=this.J(i);return{node:i,remainder:Math.min(a-1,c),nodeStartOffset:w}}else if(i.piece.length>=a-1){const c=this.J(i);return{node:i,remainder:a-1,nodeStartOffset:c}}else a-=i.piece.length;i=i.next()}return null}I(n,a){if(n.piece.lineFeedCnt<1)return-1;const i=this.a[n.piece.bufferIndex],l=this.u(n.piece.bufferIndex,n.piece.start)+a;return i.buffer.charCodeAt(l)}J(n){if(!n)return 0;let a=n.size_left;for(;n!==this.root;)n.parent.right===n&&(a+=n.parent.size_left+n.parent.piece.length),n=n.parent;return a}K(){return!(this.f&&this.d===`
`)}L(n){if(typeof n=="string")return n.charCodeAt(0)===10;if(n===N.SENTINEL||n.piece.lineFeedCnt===0)return!1;const a=n.piece,i=this.a[a.bufferIndex].lineStarts,l=a.start.line,c=i[l]+a.start.column;return l===i.length-1||i[l+1]>c+1?!1:this.a[a.bufferIndex].buffer.charCodeAt(c)===10}M(n){return typeof n=="string"?n.charCodeAt(n.length-1)===13:n===N.SENTINEL||n.piece.lineFeedCnt===0?!1:this.I(n,n.piece.length-1)===13}N(n){if(this.K()&&this.L(n)){const a=n.prev();this.M(a)&&this.P(a,n)}}O(n){if(this.K()&&this.M(n)){const a=n.next();this.L(a)&&this.P(n,a)}}P(n,a){const i=[],l=this.a[n.piece.bufferIndex].lineStarts;let c;n.piece.end.column===0?c={line:n.piece.end.line-1,column:l[n.piece.end.line]-l[n.piece.end.line-1]-1}:c={line:n.piece.end.line,column:n.piece.end.column-1};const w=n.piece.length-1,v=n.piece.lineFeedCnt-1;n.piece=new p(n.piece.bufferIndex,n.piece.start,c,v,w),(0,N.updateTreeMetadata)(this,n,-1,-1),n.piece.length===0&&i.push(n);const P={line:a.piece.start.line+1,column:0},O=a.piece.length-1,f=this.t(a.piece.bufferIndex,P,a.piece.end);a.piece=new p(a.piece.bufferIndex,P,a.piece.end,f,O),(0,N.updateTreeMetadata)(this,a,-1,-1),a.piece.length===0&&i.push(a);const I=this.w(`\r
`);this.S(n,I[0]);for(let M=0;M<i.length;M++)(0,N.rbDelete)(this,i[M])}Q(n,a){if(this.K()&&this.M(n)){const i=a.next();if(this.L(i)){if(n+=`
`,i.piece.length===1)(0,N.rbDelete)(this,i);else{const l=i.piece,c={line:l.start.line+1,column:0},w=l.length-1,v=this.t(l.bufferIndex,c,l.end);i.piece=new p(l.bufferIndex,c,l.end,v,w),(0,N.updateTreeMetadata)(this,i,-1,-1)}return!0}}return!1}iterate(n,a){if(n===N.SENTINEL)return a(N.SENTINEL);const i=this.iterate(n.left,a);return i&&a(n)&&this.iterate(n.right,a)}R(n){if(n===N.SENTINEL)return"";const a=this.a[n.piece.bufferIndex],i=n.piece,l=this.u(i.bufferIndex,i.start),c=this.u(i.bufferIndex,i.end);return a.buffer.substring(l,c)}getPieceContent(n){const a=this.a[n.bufferIndex],i=this.u(n.bufferIndex,n.start),l=this.u(n.bufferIndex,n.end);return a.buffer.substring(i,l)}S(n,a){const i=new N.TreeNode(a,1);if(i.left=N.SENTINEL,i.right=N.SENTINEL,i.parent=N.SENTINEL,i.size_left=0,i.lf_left=0,this.root===N.SENTINEL)this.root=i,i.color=0;else if(n.right===N.SENTINEL)n.right=i,i.parent=n;else{const c=(0,N.leftest)(n.right);c.left=i,i.parent=c}return(0,N.fixInsert)(this,i),i}T(n,a){const i=new N.TreeNode(a,1);if(i.left=N.SENTINEL,i.right=N.SENTINEL,i.parent=N.SENTINEL,i.size_left=0,i.lf_left=0,this.root===N.SENTINEL)this.root=i,i.color=0;else if(n.left===N.SENTINEL)n.left=i,i.parent=n;else{const l=(0,N.righttest)(n.left);l.right=i,i.parent=l}return(0,N.fixInsert)(this,i),i}U(n){let a="";return this.iterate(n,i=>(a+=this.R(i),!0)),a}}t.PieceTreeBase=s}),define(se[26],re([0,1,21,3,12,25,11,16,24,7]),function(ne,t,F,B,U,N,z,j,C,h){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PieceTreeTextBuffer=void 0;class b extends h.Disposable{constructor(p,R,m,o,s,u,n){super(),this.k=this.B(new F.Emitter),this.onDidChangeContent=this.k.event,this.f=R,this.j=!u,this.g=o,this.h=s,this.c=new z.PieceTreeBase(p,m,n)}equals(p){return!(p instanceof b)||this.f!==p.f||this.getEOL()!==p.getEOL()?!1:this.c.equal(p.c)}mightContainRTL(){return this.g}mightContainUnusualLineTerminators(){return this.h}resetMightContainUnusualLineTerminators(){this.h=!1}mightContainNonBasicASCII(){return this.j}getBOM(){return this.f}getEOL(){return this.c.getEOL()}createSnapshot(p){return this.c.createSnapshot(p?this.f:"")}getOffsetAt(p,R){return this.c.getOffsetAt(p,R)}getPositionAt(p){return this.c.getPositionAt(p)}getRangeAt(p,R){const m=p+R,o=this.getPositionAt(p),s=this.getPositionAt(m);return new U.Range(o.lineNumber,o.column,s.lineNumber,s.column)}getValueInRange(p,R=0){if(p.isEmpty())return"";const m=this.l(R);return this.c.getValueInRange(p,m)}getValueLengthInRange(p,R=0){if(p.isEmpty())return 0;if(p.startLineNumber===p.endLineNumber)return p.endColumn-p.startColumn;const m=this.getOffsetAt(p.startLineNumber,p.startColumn),o=this.getOffsetAt(p.endLineNumber,p.endColumn);let s=0;const u=this.l(R),n=this.getEOL();if(u.length!==n.length){const a=u.length-n.length,i=p.endLineNumber-p.startLineNumber;s=a*i}return o-m+s}getCharacterCountInRange(p,R=0){if(this.j){let m=0;const o=p.startLineNumber,s=p.endLineNumber;for(let u=o;u<=s;u++){const n=this.getLineContent(u),a=u===o?p.startColumn-1:0,i=u===s?p.endColumn-1:n.length;for(let l=a;l<i;l++)B.isHighSurrogate(n.charCodeAt(l))?(m=m+1,l=l+1):m=m+1}return m+=this.l(R).length*(s-o),m}return this.getValueLengthInRange(p,R)}getLength(){return this.c.getLength()}getLineCount(){return this.c.getLineCount()}getLinesContent(){return this.c.getLinesContent()}getLineContent(p){return this.c.getLineContent(p)}getLineCharCode(p,R){return this.c.getLineCharCode(p,R)}getCharCode(p){return this.c.getCharCode(p)}getLineLength(p){return this.c.getLineLength(p)}getLineMinColumn(p){return 1}getLineMaxColumn(p){return this.getLineLength(p)+1}getLineFirstNonWhitespaceColumn(p){const R=B.firstNonWhitespaceIndex(this.getLineContent(p));return R===-1?0:R+1}getLineLastNonWhitespaceColumn(p){const R=B.lastNonWhitespaceIndex(this.getLineContent(p));return R===-1?0:R+2}l(p){switch(p){case 1:return`
`;case 2:return`\r
`;case 0:return this.getEOL();default:throw new Error("Unknown EOL preference")}}setEOL(p){this.c.setEOL(p)}applyEdits(p,R,m){let o=this.g,s=this.h,u=this.j,n=!0,a=[];for(let O=0;O<p.length;O++){const f=p[O];n&&f._isTracked&&(n=!1);const I=f.range;if(f.text){let G=!0;u||(G=!B.isBasicASCII(f.text),u=G),!o&&G&&(o=B.containsRTL(f.text)),!s&&G&&(s=B.containsUnusualLineTerminators(f.text))}let M="",y=0,S=0,k=0;if(f.text){let G;[y,S,k,G]=(0,j.countEOL)(f.text);const X=this.getEOL();G===0||G===(X===`\r
`?2:1)?M=f.text:M=f.text.replace(/\r\n|\r|\n/g,X)}a[O]={sortIndex:O,identifier:f.identifier||null,range:I,rangeOffset:this.getOffsetAt(I.startLineNumber,I.startColumn),rangeLength:this.getValueLengthInRange(I),text:M,eolCount:y,firstLineLength:S,lastLineLength:k,forceMoveMarkers:!!f.forceMoveMarkers,isAutoWhitespaceEdit:f.isAutoWhitespaceEdit||!1}}a.sort(b.p);let i=!1;for(let O=0,f=a.length-1;O<f;O++){const I=a[O].range.getEndPosition(),M=a[O+1].range.getStartPosition();if(M.isBeforeOrEqual(I)){if(M.isBefore(I))throw new Error("Overlapping ranges are not allowed!");i=!0}}n&&(a=this.m(a));const l=m||R?b._getInverseEditRanges(a):[],c=[];if(R)for(let O=0;O<a.length;O++){const f=a[O],I=l[O];if(f.isAutoWhitespaceEdit&&f.range.isEmpty())for(let M=I.startLineNumber;M<=I.endLineNumber;M++){let y="";M===I.startLineNumber&&(y=this.getLineContent(f.range.startLineNumber),B.firstNonWhitespaceIndex(y)!==-1)||c.push({lineNumber:M,oldContent:y})}}let w=null;if(m){let O=0;w=[];for(let f=0;f<a.length;f++){const I=a[f],M=l[f],y=this.getValueInRange(I.range),S=I.rangeOffset+O;O+=I.text.length-y.length,w[f]={sortIndex:I.sortIndex,identifier:I.identifier,range:M,text:y,textChange:new C.TextChange(I.rangeOffset,y,S,I.text)}}i||w.sort((f,I)=>f.sortIndex-I.sortIndex)}this.g=o,this.h=s,this.j=u;const v=this.n(a);let P=null;if(R&&c.length>0){c.sort((O,f)=>f.lineNumber-O.lineNumber),P=[];for(let O=0,f=c.length;O<f;O++){const I=c[O].lineNumber;if(O>0&&c[O-1].lineNumber===I)continue;const M=c[O].oldContent,y=this.getLineContent(I);y.length===0||y===M||B.firstNonWhitespaceIndex(y)!==-1||P.push(I)}}return this.k.fire(),new N.ApplyEditsResult(w,v,P)}m(p){return p.length<1e3?p:[this._toSingleEditOperation(p)]}_toSingleEditOperation(p){let R=!1;const m=p[0].range,o=p[p.length-1].range,s=new U.Range(m.startLineNumber,m.startColumn,o.endLineNumber,o.endColumn);let u=m.startLineNumber,n=m.startColumn;const a=[];for(let v=0,P=p.length;v<P;v++){const O=p[v],f=O.range;R=R||O.forceMoveMarkers,a.push(this.getValueInRange(new U.Range(u,n,f.startLineNumber,f.startColumn))),O.text.length>0&&a.push(O.text),u=f.endLineNumber,n=f.endColumn}const i=a.join(""),[l,c,w]=(0,j.countEOL)(i);return{sortIndex:0,identifier:p[0].identifier,range:s,rangeOffset:this.getOffsetAt(s.startLineNumber,s.startColumn),rangeLength:this.getValueLengthInRange(s,0),text:i,eolCount:l,firstLineLength:c,lastLineLength:w,forceMoveMarkers:R,isAutoWhitespaceEdit:!1}}n(p){p.sort(b.s);const R=[];for(let m=0;m<p.length;m++){const o=p[m],s=o.range.startLineNumber,u=o.range.startColumn,n=o.range.endLineNumber,a=o.range.endColumn;if(s===n&&u===a&&o.text.length===0)continue;o.text?(this.c.delete(o.rangeOffset,o.rangeLength),this.c.insert(o.rangeOffset,o.text,!0)):this.c.delete(o.rangeOffset,o.rangeLength);const i=new U.Range(s,u,n,a);R.push({range:i,rangeLength:o.rangeLength,text:o.text,rangeOffset:o.rangeOffset,forceMoveMarkers:o.forceMoveMarkers})}return R}findMatchesLineByLine(p,R,m,o){return this.c.findMatchesLineByLine(p,R,m,o)}getPieceTree(){return this.c}static _getInverseEditRange(p,R){const m=p.startLineNumber,o=p.startColumn,[s,u,n]=(0,j.countEOL)(R);let a;if(R.length>0){const i=s+1;i===1?a=new U.Range(m,o,m,o+u):a=new U.Range(m,o,m+i-1,n+1)}else a=new U.Range(m,o,m,o);return a}static _getInverseEditRanges(p){const R=[];let m=0,o=0,s=null;for(let u=0,n=p.length;u<n;u++){const a=p[u];let i,l;s?s.range.endLineNumber===a.range.startLineNumber?(i=m,l=o+(a.range.startColumn-s.range.endColumn)):(i=m+(a.range.startLineNumber-s.range.endLineNumber),l=a.range.startColumn):(i=a.range.startLineNumber,l=a.range.startColumn);let c;if(a.text.length>0){const w=a.eolCount+1;w===1?c=new U.Range(i,l,i,l+a.firstLineLength):c=new U.Range(i,l,i+w-1,a.lastLineLength+1)}else c=new U.Range(i,l,i,l);m=c.endLineNumber,o=c.endColumn,R.push(c),s=a}return R}static p(p,R){const m=U.Range.compareRangesUsingEnds(p.range,R.range);return m===0?p.sortIndex-R.sortIndex:m}static s(p,R){const m=U.Range.compareRangesUsingEnds(p.range,R.range);return m===0?R.sortIndex-p.sortIndex:-m}}t.PieceTreeTextBuffer=b}),define(se[27],re([0,1,3,11,26]),function(ne,t,F,B,U){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PieceTreeTextBufferBuilder=void 0;class N{constructor(C,h,b,A,p,R,m,o,s){this.a=C,this.b=h,this.c=b,this.d=A,this.e=p,this.f=R,this.g=m,this.h=o,this.j=s}k(C){const h=this.c+this.d+this.e,b=this.c+this.e;return h===0?C===1?`
`:`\r
`:b>h/2?`\r
`:`
`}create(C){const h=this.k(C),b=this.a;if(this.j&&(h===`\r
`&&(this.c>0||this.d>0)||h===`
`&&(this.c>0||this.e>0)))for(let p=0,R=b.length;p<R;p++){const m=b[p].buffer.replace(/\r\n|\r|\n/g,h),o=(0,B.createLineStartsFast)(m);b[p]=new B.StringBuffer(m,o)}const A=new U.PieceTreeTextBuffer(b,this.b,h,this.f,this.g,this.h,this.j);return{textBuffer:A,disposable:A}}getFirstLineText(C){return this.a[0].buffer.substr(0,C).split(/\r\n|\r|\n/)[0]}}class z{constructor(){this.a=[],this.b="",this.c=!1,this.d=0,this.e=[],this.f=0,this.g=0,this.h=0,this.j=!1,this.k=!1,this.l=!0}acceptChunk(C){if(C.length===0)return;this.a.length===0&&F.startsWithUTF8BOM(C)&&(this.b=F.UTF8_BOM_CHARACTER,C=C.substr(1));const h=C.charCodeAt(C.length-1);h===13||h>=55296&&h<=56319?(this.m(C.substr(0,C.length-1),!1),this.c=!0,this.d=h):(this.m(C,!1),this.c=!1,this.d=h)}m(C,h){!h&&C.length===0||(this.c?this.n(String.fromCharCode(this.d)+C):this.n(C))}n(C){const h=(0,B.createLineStarts)(this.e,C);this.a.push(new B.StringBuffer(C,h.lineStarts)),this.f+=h.cr,this.g+=h.lf,this.h+=h.crlf,h.isBasicASCII||(this.l=!1,this.j||(this.j=F.containsRTL(C)),this.k||(this.k=F.containsUnusualLineTerminators(C)))}finish(C=!0){return this.o(),new N(this.a,this.b,this.f,this.g,this.h,this.j,this.k,this.l,C)}o(){if(this.a.length===0&&this.m("",!0),this.c){this.c=!1;const C=this.a[this.a.length-1];C.buffer+=String.fromCharCode(this.d);const h=(0,B.createLineStartsFast)(C.buffer);C.lineStarts=h,this.d===13&&this.f++}}}t.PieceTreeTextBufferBuilder=z}),define(se[28],re([29,30]),function(ne,t){return ne.create("vs/platform/contextkey/common/contextkey",t)}),define(se[31],re([29,30]),function(ne,t){return ne.create("vs/platform/contextkey/common/scanner",t)}),define(se[32],re([0,1,4,31]),function(ne,t,F,B){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Scanner=t.TokenType=void 0;var U;(function(h){h[h.LParen=0]="LParen",h[h.RParen=1]="RParen",h[h.Neg=2]="Neg",h[h.Eq=3]="Eq",h[h.NotEq=4]="NotEq",h[h.Lt=5]="Lt",h[h.LtEq=6]="LtEq",h[h.Gt=7]="Gt",h[h.GtEq=8]="GtEq",h[h.RegexOp=9]="RegexOp",h[h.RegexStr=10]="RegexStr",h[h.True=11]="True",h[h.False=12]="False",h[h.In=13]="In",h[h.Not=14]="Not",h[h.And=15]="And",h[h.Or=16]="Or",h[h.Str=17]="Str",h[h.QuotedStr=18]="QuotedStr",h[h.Error=19]="Error",h[h.EOF=20]="EOF"})(U||(t.TokenType=U={}));function N(...h){switch(h.length){case 1:return(0,B.localize)(0,null,h[0]);case 2:return(0,B.localize)(1,null,h[0],h[1]);case 3:return(0,B.localize)(2,null,h[0],h[1],h[2]);default:return}}const z=(0,B.localize)(3,null),j=(0,B.localize)(4,null);class C{constructor(){this.c="",this.d=0,this.e=0,this.f=[],this.g=[],this.m=/[a-zA-Z0-9_<>\-\./\\:\*\?\+\[\]\^,#@;"%\$\p{L}-]+/uy}static getLexeme(b){switch(b.type){case 0:return"(";case 1:return")";case 2:return"!";case 3:return b.isTripleEq?"===":"==";case 4:return b.isTripleEq?"!==":"!=";case 5:return"<";case 6:return"<=";case 7:return">=";case 8:return">=";case 9:return"=~";case 10:return b.lexeme;case 11:return"true";case 12:return"false";case 13:return"in";case 14:return"not";case 15:return"&&";case 16:return"||";case 17:return b.lexeme;case 18:return b.lexeme;case 19:return b.lexeme;case 20:return"EOF";default:throw(0,F.illegalState)(`unhandled token type: ${JSON.stringify(b)}; have you forgotten to add a case?`)}}get errors(){return this.g}reset(b){return this.c=b,this.d=0,this.e=0,this.f=[],this.g=[],this}scan(){for(;!this.r();)switch(this.d=this.e,this.i()){case 40:this.k(0);break;case 41:this.k(1);break;case 33:if(this.h(61)){const A=this.h(61);this.f.push({type:4,offset:this.d,isTripleEq:A})}else this.k(2);break;case 39:this.o();break;case 47:this.q();break;case 61:if(this.h(61)){const A=this.h(61);this.f.push({type:3,offset:this.d,isTripleEq:A})}else this.h(126)?this.k(9):this.l(N("==","=~"));break;case 60:this.k(this.h(61)?6:5);break;case 62:this.k(this.h(61)?8:7);break;case 38:this.h(38)?this.k(15):this.l(N("&&"));break;case 124:this.h(124)?this.k(16):this.l(N("||"));break;case 32:case 13:case 9:case 10:case 160:break;default:this.n()}return this.d=this.e,this.k(20),Array.from(this.f)}h(b){return this.r()||this.c.charCodeAt(this.e)!==b?!1:(this.e++,!0)}i(){return this.c.charCodeAt(this.e++)}j(){return this.r()?0:this.c.charCodeAt(this.e)}k(b){this.f.push({type:b,offset:this.d})}l(b){const A=this.d,p=this.c.substring(this.d,this.e),R={type:19,offset:this.d,lexeme:p};this.g.push({offset:A,lexeme:p,additionalInfo:b}),this.f.push(R)}n(){this.m.lastIndex=this.d;const b=this.m.exec(this.c);if(b){this.e=this.d+b[0].length;const A=this.c.substring(this.d,this.e),p=C.b.get(A);p?this.k(p):this.f.push({type:17,lexeme:A,offset:this.d})}}o(){for(;this.j()!==39&&!this.r();)this.i();if(this.r()){this.l(z);return}this.i(),this.f.push({type:18,lexeme:this.c.substring(this.d+1,this.e-1),offset:this.d+1})}q(){let b=this.e,A=!1,p=!1;for(;;){if(b>=this.c.length){this.e=b,this.l(j);return}const m=this.c.charCodeAt(b);if(A)A=!1;else if(m===47&&!p){b++;break}else m===91?p=!0:m===92?A=!0:m===93&&(p=!1);b++}for(;b<this.c.length&&C.a.has(this.c.charCodeAt(b));)b++;this.e=b;const R=this.c.substring(this.d,this.e);this.f.push({type:10,lexeme:R,offset:this.d})}r(){return this.e>=this.c.length}}t.Scanner=C,C.a=new Set(["i","g","s","m","y","u"].map(h=>h.charCodeAt(0))),C.b=new Map([["not",14],["in",13],["false",12],["true",11]])}),define(se[33],re([0,1]),function(ne,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.refineServiceDecorator=t.createDecorator=t.IInstantiationService=t._util=void 0;var F;(function(z){z.serviceIds=new Map,z.DI_TARGET="$di$target",z.DI_DEPENDENCIES="$di$dependencies";function j(C){return C[z.DI_DEPENDENCIES]||[]}z.getServiceDependencies=j})(F||(t._util=F={})),t.IInstantiationService=U("instantiationService");function B(z,j,C){j[F.DI_TARGET]===j?j[F.DI_DEPENDENCIES].push({id:z,index:C}):(j[F.DI_DEPENDENCIES]=[{id:z,index:C}],j[F.DI_TARGET]=j)}function U(z){if(F.serviceIds.has(z))return F.serviceIds.get(z);const j=function(C,h,b){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");B(j,C,b)};return j.toString=()=>z,F.serviceIds.set(z,j),j}t.createDecorator=U;function N(z){return z}t.refineServiceDecorator=N}),define(se[34],re([0,1,2,3,32,33,28,4]),function(ne,t,F,B,U,N,z,j){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.implies=t.IContextKeyService=t.RawContextKey=t.ContextKeyOrExpr=t.ContextKeyAndExpr=t.ContextKeyNotRegexExpr=t.ContextKeyRegexExpr=t.ContextKeySmallerEqualsExpr=t.ContextKeySmallerExpr=t.ContextKeyGreaterEqualsExpr=t.ContextKeyGreaterExpr=t.ContextKeyNotExpr=t.ContextKeyNotEqualsExpr=t.ContextKeyNotInExpr=t.ContextKeyInExpr=t.ContextKeyEqualsExpr=t.ContextKeyDefinedExpr=t.ContextKeyTrueExpr=t.ContextKeyFalseExpr=t.expressionsAreEqualWithConstantSubstitution=t.validateWhenClauses=t.ContextKeyExpr=t.Parser=t.ContextKeyExprType=t.setConstant=void 0;const C=new Map;C.set("false",!1),C.set("true",!0),C.set("isMac",F.isMacintosh),C.set("isLinux",F.isLinux),C.set("isWindows",F.isWindows),C.set("isWeb",F.isWeb),C.set("isMacNative",F.isMacintosh&&!F.isWeb),C.set("isEdge",F.isEdge),C.set("isFirefox",F.isFirefox),C.set("isChrome",F.isChrome),C.set("isSafari",F.isSafari);function h(d,e){if(C.get(d)!==void 0)throw(0,j.illegalArgument)("contextkey.setConstant(k, v) invoked with already set constant `k`");C.set(d,e)}t.setConstant=h;const b=Object.prototype.hasOwnProperty;var A;(function(d){d[d.False=0]="False",d[d.True=1]="True",d[d.Defined=2]="Defined",d[d.Not=3]="Not",d[d.Equals=4]="Equals",d[d.NotEquals=5]="NotEquals",d[d.And=6]="And",d[d.Regex=7]="Regex",d[d.NotRegex=8]="NotRegex",d[d.Or=9]="Or",d[d.In=10]="In",d[d.NotIn=11]="NotIn",d[d.Greater=12]="Greater",d[d.GreaterEquals=13]="GreaterEquals",d[d.Smaller=14]="Smaller",d[d.SmallerEquals=15]="SmallerEquals"})(A||(t.ContextKeyExprType=A={}));const p={regexParsingWithErrorRecovery:!0},R=(0,z.localize)(0,null),m=(0,z.localize)(1,null),o=(0,z.localize)(2,null),s=(0,z.localize)(3,null),u=(0,z.localize)(4,null),n=(0,z.localize)(5,null),a=(0,z.localize)(6,null),i=(0,z.localize)(7,null);class l{get lexingErrors(){return this.d.errors}get parsingErrors(){return this.h}constructor(e=p){this.k=e,this.d=new U.Scanner,this.f=[],this.g=0,this.h=[],this.v=/g|y/g}parse(e){if(e===""){this.h.push({message:R,offset:0,lexeme:"",additionalInfo:m});return}this.f=this.d.reset(e).scan(),this.g=0,this.h=[];try{const r=this.l();if(!this.E()){const g=this.D(),E=g.type===17?n:void 0;throw this.h.push({message:u,offset:g.offset,lexeme:U.Scanner.getLexeme(g),additionalInfo:E}),l.c}return r}catch(r){if(r!==l.c)throw r;return}}l(){return this.m()}m(){const e=[this.o()];for(;this.y(16);){const r=this.o();e.push(r)}return e.length===1?e[0]:c.or(...e)}o(){const e=[this.s()];for(;this.y(15);){const r=this.s();e.push(r)}return e.length===1?e[0]:c.and(...e)}s(){if(this.y(2)){const e=this.D();switch(e.type){case 11:return this.z(),O.INSTANCE;case 12:return this.z(),f.INSTANCE;case 0:{this.z();const r=this.l();return this.A(1,s),r?.negate()}case 17:return this.z(),G.create(e.lexeme);default:throw this.B("KEY | true | false | '(' expression ')'",e)}}return this.t()}t(){const e=this.D();switch(e.type){case 11:return this.z(),c.true();case 12:return this.z(),c.false();case 0:{this.z();const r=this.l();return this.A(1,s),r}case 17:{const r=e.lexeme;if(this.z(),this.y(9)){const E=this.D();if(!this.k.regexParsingWithErrorRecovery){if(this.z(),E.type!==10)throw this.B("REGEX",E);const W=E.lexeme,$=W.lastIndexOf("/"),J=$===W.length-1?void 0:this.w(W.substring($+1));let ie;try{ie=new RegExp(W.substring(1,$),J)}catch{throw this.B("REGEX",E)}return ae.create(r,ie)}switch(E.type){case 10:case 19:{const W=[E.lexeme];this.z();let $=this.D(),J=0;for(let le=0;le<E.lexeme.length;le++)E.lexeme.charCodeAt(le)===40?J++:E.lexeme.charCodeAt(le)===41&&J--;for(;!this.E()&&$.type!==15&&$.type!==16;){switch($.type){case 0:J++;break;case 1:J--;break;case 10:case 18:for(let le=0;le<$.lexeme.length;le++)$.lexeme.charCodeAt(le)===40?J++:E.lexeme.charCodeAt(le)===41&&J--}if(J<0)break;W.push(U.Scanner.getLexeme($)),this.z(),$=this.D()}const ie=W.join(""),oe=ie.lastIndexOf("/"),ue=oe===ie.length-1?void 0:this.w(ie.substring(oe+1));let ce;try{ce=new RegExp(ie.substring(1,oe),ue)}catch{throw this.B("REGEX",E)}return c.regex(r,ce)}case 18:{const W=E.lexeme;this.z();let $=null;if(!(0,B.isFalsyOrWhitespace)(W)){const J=W.indexOf("/"),ie=W.lastIndexOf("/");if(J!==ie&&J>=0){const oe=W.slice(J+1,ie),ue=W[ie+1]==="i"?"i":"";try{$=new RegExp(oe,ue)}catch{throw this.B("REGEX",E)}}}if($===null)throw this.B("REGEX",E);return ae.create(r,$)}default:throw this.B("REGEX",this.D())}}if(this.y(14)){this.A(13,o);const E=this.u();return c.notIn(r,E)}switch(this.D().type){case 3:{this.z();const E=this.u();if(this.x().type===18)return c.equals(r,E);switch(E){case"true":return c.has(r);case"false":return c.not(r);default:return c.equals(r,E)}}case 4:{this.z();const E=this.u();if(this.x().type===18)return c.notEquals(r,E);switch(E){case"true":return c.not(r);case"false":return c.has(r);default:return c.notEquals(r,E)}}case 5:return this.z(),Y.create(r,this.u());case 6:return this.z(),_.create(r,this.u());case 7:return this.z(),Z.create(r,this.u());case 8:return this.z(),ee.create(r,this.u());case 13:return this.z(),c.in(r,this.u());default:return c.has(r)}}case 20:throw this.h.push({message:a,offset:e.offset,lexeme:"",additionalInfo:i}),l.c;default:throw this.B(`true | false | KEY 
	| KEY '=~' REGEX 
	| KEY ('==' | '!=' | '<' | '<=' | '>' | '>=' | 'in' | 'not' 'in') value`,this.D())}}u(){const e=this.D();switch(e.type){case 17:case 18:return this.z(),e.lexeme;case 11:return this.z(),"true";case 12:return this.z(),"false";case 13:return this.z(),"in";default:return""}}w(e){return e.replaceAll(this.v,"")}x(){return this.f[this.g-1]}y(e){return this.C(e)?(this.z(),!0):!1}z(){return this.E()||this.g++,this.x()}A(e,r){if(this.C(e))return this.z();throw this.B(r,this.D())}B(e,r,g){const E=(0,z.localize)(8,null,e,U.Scanner.getLexeme(r)),W=r.offset,$=U.Scanner.getLexeme(r);return this.h.push({message:E,offset:W,lexeme:$,additionalInfo:g}),l.c}C(e){return this.D().type===e}D(){return this.f[this.g]}E(){return this.D().type===20}}t.Parser=l,l.c=new Error;class c{static false(){return O.INSTANCE}static true(){return f.INSTANCE}static has(e){return I.create(e)}static equals(e,r){return M.create(e,r)}static notEquals(e,r){return k.create(e,r)}static regex(e,r){return ae.create(e,r)}static in(e,r){return y.create(e,r)}static notIn(e,r){return S.create(e,r)}static not(e){return G.create(e)}static and(...e){return D.create(e,null,!0)}static or(...e){return q.create(e,null,!0)}static greater(e,r){return Z.create(e,r)}static greaterEquals(e,r){return ee.create(e,r)}static smaller(e,r){return Y.create(e,r)}static smallerEquals(e,r){return _.create(e,r)}static deserialize(e){return e==null?void 0:this.c.parse(e)}}t.ContextKeyExpr=c,c.c=new l({regexParsingWithErrorRecovery:!1});function w(d){const e=new l({regexParsingWithErrorRecovery:!1});return d.map(r=>(e.parse(r),e.lexingErrors.length>0?e.lexingErrors.map(g=>({errorMessage:g.additionalInfo?(0,z.localize)(9,null,g.additionalInfo):(0,z.localize)(10,null),offset:g.offset,length:g.lexeme.length})):e.parsingErrors.length>0?e.parsingErrors.map(g=>({errorMessage:g.additionalInfo?`${g.message}. ${g.additionalInfo}`:g.message,offset:g.offset,length:g.lexeme.length})):[]))}t.validateWhenClauses=w;function v(d,e){const r=d?d.substituteConstants():void 0,g=e?e.substituteConstants():void 0;return!r&&!g?!0:!r||!g?!1:r.equals(g)}t.expressionsAreEqualWithConstantSubstitution=v;function P(d,e){return d.cmp(e)}class O{constructor(){this.type=0}cmp(e){return this.type-e.type}equals(e){return e.type===this.type}substituteConstants(){return this}evaluate(e){return!1}serialize(){return"false"}keys(){return[]}map(e){return this}negate(){return f.INSTANCE}}t.ContextKeyFalseExpr=O,O.INSTANCE=new O;class f{constructor(){this.type=1}cmp(e){return this.type-e.type}equals(e){return e.type===this.type}substituteConstants(){return this}evaluate(e){return!0}serialize(){return"true"}keys(){return[]}map(e){return this}negate(){return O.INSTANCE}}t.ContextKeyTrueExpr=f,f.INSTANCE=new f;class I{static create(e,r=null){const g=C.get(e);return typeof g=="boolean"?g?f.INSTANCE:O.INSTANCE:new I(e,r)}constructor(e,r){this.key=e,this.c=r,this.type=2}cmp(e){return e.type!==this.type?this.type-e.type:K(this.key,e.key)}equals(e){return e.type===this.type?this.key===e.key:!1}substituteConstants(){const e=C.get(this.key);return typeof e=="boolean"?e?f.INSTANCE:O.INSTANCE:this}evaluate(e){return!!e.getValue(this.key)}serialize(){return this.key}keys(){return[this.key]}map(e){return e.mapDefined(this.key)}negate(){return this.c||(this.c=G.create(this.key,this)),this.c}}t.ContextKeyDefinedExpr=I;class M{static create(e,r,g=null){if(typeof r=="boolean")return r?I.create(e,g):G.create(e,g);const E=C.get(e);return typeof E=="boolean"?r===(E?"true":"false")?f.INSTANCE:O.INSTANCE:new M(e,r,g)}constructor(e,r,g){this.c=e,this.d=r,this.f=g,this.type=4}cmp(e){return e.type!==this.type?this.type-e.type:V(this.c,this.d,e.c,e.d)}equals(e){return e.type===this.type?this.c===e.c&&this.d===e.d:!1}substituteConstants(){const e=C.get(this.c);if(typeof e=="boolean"){const r=e?"true":"false";return this.d===r?f.INSTANCE:O.INSTANCE}return this}evaluate(e){return e.getValue(this.c)==this.d}serialize(){return`${this.c} == '${this.d}'`}keys(){return[this.c]}map(e){return e.mapEquals(this.c,this.d)}negate(){return this.f||(this.f=k.create(this.c,this.d,this)),this.f}}t.ContextKeyEqualsExpr=M;class y{static create(e,r){return new y(e,r)}constructor(e,r){this.d=e,this.f=r,this.type=10,this.c=null}cmp(e){return e.type!==this.type?this.type-e.type:V(this.d,this.f,e.d,e.f)}equals(e){return e.type===this.type?this.d===e.d&&this.f===e.f:!1}substituteConstants(){return this}evaluate(e){const r=e.getValue(this.f),g=e.getValue(this.d);return Array.isArray(r)?r.includes(g):typeof g=="string"&&typeof r=="object"&&r!==null?b.call(r,g):!1}serialize(){return`${this.d} in '${this.f}'`}keys(){return[this.d,this.f]}map(e){return e.mapIn(this.d,this.f)}negate(){return this.c||(this.c=S.create(this.d,this.f)),this.c}}t.ContextKeyInExpr=y;class S{static create(e,r){return new S(e,r)}constructor(e,r){this.d=e,this.f=r,this.type=11,this.c=y.create(e,r)}cmp(e){return e.type!==this.type?this.type-e.type:this.c.cmp(e.c)}equals(e){return e.type===this.type?this.c.equals(e.c):!1}substituteConstants(){return this}evaluate(e){return!this.c.evaluate(e)}serialize(){return`${this.d} not in '${this.f}'`}keys(){return this.c.keys()}map(e){return e.mapNotIn(this.d,this.f)}negate(){return this.c}}t.ContextKeyNotInExpr=S;class k{static create(e,r,g=null){if(typeof r=="boolean")return r?G.create(e,g):I.create(e,g);const E=C.get(e);return typeof E=="boolean"?r===(E?"true":"false")?O.INSTANCE:f.INSTANCE:new k(e,r,g)}constructor(e,r,g){this.c=e,this.d=r,this.f=g,this.type=5}cmp(e){return e.type!==this.type?this.type-e.type:V(this.c,this.d,e.c,e.d)}equals(e){return e.type===this.type?this.c===e.c&&this.d===e.d:!1}substituteConstants(){const e=C.get(this.c);if(typeof e=="boolean"){const r=e?"true":"false";return this.d===r?O.INSTANCE:f.INSTANCE}return this}evaluate(e){return e.getValue(this.c)!=this.d}serialize(){return`${this.c} != '${this.d}'`}keys(){return[this.c]}map(e){return e.mapNotEquals(this.c,this.d)}negate(){return this.f||(this.f=M.create(this.c,this.d,this)),this.f}}t.ContextKeyNotEqualsExpr=k;class G{static create(e,r=null){const g=C.get(e);return typeof g=="boolean"?g?O.INSTANCE:f.INSTANCE:new G(e,r)}constructor(e,r){this.c=e,this.d=r,this.type=3}cmp(e){return e.type!==this.type?this.type-e.type:K(this.c,e.c)}equals(e){return e.type===this.type?this.c===e.c:!1}substituteConstants(){const e=C.get(this.c);return typeof e=="boolean"?e?O.INSTANCE:f.INSTANCE:this}evaluate(e){return!e.getValue(this.c)}serialize(){return`!${this.c}`}keys(){return[this.c]}map(e){return e.mapNot(this.c)}negate(){return this.d||(this.d=I.create(this.c,this)),this.d}}t.ContextKeyNotExpr=G;function X(d,e){if(typeof d=="string"){const r=parseFloat(d);isNaN(r)||(d=r)}return typeof d=="string"||typeof d=="number"?e(d):O.INSTANCE}class Z{static create(e,r,g=null){return X(r,E=>new Z(e,E,g))}constructor(e,r,g){this.c=e,this.d=r,this.f=g,this.type=12}cmp(e){return e.type!==this.type?this.type-e.type:V(this.c,this.d,e.c,e.d)}equals(e){return e.type===this.type?this.c===e.c&&this.d===e.d:!1}substituteConstants(){return this}evaluate(e){return typeof this.d=="string"?!1:parseFloat(e.getValue(this.c))>this.d}serialize(){return`${this.c} > ${this.d}`}keys(){return[this.c]}map(e){return e.mapGreater(this.c,this.d)}negate(){return this.f||(this.f=_.create(this.c,this.d,this)),this.f}}t.ContextKeyGreaterExpr=Z;class ee{static create(e,r,g=null){return X(r,E=>new ee(e,E,g))}constructor(e,r,g){this.c=e,this.d=r,this.f=g,this.type=13}cmp(e){return e.type!==this.type?this.type-e.type:V(this.c,this.d,e.c,e.d)}equals(e){return e.type===this.type?this.c===e.c&&this.d===e.d:!1}substituteConstants(){return this}evaluate(e){return typeof this.d=="string"?!1:parseFloat(e.getValue(this.c))>=this.d}serialize(){return`${this.c} >= ${this.d}`}keys(){return[this.c]}map(e){return e.mapGreaterEquals(this.c,this.d)}negate(){return this.f||(this.f=Y.create(this.c,this.d,this)),this.f}}t.ContextKeyGreaterEqualsExpr=ee;class Y{static create(e,r,g=null){return X(r,E=>new Y(e,E,g))}constructor(e,r,g){this.c=e,this.d=r,this.f=g,this.type=14}cmp(e){return e.type!==this.type?this.type-e.type:V(this.c,this.d,e.c,e.d)}equals(e){return e.type===this.type?this.c===e.c&&this.d===e.d:!1}substituteConstants(){return this}evaluate(e){return typeof this.d=="string"?!1:parseFloat(e.getValue(this.c))<this.d}serialize(){return`${this.c} < ${this.d}`}keys(){return[this.c]}map(e){return e.mapSmaller(this.c,this.d)}negate(){return this.f||(this.f=ee.create(this.c,this.d,this)),this.f}}t.ContextKeySmallerExpr=Y;class _{static create(e,r,g=null){return X(r,E=>new _(e,E,g))}constructor(e,r,g){this.c=e,this.d=r,this.f=g,this.type=15}cmp(e){return e.type!==this.type?this.type-e.type:V(this.c,this.d,e.c,e.d)}equals(e){return e.type===this.type?this.c===e.c&&this.d===e.d:!1}substituteConstants(){return this}evaluate(e){return typeof this.d=="string"?!1:parseFloat(e.getValue(this.c))<=this.d}serialize(){return`${this.c} <= ${this.d}`}keys(){return[this.c]}map(e){return e.mapSmallerEquals(this.c,this.d)}negate(){return this.f||(this.f=Z.create(this.c,this.d,this)),this.f}}t.ContextKeySmallerEqualsExpr=_;class ae{static create(e,r){return new ae(e,r)}constructor(e,r){this.d=e,this.f=r,this.type=7,this.c=null}cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.d<e.d)return-1;if(this.d>e.d)return 1;const r=this.f?this.f.source:"",g=e.f?e.f.source:"";return r<g?-1:r>g?1:0}equals(e){if(e.type===this.type){const r=this.f?this.f.source:"",g=e.f?e.f.source:"";return this.d===e.d&&r===g}return!1}substituteConstants(){return this}evaluate(e){const r=e.getValue(this.d);return this.f?this.f.test(r):!1}serialize(){const e=this.f?`/${this.f.source}/${this.f.flags}`:"/invalid/";return`${this.d} =~ ${e}`}keys(){return[this.d]}map(e){return e.mapRegex(this.d,this.f)}negate(){return this.c||(this.c=L.create(this)),this.c}}t.ContextKeyRegexExpr=ae;class L{static create(e){return new L(e)}constructor(e){this.c=e,this.type=8}cmp(e){return e.type!==this.type?this.type-e.type:this.c.cmp(e.c)}equals(e){return e.type===this.type?this.c.equals(e.c):!1}substituteConstants(){return this}evaluate(e){return!this.c.evaluate(e)}serialize(){return`!(${this.c.serialize()})`}keys(){return this.c.keys()}map(e){return new L(this.c.map(e))}negate(){return this.c}}t.ContextKeyNotRegexExpr=L;function Q(d){let e=null;for(let r=0,g=d.length;r<g;r++){const E=d[r].substituteConstants();if(d[r]!==E&&e===null){e=[];for(let W=0;W<r;W++)e[W]=d[W]}e!==null&&(e[r]=E)}return e===null?d:e}class D{static create(e,r,g){return D.d(e,r,g)}constructor(e,r){this.expr=e,this.c=r,this.type=6}cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.expr.length<e.expr.length)return-1;if(this.expr.length>e.expr.length)return 1;for(let r=0,g=this.expr.length;r<g;r++){const E=P(this.expr[r],e.expr[r]);if(E!==0)return E}return 0}equals(e){if(e.type===this.type){if(this.expr.length!==e.expr.length)return!1;for(let r=0,g=this.expr.length;r<g;r++)if(!this.expr[r].equals(e.expr[r]))return!1;return!0}return!1}substituteConstants(){const e=Q(this.expr);return e===this.expr?this:D.create(e,this.c,!1)}evaluate(e){for(let r=0,g=this.expr.length;r<g;r++)if(!this.expr[r].evaluate(e))return!1;return!0}static d(e,r,g){const E=[];let W=!1;for(const $ of e)if($){if($.type===1){W=!0;continue}if($.type===0)return O.INSTANCE;if($.type===6){E.push(...$.expr);continue}E.push($)}if(E.length===0&&W)return f.INSTANCE;if(E.length!==0){if(E.length===1)return E[0];E.sort(P);for(let $=1;$<E.length;$++)E[$-1].equals(E[$])&&(E.splice($,1),$--);if(E.length===1)return E[0];for(;E.length>1;){const $=E[E.length-1];if($.type!==9)break;E.pop();const J=E.pop(),ie=E.length===0,oe=q.create($.expr.map(ue=>D.create([ue,J],null,g)),null,ie);oe&&(E.push(oe),E.sort(P))}if(E.length===1)return E[0];if(g){for(let $=0;$<E.length;$++)for(let J=$+1;J<E.length;J++)if(E[$].negate().equals(E[J]))return O.INSTANCE;if(E.length===1)return E[0]}return new D(E,r)}}serialize(){return this.expr.map(e=>e.serialize()).join(" && ")}keys(){const e=[];for(const r of this.expr)e.push(...r.keys());return e}map(e){return new D(this.expr.map(r=>r.map(e)),null)}negate(){if(!this.c){const e=[];for(const r of this.expr)e.push(r.negate());this.c=q.create(e,this,!0)}return this.c}}t.ContextKeyAndExpr=D;class q{static create(e,r,g){return q.d(e,r,g)}constructor(e,r){this.expr=e,this.c=r,this.type=9}cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.expr.length<e.expr.length)return-1;if(this.expr.length>e.expr.length)return 1;for(let r=0,g=this.expr.length;r<g;r++){const E=P(this.expr[r],e.expr[r]);if(E!==0)return E}return 0}equals(e){if(e.type===this.type){if(this.expr.length!==e.expr.length)return!1;for(let r=0,g=this.expr.length;r<g;r++)if(!this.expr[r].equals(e.expr[r]))return!1;return!0}return!1}substituteConstants(){const e=Q(this.expr);return e===this.expr?this:q.create(e,this.c,!1)}evaluate(e){for(let r=0,g=this.expr.length;r<g;r++)if(this.expr[r].evaluate(e))return!0;return!1}static d(e,r,g){let E=[],W=!1;if(e){for(let $=0,J=e.length;$<J;$++){const ie=e[$];if(ie){if(ie.type===0){W=!0;continue}if(ie.type===1)return f.INSTANCE;if(ie.type===9){E=E.concat(ie.expr);continue}E.push(ie)}}if(E.length===0&&W)return O.INSTANCE;E.sort(P)}if(E.length!==0){if(E.length===1)return E[0];for(let $=1;$<E.length;$++)E[$-1].equals(E[$])&&(E.splice($,1),$--);if(E.length===1)return E[0];if(g){for(let $=0;$<E.length;$++)for(let J=$+1;J<E.length;J++)if(E[$].negate().equals(E[J]))return f.INSTANCE;if(E.length===1)return E[0]}return new q(E,r)}}serialize(){return this.expr.map(e=>e.serialize()).join(" || ")}keys(){const e=[];for(const r of this.expr)e.push(...r.keys());return e}map(e){return new q(this.expr.map(r=>r.map(e)),null)}negate(){if(!this.c){const e=[];for(const r of this.expr)e.push(r.negate());for(;e.length>1;){const r=e.shift(),g=e.shift(),E=[];for(const W of x(r))for(const $ of x(g))E.push(D.create([W,$],null,!1));e.unshift(q.create(E,null,!1))}this.c=q.create(e,this,!0)}return this.c}}t.ContextKeyOrExpr=q;class T extends I{static all(){return T.d.values()}constructor(e,r,g){super(e,null),this.f=r,typeof g=="object"?T.d.push({...g,key:e}):g!==!0&&T.d.push({key:e,description:g,type:r!=null?typeof r:void 0})}bindTo(e){return e.createKey(this.key,this.f)}getValue(e){return e.getContextKeyValue(this.key)}toNegated(){return this.negate()}isEqualTo(e){return M.create(this.key,e)}notEqualsTo(e){return k.create(this.key,e)}}t.RawContextKey=T,T.d=[],t.IContextKeyService=(0,N.createDecorator)("contextKeyService");function K(d,e){return d<e?-1:d>e?1:0}function V(d,e,r,g){return d<r?-1:d>r?1:e<g?-1:e>g?1:0}function H(d,e){if(d.type===0||e.type===1)return!0;if(d.type===9)return e.type===9?te(d.expr,e.expr):!1;if(e.type===9){for(const r of e.expr)if(H(d,r))return!0;return!1}if(d.type===6){if(e.type===6)return te(e.expr,d.expr);for(const r of d.expr)if(H(r,e))return!0;return!1}return d.equals(e)}t.implies=H;function te(d,e){let r=0,g=0;for(;r<d.length&&g<e.length;){const E=d[r].cmp(e[g]);if(E<0)return!1;E===0&&r++,g++}return r===d.length}function x(d){return d.type===9?d.expr:[d]}}),define(se[35],re([0,1,6,22,42,18,9,5,2,34]),function(ne,t,F,B,U,N,z,j,C,h){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.compressOutputItemStreams=t.isTextStreamMime=t.NotebookWorkingCopyTypeIdentifier=t.CellStatusbarAlignment=t.NotebookSetting=t.notebookDocumentFilterMatch=t.isDocumentExcludePattern=t.NotebookEditorPriority=t.NOTEBOOK_EDITOR_CURSOR_BOUNDARY=t.diff=t.MimeTypeDisplayOrder=t.CellUri=t.CellEditType=t.SelectionStateType=t.NotebookCellsChangeType=t.RendererMessagingSpec=t.NotebookRendererMatch=t.NotebookExecutionState=t.NotebookCellExecutionState=t.NotebookRunState=t.RENDERER_NOT_AVAILABLE=t.RENDERER_EQUIVALENT_EXTENSIONS=t.ACCESSIBLE_NOTEBOOK_DISPLAY_ORDER=t.NOTEBOOK_DISPLAY_ORDER=t.CellKind=t.INTERACTIVE_WINDOW_EDITOR_ID=t.NOTEBOOK_DIFF_EDITOR_ID=t.NOTEBOOK_EDITOR_ID=void 0,t.NOTEBOOK_EDITOR_ID="workbench.editor.notebook",t.NOTEBOOK_DIFF_EDITOR_ID="workbench.editor.notebookTextDiffEditor",t.INTERACTIVE_WINDOW_EDITOR_ID="workbench.editor.interactive";var b;(function(L){L[L.Markup=1]="Markup",L[L.Code=2]="Code"})(b||(t.CellKind=b={})),t.NOTEBOOK_DISPLAY_ORDER=["application/json","application/javascript","text/html","image/svg+xml",N.Mimes.latex,N.Mimes.markdown,"image/png","image/jpeg",N.Mimes.text],t.ACCESSIBLE_NOTEBOOK_DISPLAY_ORDER=[N.Mimes.latex,N.Mimes.markdown,"application/json","text/html","image/svg+xml","image/png","image/jpeg",N.Mimes.text],t.RENDERER_EQUIVALENT_EXTENSIONS=new Map([["ms-toolsai.jupyter",new Set(["jupyter-notebook","interactive"])],["ms-toolsai.jupyter-renderers",new Set(["jupyter-notebook","interactive"])]]),t.RENDERER_NOT_AVAILABLE="_notAvailable";var A;(function(L){L[L.Running=1]="Running",L[L.Idle=2]="Idle"})(A||(t.NotebookRunState=A={}));var p;(function(L){L[L.Unconfirmed=1]="Unconfirmed",L[L.Pending=2]="Pending",L[L.Executing=3]="Executing"})(p||(t.NotebookCellExecutionState=p={}));var R;(function(L){L[L.Unconfirmed=1]="Unconfirmed",L[L.Pending=2]="Pending",L[L.Executing=3]="Executing"})(R||(t.NotebookExecutionState=R={}));var m;(function(L){L[L.WithHardKernelDependency=0]="WithHardKernelDependency",L[L.WithOptionalKernelDependency=1]="WithOptionalKernelDependency",L[L.Pure=2]="Pure",L[L.Never=3]="Never"})(m||(t.NotebookRendererMatch=m={}));var o;(function(L){L.Always="always",L.Never="never",L.Optional="optional"})(o||(t.RendererMessagingSpec=o={}));var s;(function(L){L[L.ModelChange=1]="ModelChange",L[L.Move=2]="Move",L[L.ChangeCellLanguage=5]="ChangeCellLanguage",L[L.Initialize=6]="Initialize",L[L.ChangeCellMetadata=7]="ChangeCellMetadata",L[L.Output=8]="Output",L[L.OutputItem=9]="OutputItem",L[L.ChangeCellContent=10]="ChangeCellContent",L[L.ChangeDocumentMetadata=11]="ChangeDocumentMetadata",L[L.ChangeCellInternalMetadata=12]="ChangeCellInternalMetadata",L[L.ChangeCellMime=13]="ChangeCellMime",L[L.Unknown=100]="Unknown"})(s||(t.NotebookCellsChangeType=s={}));var u;(function(L){L[L.Handle=0]="Handle",L[L.Index=1]="Index"})(u||(t.SelectionStateType=u={}));var n;(function(L){L[L.Replace=1]="Replace",L[L.Output=2]="Output",L[L.Metadata=3]="Metadata",L[L.CellLanguage=4]="CellLanguage",L[L.DocumentMetadata=5]="DocumentMetadata",L[L.Move=6]="Move",L[L.OutputItems=7]="OutputItems",L[L.PartialMetadata=8]="PartialMetadata",L[L.PartialInternalMetadata=9]="PartialInternalMetadata"})(n||(t.CellEditType=n={}));var a;(function(L){L.scheme=z.Schemas.vscodeNotebookCell;const Q=["W","X","Y","Z","a","b","c","d","e","f"],D=new RegExp(`^[${Q.join("")}]+`),q=7;function T(d,e){const r=e.toString(q),E=`${r.length<Q.length?Q[r.length-1]:"z"}${r}s${(0,F.encodeBase64)(F.VSBuffer.fromString(d.scheme),!0,!0)}`;return d.with({scheme:L.scheme,fragment:E})}L.generate=T;function K(d){if(d.scheme!==L.scheme)return;const e=d.fragment.indexOf("s");if(e<0)return;const r=parseInt(d.fragment.substring(0,e).replace(D,""),q),g=(0,F.decodeBase64)(d.fragment.substring(e+1)).toString();if(!isNaN(r))return{handle:r,notebook:d.with({scheme:g,fragment:null})}}L.parse=K;function V(d,e){return d.with({scheme:z.Schemas.vscodeNotebookCellOutput,fragment:`op${e??""},${d.scheme!==z.Schemas.file?d.scheme:""}`})}L.generateCellOutputUri=V;function H(d){if(d.scheme!==z.Schemas.vscodeNotebookCellOutput)return;const e=/^op([0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12})?\,(.*)$/i.exec(d.fragment);if(!e)return;const r=e[1]&&e[1]!==""?e[1]:void 0,g=e[2];return{outputId:r,notebook:d.with({scheme:g||z.Schemas.file,fragment:null})}}L.parseCellOutputUri=H;function te(d,e,r){return L.generate(d,e).with({scheme:r})}L.generateCellPropertyUri=te;function x(d,e){if(d.scheme===e)return L.parse(d.with({scheme:L.scheme}))}L.parseCellPropertyUri=x})(a||(t.CellUri=a={}));const i=L=>C.isWindows?L.replace(/\//g,"\\"):L;class l{constructor(Q=[],D=t.NOTEBOOK_DISPLAY_ORDER){this.e=D,this.d=[...new Set(Q)].map(q=>({pattern:q,matches:B.parse(i(q))}))}sort(Q){const D=new Map(U.Iterable.map(Q,T=>[T,i(T)]));let q=[];for(const{matches:T}of this.d)for(const[K,V]of D)if(T(V)){q.push(K),D.delete(K);break}return D.size&&(q=q.concat([...D.keys()].sort((T,K)=>this.e.indexOf(T)-this.e.indexOf(K)))),q}prioritize(Q,D){const q=this.f(Q);if(q===-1){this.d.unshift({pattern:Q,matches:B.parse(i(Q))});return}const T=new Set(D.map(V=>this.f(V,q)));T.delete(-1);const K=Array.from(T).sort();this.d.splice(q+1,0,...K.map(V=>this.d[V]));for(let V=K.length-1;V>=0;V--)this.d.splice(K[V],1)}toArray(){return this.d.map(Q=>Q.pattern)}f(Q,D=this.d.length){const q=i(Q);for(let T=0;T<D;T++)if(this.d[T].matches(q))return T;return-1}}t.MimeTypeDisplayOrder=l;function c(L,Q,D,q=(T,K)=>T===K){const T=[];function K(te,x,d){if(x===0&&d.length===0)return;const e=T[T.length-1];e&&e.start+e.deleteCount===te?(e.deleteCount+=x,e.toInsert.push(...d)):T.push({start:te,deleteCount:x,toInsert:d})}let V=0,H=0;for(;;){if(V===L.length){K(V,0,Q.slice(H));break}if(H===Q.length){K(V,L.length-V,[]);break}const te=L[V],x=Q[H];if(q(te,x)){V+=1,H+=1;continue}D(x)?(K(V,1,[]),V+=1):(K(V,0,[x]),H+=1)}return T}t.diff=c,t.NOTEBOOK_EDITOR_CURSOR_BOUNDARY=new h.RawContextKey("notebookEditorCursorAtBoundary","none");var w;(function(L){L.default="default",L.option="option"})(w||(t.NotebookEditorPriority=w={}));function v(L){const Q=L;return!!((typeof Q.include=="string"||B.isRelativePattern(Q.include))&&(typeof Q.exclude=="string"||B.isRelativePattern(Q.exclude)))}t.isDocumentExcludePattern=v;function P(L,Q,D){if(Array.isArray(L.viewType)&&L.viewType.indexOf(Q)>=0||L.viewType===Q)return!0;if(L.filenamePattern){const q=v(L.filenamePattern)?L.filenamePattern.include:L.filenamePattern,T=v(L.filenamePattern)?L.filenamePattern.exclude:void 0;if(B.match(q,(0,j.basename)(D.fsPath).toLowerCase()))return!(T&&B.match(T,(0,j.basename)(D.fsPath).toLowerCase()))}return!1}t.notebookDocumentFilterMatch=P,t.NotebookSetting={displayOrder:"notebook.displayOrder",cellToolbarLocation:"notebook.cellToolbarLocation",cellToolbarVisibility:"notebook.cellToolbarVisibility",showCellStatusBar:"notebook.showCellStatusBar",textDiffEditorPreview:"notebook.diff.enablePreview",diffOverviewRuler:"notebook.diff.overviewRuler",experimentalInsertToolbarAlignment:"notebook.experimental.insertToolbarAlignment",compactView:"notebook.compactView",focusIndicator:"notebook.cellFocusIndicator",insertToolbarLocation:"notebook.insertToolbarLocation",globalToolbar:"notebook.globalToolbar",undoRedoPerCell:"notebook.undoRedoPerCell",consolidatedOutputButton:"notebook.consolidatedOutputButton",showFoldingControls:"notebook.showFoldingControls",dragAndDropEnabled:"notebook.dragAndDropEnabled",cellEditorOptionsCustomizations:"notebook.editorOptionsCustomizations",consolidatedRunButton:"notebook.consolidatedRunButton",openGettingStarted:"notebook.experimental.openGettingStarted",globalToolbarShowLabel:"notebook.globalToolbarShowLabel",markupFontSize:"notebook.markup.fontSize",interactiveWindowCollapseCodeCells:"interactiveWindow.collapseCellInputCode",outputScrollingDeprecated:"notebook.experimental.outputScrolling",outputScrolling:"notebook.output.scrolling",textOutputLineLimit:"notebook.output.textLineLimit",formatOnSave:"notebook.formatOnSave.enabled",codeActionsOnSave:"notebook.codeActionsOnSave",outputWordWrap:"notebook.output.wordWrap",outputLineHeightDeprecated:"notebook.outputLineHeight",outputLineHeight:"notebook.output.lineHeight",outputFontSizeDeprecated:"notebook.outputFontSize",outputFontSize:"notebook.output.fontSize",outputFontFamilyDeprecated:"notebook.outputFontFamily",outputFontFamily:"notebook.output.fontFamily",findScope:"notebook.find.scope",logging:"notebook.logging",confirmDeleteRunningCell:"notebook.confirmDeleteRunningCell"};var O;(function(L){L[L.Left=1]="Left",L[L.Right=2]="Right"})(O||(t.CellStatusbarAlignment=O={}));class f{static create(Q){return`${f.d}${Q}`}static parse(Q){if(Q.startsWith(f.d))return Q.substring(f.d.length)}}t.NotebookWorkingCopyTypeIdentifier=f,f.d="notebook/";function I(L){return["application/vnd.code.notebook.stdout","application/vnd.code.notebook.stderr"].includes(L)}t.isTextStreamMime=I;const M=new TextDecoder;function y(L){const Q=[];let D=!1;for(const q of L)(Q.length===0||D)&&(Q.push(q),D=!0);return X(Q),ae(F.VSBuffer.concat(Q.map(q=>F.VSBuffer.wrap(q))))}t.compressOutputItemStreams=y;const S=`${String.fromCharCode(27)}[A`,k=S.split("").map(L=>L.charCodeAt(0)),G=10;function X(L){L.forEach((Q,D)=>{if(D===0||Q.length<S.length)return;const q=L[D-1],T=Q.subarray(0,S.length);if(T[0]===k[0]&&T[1]===k[1]&&T[2]===k[2]){const K=q.lastIndexOf(G);if(K===-1)return;L[D-1]=q.subarray(0,K),L[D]=Q.subarray(S.length)}})}function Z(L){let Q=L;do L=Q,Q=L.replace(/[^\n]\x08/gm,"");while(Q.length<L.length);return L}function ee(L){for(L=L.replace(/\r+\n/gm,`
`);L.search(/\r[^$]/g)>-1;){const Q=L.match(/^(.*)\r+/m)[1];let D=L.match(/\r+(.*)$/m)[1];D=D+Q.slice(D.length,Q.length),L=L.replace(/\r+.*$/m,"\r").replace(/^.*\r/m,D)}return L}const Y="\b".charCodeAt(0),_="\r".charCodeAt(0);function ae(L){return!L.buffer.includes(Y)&&!L.buffer.includes(_)?L:F.VSBuffer.fromString(ee(Z(M.decode(L.buffer))))}}),define(se[43],re([0,1,44,45,10,27,35,12]),function(ne,t,F,B,U,N,z,j){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.create=t.NotebookEditorSimpleWorker=void 0;function C(m){let o=(0,B.numberHash)(104579,0);for(let s=0;s<m.buffer.length;s++)o=(0,B.doHash)(m.buffer[s],o);return o}class h{get textBuffer(){if(this.a)return this.a;const o=new N.PieceTreeTextBufferBuilder;o.acceptChunk(Array.isArray(this.d)?this.d.join(`
`):this.d);const s=o.finish(!0);return this.a=s.create(1).textBuffer,this.a}primaryKey(){return this.b===void 0&&(this.b=(0,B.hash)(this.getValue())),this.b}constructor(o,s,u,n,a,i,l){this.handle=o,this.d=s,this.language=u,this.cellKind=n,this.outputs=a,this.metadata=i,this.internalMetadata=l,this.b=null,this.c=null}getFullModelRange(){const o=this.textBuffer.getLineCount();return new j.Range(1,1,o,this.textBuffer.getLineLength(o)+1)}getValue(){const o=this.getFullModelRange();return this.textBuffer.getValueInRange(o,1)}getComparisonValue(){return this.b!==null?this.b:(this.c=(0,B.hash)([(0,B.hash)(this.language),(0,B.hash)(this.getValue()),this.metadata,this.internalMetadata,this.outputs.map(o=>({outputs:o.outputs.map(s=>({mime:s.mime,data:C(s.data)})),metadata:o.metadata}))]),this.c)}getHashValue(){return this.c!==null?this.c:(this.c=(0,B.hash)([(0,B.hash)(this.getValue()),this.language,this.metadata,this.internalMetadata]),this.c)}}class b{constructor(o,s,u){this.uri=o,this.cells=s,this.metadata=u}acceptModelChanged(o){o.rawEvents.forEach(s=>{if(s.kind===z.NotebookCellsChangeType.ModelChange)this._spliceNotebookCells(s.changes);else if(s.kind===z.NotebookCellsChangeType.Move){const u=this.cells.splice(s.index,1);this.cells.splice(s.newIdx,0,...u)}else if(s.kind===z.NotebookCellsChangeType.Output){const u=this.cells[s.index];u.outputs=s.outputs}else if(s.kind===z.NotebookCellsChangeType.ChangeCellLanguage){this.a(s.index);const u=this.cells[s.index];u.language=s.language}else if(s.kind===z.NotebookCellsChangeType.ChangeCellMetadata){this.a(s.index);const u=this.cells[s.index];u.metadata=s.metadata}else if(s.kind===z.NotebookCellsChangeType.ChangeCellInternalMetadata){this.a(s.index);const u=this.cells[s.index];u.internalMetadata=s.internalMetadata}})}a(o){if(o<0||o>=this.cells.length)throw new Error(`Illegal index ${o}. Cells length: ${this.cells.length}`)}_spliceNotebookCells(o){o.reverse().forEach(s=>{const n=s[2].map(a=>new h(a.handle,a.source,a.language,a.cellKind,a.outputs,a.metadata));this.cells.splice(s[0],s[1],...n)})}}class A{constructor(o){this.textModel=o}getElements(){const o=new Int32Array(this.textModel.cells.length);for(let s=0;s<this.textModel.cells.length;s++)o[s]=this.textModel.cells[s].getComparisonValue();return o}getCellHash(o){const s=Array.isArray(o.source)?o.source.join(`
`):o.source;return(0,B.hash)([(0,B.hash)(s),o.metadata])}}class p{constructor(){this.a=Object.create(null)}dispose(){}acceptNewModel(o,s){this.a[o]=new b(U.URI.parse(o),s.cells.map(u=>new h(u.handle,u.source,u.language,u.cellKind,u.outputs,u.metadata)),s.metadata)}acceptModelChanged(o,s){this.a[o]?.acceptModelChanged(s)}acceptRemovedModel(o){this.a[o]&&delete this.a[o]}computeDiff(o,s){const u=this.b(o),n=this.b(s);return{cellsDiff:new F.LcsDiff(new A(u),new A(n)).ComputeDiff(!1)}}b(o){return this.a[o]}}t.NotebookEditorSimpleWorker=p;function R(m){return new p}t.create=R})}).call(this);

//# sourceMappingURL=https://ticino.blob.core.windows.net/sourcemaps/2d416df5f00253f5ebd60d2f08508a440747fd8d/core/vs/workbench/contrib/notebook/common/services/notebookSimpleWorker.js.map
