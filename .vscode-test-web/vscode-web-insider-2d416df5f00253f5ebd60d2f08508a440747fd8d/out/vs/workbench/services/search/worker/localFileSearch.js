/*!--------------------------------------------------------
 * Copyright (C) Microsoft Corporation. All rights reserved.
 *--------------------------------------------------------*/(function(){var ie=["require","exports","vs/base/common/platform","vs/base/common/path","vs/base/common/strings","vs/base/common/extpath","vs/base/common/uri","vs/base/common/resources","vs/base/common/async","vs/base/common/glob","vs/base/common/map","vs/base/common/symbols","vs/base/common/network","vs/base/common/errors","vs/base/common/cancellation","vs/workbench/services/search/common/getFileResults","vs/workbench/services/search/common/ignoreFile","vs/base/common/types","vs/base/common/event","vs/base/common/lifecycle","vs/base/common/arrays","vs/editor/common/core/range","vs/workbench/services/search/worker/localFileSearch"],se=function(x){for(var e=[],A=0,O=x.length;A<O;A++)e[A]=ie[x[A]];return e};define(ie[10],se([0,1]),function(x,e){"use strict";var A,O,L;Object.defineProperty(e,"__esModule",{value:!0}),e.CounterSet=e.LRUCache=e.LinkedMap=e.Touch=e.ResourceSet=e.ResourceMap=e.setToString=e.mapToString=e.getOrSet=void 0;function R(o,n,u){let m=o.get(n);return m===void 0&&(m=u,o.set(n,m)),m}e.getOrSet=R;function T(o){const n=[];return o.forEach((u,m)=>{n.push(`${m} => ${u}`)}),`Map(${o.size}) {${n.join(", ")}}`}e.mapToString=T;function I(o){const n=[];return o.forEach(u=>{n.push(u)}),`Set(${o.size}) {${n.join(", ")}}`}e.setToString=I;class q{constructor(n,u){this.uri=n,this.value=u}}class v{constructor(n,u){this[A]="ResourceMap",n instanceof v?(this.b=new Map(n.b),this.c=u??v.a):(this.b=new Map,this.c=n??v.a)}set(n,u){return this.b.set(this.c(n),new q(n,u)),this}get(n){return this.b.get(this.c(n))?.value}has(n){return this.b.has(this.c(n))}get size(){return this.b.size}clear(){this.b.clear()}delete(n){return this.b.delete(this.c(n))}forEach(n,u){typeof u<"u"&&(n=n.bind(u));for(const[m,c]of this.b)n(c.value,c.uri,this)}*values(){for(const n of this.b.values())yield n.value}*keys(){for(const n of this.b.values())yield n.uri}*entries(){for(const n of this.b.values())yield[n.uri,n.value]}*[(A=Symbol.toStringTag,Symbol.iterator)](){for(const[,n]of this.b)yield[n.uri,n.value]}}e.ResourceMap=v,v.a=o=>o.toString();class w{constructor(n,u){this[O]="ResourceSet",!n||typeof n=="function"?this.a=new v(n):(this.a=new v(u),n.forEach(this.add,this))}get size(){return this.a.size}add(n){return this.a.set(n,n),this}clear(){this.a.clear()}delete(n){return this.a.delete(n)}forEach(n,u){this.a.forEach((m,c)=>n.call(u,c,c,this))}has(n){return this.a.has(n)}entries(){return this.a.entries()}keys(){return this.a.keys()}values(){return this.a.keys()}[(O=Symbol.toStringTag,Symbol.iterator)](){return this.keys()}}e.ResourceSet=w;var D;(function(o){o[o.None=0]="None",o[o.AsOld=1]="AsOld",o[o.AsNew=2]="AsNew"})(D||(e.Touch=D={}));class z{constructor(){this[L]="LinkedMap",this.a=new Map,this.b=void 0,this.c=void 0,this.d=0,this.e=0}clear(){this.a.clear(),this.b=void 0,this.c=void 0,this.d=0,this.e++}isEmpty(){return!this.b&&!this.c}get size(){return this.d}get first(){return this.b?.value}get last(){return this.c?.value}has(n){return this.a.has(n)}get(n,u=0){const m=this.a.get(n);if(m)return u!==0&&this.j(m,u),m.value}set(n,u,m=0){let c=this.a.get(n);if(c)c.value=u,m!==0&&this.j(c,m);else{switch(c={key:n,value:u,next:void 0,previous:void 0},m){case 0:this.h(c);break;case 1:this.g(c);break;case 2:this.h(c);break;default:this.h(c);break}this.a.set(n,c),this.d++}return this}delete(n){return!!this.remove(n)}remove(n){const u=this.a.get(n);if(u)return this.a.delete(n),this.i(u),this.d--,u.value}shift(){if(!this.b&&!this.c)return;if(!this.b||!this.c)throw new Error("Invalid list");const n=this.b;return this.a.delete(n.key),this.i(n),this.d--,n.value}forEach(n,u){const m=this.e;let c=this.b;for(;c;){if(u?n.bind(u)(c.value,c.key,this):n(c.value,c.key,this),this.e!==m)throw new Error("LinkedMap got modified during iteration.");c=c.next}}keys(){const n=this,u=this.e;let m=this.b;const c={[Symbol.iterator](){return c},next(){if(n.e!==u)throw new Error("LinkedMap got modified during iteration.");if(m){const W={value:m.key,done:!1};return m=m.next,W}else return{value:void 0,done:!0}}};return c}values(){const n=this,u=this.e;let m=this.b;const c={[Symbol.iterator](){return c},next(){if(n.e!==u)throw new Error("LinkedMap got modified during iteration.");if(m){const W={value:m.value,done:!1};return m=m.next,W}else return{value:void 0,done:!0}}};return c}entries(){const n=this,u=this.e;let m=this.b;const c={[Symbol.iterator](){return c},next(){if(n.e!==u)throw new Error("LinkedMap got modified during iteration.");if(m){const W={value:[m.key,m.value],done:!1};return m=m.next,W}else return{value:void 0,done:!0}}};return c}[(L=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}f(n){if(n>=this.size)return;if(n===0){this.clear();return}let u=this.b,m=this.size;for(;u&&m>n;)this.a.delete(u.key),u=u.next,m--;this.b=u,this.d=m,u&&(u.previous=void 0),this.e++}g(n){if(!this.b&&!this.c)this.c=n;else if(this.b)n.next=this.b,this.b.previous=n;else throw new Error("Invalid list");this.b=n,this.e++}h(n){if(!this.b&&!this.c)this.b=n;else if(this.c)n.previous=this.c,this.c.next=n;else throw new Error("Invalid list");this.c=n,this.e++}i(n){if(n===this.b&&n===this.c)this.b=void 0,this.c=void 0;else if(n===this.b){if(!n.next)throw new Error("Invalid list");n.next.previous=void 0,this.b=n.next}else if(n===this.c){if(!n.previous)throw new Error("Invalid list");n.previous.next=void 0,this.c=n.previous}else{const u=n.next,m=n.previous;if(!u||!m)throw new Error("Invalid list");u.previous=m,m.next=u}n.next=void 0,n.previous=void 0,this.e++}j(n,u){if(!this.b||!this.c)throw new Error("Invalid list");if(!(u!==1&&u!==2)){if(u===1){if(n===this.b)return;const m=n.next,c=n.previous;n===this.c?(c.next=void 0,this.c=c):(m.previous=c,c.next=m),n.previous=void 0,n.next=this.b,this.b.previous=n,this.b=n,this.e++}else if(u===2){if(n===this.c)return;const m=n.next,c=n.previous;n===this.b?(m.previous=void 0,this.b=m):(m.previous=c,c.next=m),n.next=void 0,n.previous=this.c,this.c.next=n,this.c=n,this.e++}}}toJSON(){const n=[];return this.forEach((u,m)=>{n.push([m,u])}),n}fromJSON(n){this.clear();for(const[u,m]of n)this.set(u,m)}}e.LinkedMap=z;class B extends z{constructor(n,u=1){super(),this.k=n,this.l=Math.min(Math.max(0,u),1)}get limit(){return this.k}set limit(n){this.k=n,this.m()}get ratio(){return this.l}set ratio(n){this.l=Math.min(Math.max(0,n),1),this.m()}get(n,u=2){return super.get(n,u)}peek(n){return super.get(n,0)}set(n,u){return super.set(n,u,2),this.m(),this}m(){this.size>this.k&&this.f(Math.round(this.k*this.l))}}e.LRUCache=B;class s{constructor(){this.a=new Map}add(n){return this.a.set(n,(this.a.get(n)||0)+1),this}delete(n){let u=this.a.get(n)||0;return u===0?!1:(u--,u===0?this.a.delete(n):this.a.set(n,u),!0)}has(n){return this.a.has(n)}}e.CounterSet=s}),define(ie[11],se([0,1]),function(x,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MicrotaskDelay=void 0,e.MicrotaskDelay=Symbol("MicrotaskDelay")}),define(ie[5],se([0,1,3,2,4,17]),function(x,e,A,O,L,R){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.randomPath=e.parseLineAndColumnAware=e.indexOfPath=e.getDriveLetter=e.hasDriveLetter=e.isRootOrDriveLetter=e.sanitizeFilePath=e.isWindowsDriveLetter=e.isEqualOrParent=e.isEqual=e.isValidBasename=e.isUNC=e.getRoot=e.toPosixPath=e.toSlashes=e.isPathSeparator=void 0;function T(r){return r===47||r===92}e.isPathSeparator=T;function I(r){return r.replace(/[\\/]/g,A.posix.sep)}e.toSlashes=I;function q(r){return r.indexOf("/")===-1&&(r=I(r)),/^[a-zA-Z]:(\/|$)/.test(r)&&(r="/"+r),r}e.toPosixPath=q;function v(r,g=A.posix.sep){if(!r)return"";const M=r.length,F=r.charCodeAt(0);if(T(F)){if(T(r.charCodeAt(1))&&!T(r.charCodeAt(2))){let j=3;const X=j;for(;j<M&&!T(r.charCodeAt(j));j++);if(X!==j&&!T(r.charCodeAt(j+1))){for(j+=1;j<M;j++)if(T(r.charCodeAt(j)))return r.slice(0,j+1).replace(/[\\/]/g,g)}}return g}else if(u(F)&&r.charCodeAt(1)===58)return T(r.charCodeAt(2))?r.slice(0,2)+g:r.slice(0,2);let Q=r.indexOf("://");if(Q!==-1){for(Q+=3;Q<M;Q++)if(T(r.charCodeAt(Q)))return r.slice(0,Q+1)}return""}e.getRoot=v;function w(r){if(!O.isWindows||!r||r.length<5)return!1;let g=r.charCodeAt(0);if(g!==92||(g=r.charCodeAt(1),g!==92))return!1;let M=2;const F=M;for(;M<r.length&&(g=r.charCodeAt(M),g!==92);M++);return!(F===M||(g=r.charCodeAt(M+1),isNaN(g)||g===92))}e.isUNC=w;const D=/[\\/:\*\?"<>\|]/g,z=/[\\/]/g,B=/^(con|prn|aux|clock\$|nul|lpt[0-9]|com[0-9])(\.(.*?))?$/i;function s(r,g=O.isWindows){const M=g?D:z;return!(!r||r.length===0||/^\s+$/.test(r)||(M.lastIndex=0,M.test(r))||g&&B.test(r)||r==="."||r===".."||g&&r[r.length-1]==="."||g&&r.length!==r.trim().length||r.length>255)}e.isValidBasename=s;function o(r,g,M){const F=r===g;return!M||F?F:!r||!g?!1:(0,L.equalsIgnoreCase)(r,g)}e.isEqual=o;function n(r,g,M,F=A.sep){if(r===g)return!0;if(!r||!g||g.length>r.length)return!1;if(M){if(!(0,L.startsWithIgnoreCase)(r,g))return!1;if(g.length===r.length)return!0;let j=g.length;return g.charAt(g.length-1)===F&&j--,r.charAt(j)===F}return g.charAt(g.length-1)!==F&&(g+=F),r.indexOf(g)===0}e.isEqualOrParent=n;function u(r){return r>=65&&r<=90||r>=97&&r<=122}e.isWindowsDriveLetter=u;function m(r,g){return O.isWindows&&r.endsWith(":")&&(r+=A.sep),(0,A.isAbsolute)(r)||(r=(0,A.join)(g,r)),r=(0,A.normalize)(r),O.isWindows?(r=(0,L.rtrim)(r,A.sep),r.endsWith(":")&&(r+=A.sep)):(r=(0,L.rtrim)(r,A.sep),r||(r=A.sep)),r}e.sanitizeFilePath=m;function c(r){const g=(0,A.normalize)(r);return O.isWindows?r.length>3?!1:W(g)&&(r.length===2||g.charCodeAt(2)===92):g===A.posix.sep}e.isRootOrDriveLetter=c;function W(r,g=O.isWindows){return g?u(r.charCodeAt(0))&&r.charCodeAt(1)===58:!1}e.hasDriveLetter=W;function Y(r,g=O.isWindows){return W(r,g)?r[0]:void 0}e.getDriveLetter=Y;function S(r,g,M){return g.length>r.length?-1:r===g?0:(M&&(r=r.toLowerCase(),g=g.toLowerCase()),r.indexOf(g))}e.indexOfPath=S;function p(r){const g=r.split(":");let M,F,Q;for(const j of g){const X=Number(j);(0,R.isNumber)(X)?F===void 0?F=X:Q===void 0&&(Q=X):M=M?[M,j].join(":"):j}if(!M)throw new Error("Format for `--goto` should be: `FILE:LINE(:COLUMN)`");return{path:M,line:F!==void 0?F:void 0,column:Q!==void 0?Q:F!==void 0?1:void 0}}e.parseLineAndColumnAware=p;const U="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",G="BDEFGHIJKMOQRSTUVWXYZbdefghijkmoqrstuvwxyz0123456789";function Z(r,g,M=8){let F="";for(let j=0;j<M;j++){let X;j===0&&O.isWindows&&!g&&(M===3||M===4)?X=G:X=U,F+=X.charAt(Math.floor(Math.random()*X.length))}let Q;return g?Q=`${g}-${F}`:Q=F,r?(0,A.join)(r,Q):Q}e.randomPath=Z}),define(ie[12],se([0,1,13,2,6]),function(x,e,A,O,L){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.COI=e.FileAccess=e.nodeModulesAsarUnpackedPath=e.nodeModulesAsarPath=e.nodeModulesPath=e.builtinExtensionsPath=e.RemoteAuthorities=e.connectionTokenQueryName=e.connectionTokenCookieName=e.Schemas=void 0;var R;(function(v){v.inMemory="inmemory",v.vscode="vscode",v.internal="private",v.walkThrough="walkThrough",v.walkThroughSnippet="walkThroughSnippet",v.http="http",v.https="https",v.file="file",v.mailto="mailto",v.untitled="untitled",v.data="data",v.command="command",v.vscodeRemote="vscode-remote",v.vscodeRemoteResource="vscode-remote-resource",v.vscodeUserData="vscode-userdata",v.vscodeCustomEditor="vscode-custom-editor",v.vscodeNotebookCell="vscode-notebook-cell",v.vscodeNotebookCellMetadata="vscode-notebook-cell-metadata",v.vscodeNotebookCellOutput="vscode-notebook-cell-output",v.vscodeInteractive="vscode-interactive",v.vscodeInteractiveInput="vscode-interactive-input",v.vscodeSettings="vscode-settings",v.vscodeWorkspaceTrust="vscode-workspace-trust",v.vscodeTerminal="vscode-terminal",v.vscodeInteractiveSesssion="vscode-chat-editor",v.webviewPanel="webview-panel",v.vscodeWebview="vscode-webview",v.extension="extension",v.vscodeFileResource="vscode-file",v.tmp="tmp",v.vsls="vsls",v.vscodeSourceControl="vscode-scm"})(R||(e.Schemas=R={})),e.connectionTokenCookieName="vscode-tkn",e.connectionTokenQueryName="tkn";class T{constructor(){this.a=Object.create(null),this.b=Object.create(null),this.c=Object.create(null),this.d="http",this.e=null,this.f=`/${R.vscodeRemoteResource}`}setPreferredWebSchema(w){this.d=w}setDelegate(w){this.e=w}setServerRootPath(w){this.f=`${w}/${R.vscodeRemoteResource}`}set(w,D,z){this.a[w]=D,this.b[w]=z}setConnectionToken(w,D){this.c[w]=D}getPreferredWebSchema(){return this.d}rewrite(w){if(this.e)try{return this.e(w)}catch(n){return A.onUnexpectedError(n),w}const D=w.authority;let z=this.a[D];z&&z.indexOf(":")!==-1&&z.indexOf("[")===-1&&(z=`[${z}]`);const B=this.b[D],s=this.c[D];let o=`path=${encodeURIComponent(w.path)}`;return typeof s=="string"&&(o+=`&${e.connectionTokenQueryName}=${encodeURIComponent(s)}`),L.URI.from({scheme:O.isWeb?this.d:R.vscodeRemoteResource,authority:`${z}:${B}`,path:this.f,query:o})}}e.RemoteAuthorities=new T,e.builtinExtensionsPath="vs/../../extensions",e.nodeModulesPath="vs/../../node_modules",e.nodeModulesAsarPath="vs/../../node_modules.asar",e.nodeModulesAsarUnpackedPath="vs/../../node_modules.asar.unpacked";class I{asBrowserUri(w){const D=this.b(w,x);return this.uriToBrowserUri(D)}uriToBrowserUri(w){return w.scheme===R.vscodeRemote?e.RemoteAuthorities.rewrite(w):w.scheme===R.file&&(O.isNative||O.isWebWorker&&O.globals.origin===`${R.vscodeFileResource}://${I.a}`)?w.with({scheme:R.vscodeFileResource,authority:w.authority||I.a,query:null,fragment:null}):w}asFileUri(w){const D=this.b(w,x);return this.uriToFileUri(D)}uriToFileUri(w){return w.scheme===R.vscodeFileResource?w.with({scheme:R.file,authority:w.authority!==I.a?w.authority:null,query:null,fragment:null}):w}b(w,D){return L.URI.isUri(w)?w:L.URI.parse(D.toUrl(w))}}I.a="vscode-app",e.FileAccess=new I;var q;(function(v){const w=new Map([["1",{"Cross-Origin-Opener-Policy":"same-origin"}],["2",{"Cross-Origin-Embedder-Policy":"require-corp"}],["3",{"Cross-Origin-Opener-Policy":"same-origin","Cross-Origin-Embedder-Policy":"require-corp"}]]);v.CoopAndCoep=Object.freeze(w.get("3"));const D="vscode-coi";function z(s){let o;typeof s=="string"?o=new URL(s).searchParams:s instanceof URL?o=s.searchParams:L.URI.isUri(s)&&(o=new URL(s.toString(!0)).searchParams);const n=o?.get(D);if(n)return w.get(n)}v.getHeadersFromQuery=z;function B(s,o,n){if(!globalThis.crossOriginIsolated)return;const u=o&&n?"3":n?"2":"1";s instanceof URLSearchParams?s.set(D,u):s[D]=u}v.addSearchParam=B})(q||(e.COI=q={}))}),define(ie[7],se([0,1,5,12,3,2,4,6]),function(x,e,A,O,L,R,T,I){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.toLocalResource=e.DataUri=e.distinctParents=e.addTrailingPathSeparator=e.removeTrailingPathSeparator=e.hasTrailingPathSeparator=e.isEqualAuthority=e.isAbsolutePath=e.resolvePath=e.relativePath=e.normalizePath=e.joinPath=e.dirname=e.extname=e.basename=e.basenameOrAuthority=e.getComparisonKey=e.isEqualOrParent=e.isEqual=e.extUriIgnorePathCase=e.extUriBiasedIgnorePathCase=e.extUri=e.ExtUri=e.originalFSPath=void 0;function q(B){return(0,I.uriToFsPath)(B,!0)}e.originalFSPath=q;class v{constructor(s){this.a=s}compare(s,o,n=!1){return s===o?0:(0,T.compare)(this.getComparisonKey(s,n),this.getComparisonKey(o,n))}isEqual(s,o,n=!1){return s===o?!0:!s||!o?!1:this.getComparisonKey(s,n)===this.getComparisonKey(o,n)}getComparisonKey(s,o=!1){return s.with({path:this.a(s)?s.path.toLowerCase():void 0,fragment:o?null:void 0}).toString()}ignorePathCasing(s){return this.a(s)}isEqualOrParent(s,o,n=!1){if(s.scheme===o.scheme){if(s.scheme===O.Schemas.file)return A.isEqualOrParent(q(s),q(o),this.a(s))&&s.query===o.query&&(n||s.fragment===o.fragment);if((0,e.isEqualAuthority)(s.authority,o.authority))return A.isEqualOrParent(s.path,o.path,this.a(s),"/")&&s.query===o.query&&(n||s.fragment===o.fragment)}return!1}joinPath(s,...o){return I.URI.joinPath(s,...o)}basenameOrAuthority(s){return(0,e.basename)(s)||s.authority}basename(s){return L.posix.basename(s.path)}extname(s){return L.posix.extname(s.path)}dirname(s){if(s.path.length===0)return s;let o;return s.scheme===O.Schemas.file?o=I.URI.file(L.dirname(q(s))).path:(o=L.posix.dirname(s.path),s.authority&&o.length&&o.charCodeAt(0)!==47&&(console.error(`dirname("${s.toString})) resulted in a relative path`),o="/")),s.with({path:o})}normalizePath(s){if(!s.path.length)return s;let o;return s.scheme===O.Schemas.file?o=I.URI.file(L.normalize(q(s))).path:o=L.posix.normalize(s.path),s.with({path:o})}relativePath(s,o){if(s.scheme!==o.scheme||!(0,e.isEqualAuthority)(s.authority,o.authority))return;if(s.scheme===O.Schemas.file){const m=L.relative(q(s),q(o));return R.isWindows?A.toSlashes(m):m}let n=s.path||"/";const u=o.path||"/";if(this.a(s)){let m=0;for(const c=Math.min(n.length,u.length);m<c&&!(n.charCodeAt(m)!==u.charCodeAt(m)&&n.charAt(m).toLowerCase()!==u.charAt(m).toLowerCase());m++);n=u.substr(0,m)+n.substr(m)}return L.posix.relative(n,u)}resolvePath(s,o){if(s.scheme===O.Schemas.file){const n=I.URI.file(L.resolve(q(s),o));return s.with({authority:n.authority,path:n.path})}return o=A.toPosixPath(o),s.with({path:L.posix.resolve(s.path,o)})}isAbsolutePath(s){return!!s.path&&s.path[0]==="/"}isEqualAuthority(s,o){return s===o||s!==void 0&&o!==void 0&&(0,T.equalsIgnoreCase)(s,o)}hasTrailingPathSeparator(s,o=L.sep){if(s.scheme===O.Schemas.file){const n=q(s);return n.length>A.getRoot(n).length&&n[n.length-1]===o}else{const n=s.path;return n.length>1&&n.charCodeAt(n.length-1)===47&&!/^[a-zA-Z]:(\/$|\\$)/.test(s.fsPath)}}removeTrailingPathSeparator(s,o=L.sep){return(0,e.hasTrailingPathSeparator)(s,o)?s.with({path:s.path.substr(0,s.path.length-1)}):s}addTrailingPathSeparator(s,o=L.sep){let n=!1;if(s.scheme===O.Schemas.file){const u=q(s);n=u!==void 0&&u.length===A.getRoot(u).length&&u[u.length-1]===o}else{o="/";const u=s.path;n=u.length===1&&u.charCodeAt(u.length-1)===47}return!n&&!(0,e.hasTrailingPathSeparator)(s,o)?s.with({path:s.path+"/"}):s}}e.ExtUri=v,e.extUri=new v(()=>!1),e.extUriBiasedIgnorePathCase=new v(B=>B.scheme===O.Schemas.file?!R.isLinux:!0),e.extUriIgnorePathCase=new v(B=>!0),e.isEqual=e.extUri.isEqual.bind(e.extUri),e.isEqualOrParent=e.extUri.isEqualOrParent.bind(e.extUri),e.getComparisonKey=e.extUri.getComparisonKey.bind(e.extUri),e.basenameOrAuthority=e.extUri.basenameOrAuthority.bind(e.extUri),e.basename=e.extUri.basename.bind(e.extUri),e.extname=e.extUri.extname.bind(e.extUri),e.dirname=e.extUri.dirname.bind(e.extUri),e.joinPath=e.extUri.joinPath.bind(e.extUri),e.normalizePath=e.extUri.normalizePath.bind(e.extUri),e.relativePath=e.extUri.relativePath.bind(e.extUri),e.resolvePath=e.extUri.resolvePath.bind(e.extUri),e.isAbsolutePath=e.extUri.isAbsolutePath.bind(e.extUri),e.isEqualAuthority=e.extUri.isEqualAuthority.bind(e.extUri),e.hasTrailingPathSeparator=e.extUri.hasTrailingPathSeparator.bind(e.extUri),e.removeTrailingPathSeparator=e.extUri.removeTrailingPathSeparator.bind(e.extUri),e.addTrailingPathSeparator=e.extUri.addTrailingPathSeparator.bind(e.extUri);function w(B,s){const o=[];for(let n=0;n<B.length;n++){const u=s(B[n]);B.some((m,c)=>c===n?!1:(0,e.isEqualOrParent)(u,s(m)))||o.push(B[n])}return o}e.distinctParents=w;var D;(function(B){B.META_DATA_LABEL="label",B.META_DATA_DESCRIPTION="description",B.META_DATA_SIZE="size",B.META_DATA_MIME="mime";function s(o){const n=new Map;o.path.substring(o.path.indexOf(";")+1,o.path.lastIndexOf(";")).split(";").forEach(c=>{const[W,Y]=c.split(":");W&&Y&&n.set(W,Y)});const m=o.path.substring(0,o.path.indexOf(";"));return m&&n.set(B.META_DATA_MIME,m),n}B.parseMetaData=s})(D||(e.DataUri=D={}));function z(B,s,o){if(s){let n=B.path;return n&&n[0]!==L.posix.sep&&(n=L.posix.sep+n),B.with({scheme:o,authority:s,path:n})}return B.with({scheme:o})}e.toLocalResource=z}),define(ie[8],se([0,1,14,13,18,19,7,2,11]),function(x,e,A,O,L,R,T,I,q){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createCancelableAsyncIterable=e.CancelableAsyncIterableObject=e.AsyncIterableObject=e.Promises=e.DeferredPromise=e.IntervalCounter=e.TaskSequentializer=e.retry=e.IdleValue=e.runWhenIdle=e.ThrottledWorker=e.RunOnceWorker=e.ProcessTimeRunOnceScheduler=e.RunOnceScheduler=e.IntervalTimer=e.TimeoutTimer=e.ResourceQueue=e.Queue=e.Limiter=e.firstParallel=e.first=e.sequence=e.disposableTimeout=e.timeout=e.AutoOpenBarrier=e.Barrier=e.ThrottledDelayer=e.Delayer=e.SequencerByKey=e.Sequencer=e.Throttler=e.asPromise=e.raceTimeout=e.raceCancellablePromises=e.raceCancellationError=e.raceCancellation=e.createCancelablePromise=e.isThenable=void 0;function v(a){return!!a&&typeof a.then=="function"}e.isThenable=v;function w(a){const t=new A.CancellationTokenSource,i=a(t.token),l=new Promise((d,k)=>{const H=t.token.onCancellationRequested(()=>{H.dispose(),t.dispose(),k(new O.CancellationError)});Promise.resolve(i).then(V=>{H.dispose(),t.dispose(),d(V)},V=>{H.dispose(),t.dispose(),k(V)})});return new class{cancel(){t.cancel()}then(d,k){return l.then(d,k)}catch(d){return this.then(void 0,d)}finally(d){return l.finally(d)}}}e.createCancelablePromise=w;function D(a,t,i){return new Promise((l,d)=>{const k=t.onCancellationRequested(()=>{k.dispose(),l(i)});a.then(l,d).finally(()=>k.dispose())})}e.raceCancellation=D;function z(a,t){return new Promise((i,l)=>{const d=t.onCancellationRequested(()=>{d.dispose(),l(new O.CancellationError)});a.then(i,l).finally(()=>d.dispose())})}e.raceCancellationError=z;async function B(a){let t=-1;const i=a.map((l,d)=>l.then(k=>(t=d,k)));try{return await Promise.race(i)}finally{a.forEach((l,d)=>{d!==t&&l.cancel()})}}e.raceCancellablePromises=B;function s(a,t,i){let l;const d=setTimeout(()=>{l?.(void 0),i?.()},t);return Promise.race([a.finally(()=>clearTimeout(d)),new Promise(k=>l=k)])}e.raceTimeout=s;function o(a){return new Promise((t,i)=>{const l=a();v(l)?l.then(t,i):t(l)})}e.asPromise=o;class n{constructor(){this.a=null,this.b=null,this.d=null}queue(t){if(this.a){if(this.d=t,!this.b){const i=()=>{this.b=null;const l=this.queue(this.d);return this.d=null,l};this.b=new Promise(l=>{this.a.then(i,i).then(l)})}return new Promise((i,l)=>{this.b.then(i,l)})}return this.a=t(),new Promise((i,l)=>{this.a.then(d=>{this.a=null,i(d)},d=>{this.a=null,l(d)})})}}e.Throttler=n;class u{constructor(){this.a=Promise.resolve(null)}queue(t){return this.a=this.a.then(()=>t(),()=>t())}}e.Sequencer=u;class m{constructor(){this.a=new Map}queue(t,i){const d=(this.a.get(t)??Promise.resolve()).catch(()=>{}).then(i).finally(()=>{this.a.get(t)===d&&this.a.delete(t)});return this.a.set(t,d),d}}e.SequencerByKey=m;const c=(a,t)=>{let i=!0;const l=setTimeout(()=>{i=!1,t()},a);return{isTriggered:()=>i,dispose:()=>{clearTimeout(l),i=!1}}},W=a=>{let t=!0;return queueMicrotask(()=>{t&&(t=!1,a())}),{isTriggered:()=>t,dispose:()=>{t=!1}}};class Y{constructor(t){this.defaultDelay=t,this.a=null,this.b=null,this.d=null,this.f=null,this.g=null}trigger(t,i=this.defaultDelay){this.g=t,this.h(),this.b||(this.b=new Promise((d,k)=>{this.d=d,this.f=k}).then(()=>{if(this.b=null,this.d=null,this.g){const d=this.g;return this.g=null,d()}}));const l=()=>{this.a=null,this.d?.(null)};return this.a=i===q.MicrotaskDelay?W(l):c(i,l),this.b}isTriggered(){return!!this.a?.isTriggered()}cancel(){this.h(),this.b&&(this.f?.(new O.CancellationError),this.b=null)}h(){this.a?.dispose(),this.a=null}dispose(){this.cancel()}}e.Delayer=Y;class S{constructor(t){this.a=new Y(t),this.b=new n}trigger(t,i){return this.a.trigger(()=>this.b.queue(t),i)}isTriggered(){return this.a.isTriggered()}cancel(){this.a.cancel()}dispose(){this.a.dispose()}}e.ThrottledDelayer=S;class p{constructor(){this.a=!1,this.b=new Promise((t,i)=>{this.d=t})}isOpen(){return this.a}open(){this.a=!0,this.d(!0)}wait(){return this.b}}e.Barrier=p;class U extends p{constructor(t){super(),this.f=setTimeout(()=>this.open(),t)}open(){clearTimeout(this.f),super.open()}}e.AutoOpenBarrier=U;function G(a,t){return t?new Promise((i,l)=>{const d=setTimeout(()=>{k.dispose(),i()},a),k=t.onCancellationRequested(()=>{clearTimeout(d),k.dispose(),l(new O.CancellationError)})}):w(i=>G(a,i))}e.timeout=G;function Z(a,t=0){const i=setTimeout(a,t);return(0,R.toDisposable)(()=>clearTimeout(i))}e.disposableTimeout=Z;function r(a){const t=[];let i=0;const l=a.length;function d(){return i<l?a[i++]():null}function k(H){H!=null&&t.push(H);const V=d();return V?V.then(k):Promise.resolve(t)}return Promise.resolve(null).then(k)}e.sequence=r;function g(a,t=l=>!!l,i=null){let l=0;const d=a.length,k=()=>{if(l>=d)return Promise.resolve(i);const H=a[l++];return Promise.resolve(H()).then(ae=>t(ae)?Promise.resolve(ae):k())};return k()}e.first=g;function M(a,t=l=>!!l,i=null){if(a.length===0)return Promise.resolve(i);let l=a.length;const d=()=>{l=-1;for(const k of a)k.cancel?.()};return new Promise((k,H)=>{for(const V of a)V.then(ae=>{--l>=0&&t(ae)?(d(),k(ae)):l===0&&k(i)}).catch(ae=>{--l>=0&&(d(),H(ae))})})}e.firstParallel=M;class F{constructor(t){this.a=0,this.d=t,this.f=[],this.b=0,this.g=new L.Emitter}get onDrained(){return this.g.event}get size(){return this.a}queue(t){return this.a++,new Promise((i,l)=>{this.f.push({factory:t,c:i,e:l}),this.h()})}h(){for(;this.f.length&&this.b<this.d;){const t=this.f.shift();this.b++;const i=t.factory();i.then(t.c,t.e),i.then(()=>this.j(),()=>this.j())}}j(){this.a--,this.b--,this.f.length>0?this.h():this.g.fire()}dispose(){this.g.dispose()}}e.Limiter=F;class Q extends F{constructor(){super(1)}}e.Queue=Q;class j{constructor(){this.a=new Map,this.b=new Set}async whenDrained(){if(this.d())return;const t=new h;return this.b.add(t),t.p}d(){for(const[,t]of this.a)if(t.size>0)return!1;return!0}queueFor(t,i=T.extUri){const l=i.getComparisonKey(t);let d=this.a.get(l);return d||(d=new Q,L.Event.once(d.onDrained)(()=>{d?.dispose(),this.a.delete(l),this.f()}),this.a.set(l,d)),d}f(){this.d()&&this.g()}g(){for(const t of this.b)t.complete();this.b.clear()}dispose(){for(const[,t]of this.a)t.dispose();this.a.clear(),this.g()}}e.ResourceQueue=j;class X{constructor(t,i){this.a=-1,typeof t=="function"&&typeof i=="number"&&this.setIfNotSet(t,i)}dispose(){this.cancel()}cancel(){this.a!==-1&&(clearTimeout(this.a),this.a=-1)}cancelAndSet(t,i){this.cancel(),this.a=setTimeout(()=>{this.a=-1,t()},i)}setIfNotSet(t,i){this.a===-1&&(this.a=setTimeout(()=>{this.a=-1,t()},i))}}e.TimeoutTimer=X;class ne{constructor(){this.a=-1}dispose(){this.cancel()}cancel(){this.a!==-1&&(clearInterval(this.a),this.a=-1)}cancelAndSet(t,i){this.cancel(),this.a=setInterval(()=>{t()},i)}}e.IntervalTimer=ne;class _{constructor(t,i){this.b=-1,this.a=t,this.d=i,this.f=this.g.bind(this)}dispose(){this.cancel(),this.a=null}cancel(){this.isScheduled()&&(clearTimeout(this.b),this.b=-1)}schedule(t=this.d){this.cancel(),this.b=setTimeout(this.f,t)}get delay(){return this.d}set delay(t){this.d=t}isScheduled(){return this.b!==-1}flush(){this.isScheduled()&&(this.cancel(),this.h())}g(){this.b=-1,this.a&&this.h()}h(){this.a?.()}}e.RunOnceScheduler=_;class ee{constructor(t,i){i%1e3!==0&&console.warn(`ProcessTimeRunOnceScheduler resolution is 1s, ${i}ms is not a multiple of 1000ms.`),this.a=t,this.b=i,this.d=0,this.f=-1,this.g=this.h.bind(this)}dispose(){this.cancel(),this.a=null}cancel(){this.isScheduled()&&(clearInterval(this.f),this.f=-1)}schedule(t=this.b){t%1e3!==0&&console.warn(`ProcessTimeRunOnceScheduler resolution is 1s, ${t}ms is not a multiple of 1000ms.`),this.cancel(),this.d=Math.ceil(t/1e3),this.f=setInterval(this.g,1e3)}isScheduled(){return this.f!==-1}h(){this.d--,!(this.d>0)&&(clearInterval(this.f),this.f=-1,this.a?.())}}e.ProcessTimeRunOnceScheduler=ee;class re extends _{constructor(t,i){super(t,i),this.j=[]}work(t){this.j.push(t),this.isScheduled()||this.schedule()}h(){const t=this.j;this.j=[],this.a?.(t)}dispose(){this.j=[],super.dispose()}}e.RunOnceWorker=re;class N extends R.Disposable{constructor(t,i){super(),this.g=t,this.h=i,this.a=[],this.b=this.B(new R.MutableDisposable),this.f=!1}get pending(){return this.a.length}work(t){if(this.f)return!1;if(typeof this.g.maxBufferedWork=="number"){if(this.b.value){if(this.pending+t.length>this.g.maxBufferedWork)return!1}else if(this.pending+t.length-this.g.maxWorkChunkSize>this.g.maxBufferedWork)return!1}for(const i of t)this.a.push(i);return this.b.value||this.j(),!0}j(){this.h(this.a.splice(0,this.g.maxWorkChunkSize)),this.a.length>0&&(this.b.value=new _(()=>{this.b.clear(),this.j()},this.g.throttleDelay),this.b.value.schedule())}dispose(){super.dispose(),this.f=!0}}e.ThrottledWorker=N,function(){typeof requestIdleCallback!="function"||typeof cancelIdleCallback!="function"?e.runWhenIdle=a=>{(0,I.setTimeout0)(()=>{if(t)return;const i=Date.now()+15;a(Object.freeze({didTimeout:!0,timeRemaining(){return Math.max(0,i-Date.now())}}))});let t=!1;return{dispose(){t||(t=!0)}}}:e.runWhenIdle=(a,t)=>{const i=requestIdleCallback(a,typeof t=="number"?{timeout:t}:void 0);let l=!1;return{dispose(){l||(l=!0,cancelIdleCallback(i))}}}}();class J{constructor(t){this.d=!1,this.a=()=>{try{this.f=t()}catch(i){this.g=i}finally{this.d=!0}},this.b=(0,e.runWhenIdle)(()=>this.a())}dispose(){this.b.dispose()}get value(){if(this.d||(this.b.dispose(),this.a()),this.g)throw this.g;return this.f}get isInitialized(){return this.d}}e.IdleValue=J;async function K(a,t,i){let l;for(let d=0;d<i;d++)try{return await a()}catch(k){l=k,await G(t)}throw l}e.retry=K;class te{hasPending(t){return this.a?typeof t=="number"?this.a.taskId===t:!!this.a:!1}get pending(){return this.a?.promise}cancelPending(){this.a?.cancel()}setPending(t,i,l){return this.a={taskId:t,cancel:()=>l?.(),promise:i},i.then(()=>this.d(t),()=>this.d(t)),i}d(t){this.a&&t===this.a.taskId&&(this.a=void 0,this.f())}f(){if(this.b){const t=this.b;this.b=void 0,t.run().then(t.promiseResolve,t.promiseReject)}}setNext(t){if(this.b)this.b.run=t;else{let i,l;const d=new Promise((k,H)=>{i=k,l=H});this.b={run:t,promise:d,promiseResolve:i,promiseReject:l}}return this.b.promise}hasNext(){return!!this.b}async join(){return this.b?.promise??this.a?.promise}}e.TaskSequentializer=te;class f{constructor(t,i=()=>Date.now()){this.d=t,this.f=i,this.a=0,this.b=0}increment(){const t=this.f();return t-this.a>this.d&&(this.a=t,this.b=0),this.b++,this.b}}e.IntervalCounter=f;var b;(function(a){a[a.Resolved=0]="Resolved",a[a.Rejected=1]="Rejected"})(b||(b={}));class h{get isRejected(){return this.d?.outcome===1}get isResolved(){return this.d?.outcome===0}get isSettled(){return!!this.d}get value(){return this.d?.outcome===0?this.d?.value:void 0}constructor(){this.p=new Promise((t,i)=>{this.a=t,this.b=i})}complete(t){return new Promise(i=>{this.a(t),this.d={outcome:0,value:t},i()})}error(t){return new Promise(i=>{this.b(t),this.d={outcome:1,value:t},i()})}cancel(){return this.error(new O.CancellationError)}}e.DeferredPromise=h;var C;(function(a){async function t(l){let d;const k=await Promise.all(l.map(H=>H.then(V=>V,V=>{d||(d=V)})));if(typeof d<"u")throw d;return k}a.settled=t;function i(l){return new Promise(async(d,k)=>{try{await l(d,k)}catch(H){k(H)}})}a.withAsyncBody=i})(C||(e.Promises=C={}));var E;(function(a){a[a.Initial=0]="Initial",a[a.DoneOK=1]="DoneOK",a[a.DoneError=2]="DoneError"})(E||(E={}));class y{static fromArray(t){return new y(i=>{i.emitMany(t)})}static fromPromise(t){return new y(async i=>{i.emitMany(await t)})}static fromPromises(t){return new y(async i=>{await Promise.all(t.map(async l=>i.emitOne(await l)))})}static merge(t){return new y(async i=>{await Promise.all(t.map(async l=>{for await(const d of l)i.emitOne(d)}))})}constructor(t){this.a=0,this.b=[],this.d=null,this.f=new L.Emitter,queueMicrotask(async()=>{const i={emitOne:l=>this.g(l),emitMany:l=>this.h(l),reject:l=>this.k(l)};try{await Promise.resolve(t(i)),this.j()}catch(l){this.k(l)}finally{i.emitOne=void 0,i.emitMany=void 0,i.reject=void 0}})}[Symbol.asyncIterator](){let t=0;return{next:async()=>{do{if(this.a===2)throw this.d;if(t<this.b.length)return{done:!1,value:this.b[t++]};if(this.a===1)return{done:!0,value:void 0};await L.Event.toPromise(this.f.event)}while(!0)}}}static map(t,i){return new y(async l=>{for await(const d of t)l.emitOne(i(d))})}map(t){return y.map(this,t)}static filter(t,i){return new y(async l=>{for await(const d of t)i(d)&&l.emitOne(d)})}filter(t){return y.filter(this,t)}static coalesce(t){return y.filter(t,i=>!!i)}coalesce(){return y.coalesce(this)}static async toPromise(t){const i=[];for await(const l of t)i.push(l);return i}toPromise(){return y.toPromise(this)}g(t){this.a===0&&(this.b.push(t),this.f.fire())}h(t){this.a===0&&(this.b=this.b.concat(t),this.f.fire())}j(){this.a===0&&(this.a=1,this.f.fire())}k(t){this.a===0&&(this.a=2,this.d=t,this.f.fire())}}e.AsyncIterableObject=y,y.EMPTY=y.fromArray([]);class $ extends y{constructor(t,i){super(i),this.l=t}cancel(){this.l.cancel()}}e.CancelableAsyncIterableObject=$;function P(a){const t=new A.CancellationTokenSource,i=a(t.token);return new $(t,async l=>{const d=t.token.onCancellationRequested(()=>{d.dispose(),t.dispose(),l.reject(new O.CancellationError)});try{for await(const k of i){if(t.token.isCancellationRequested)return;l.emitOne(k)}d.dispose(),t.dispose()}catch(k){d.dispose(),t.dispose(),l.reject(k)}})}e.createCancelableAsyncIterable=P}),define(ie[9],se([0,1,20,8,5,10,3,2,4]),function(x,e,A,O,L,R,T,I,q){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.patternsEquals=e.getPathTerms=e.getBasenameTerms=e.isRelativePattern=e.parse=e.match=e.splitGlobAware=e.GLOB_SPLIT=e.GLOBSTAR=e.getEmptyExpression=void 0;function v(){return Object.create(null)}e.getEmptyExpression=v,e.GLOBSTAR="**",e.GLOB_SPLIT="/";const w="[/\\\\]",D="[^/\\\\]",z=/\//g;function B(f,b){switch(f){case 0:return"";case 1:return`${D}*?`;default:return`(?:${w}|${D}+${w}${b?`|${w}${D}+`:""})*?`}}function s(f,b){if(!f)return[];const h=[];let C=!1,E=!1,y="";for(const $ of f){switch($){case b:if(!C&&!E){h.push(y),y="";continue}break;case"{":C=!0;break;case"}":C=!1;break;case"[":E=!0;break;case"]":E=!1;break}y+=$}return y&&h.push(y),h}e.splitGlobAware=s;function o(f){if(!f)return"";let b="";const h=s(f,e.GLOB_SPLIT);if(h.every(C=>C===e.GLOBSTAR))b=".*";else{let C=!1;h.forEach((E,y)=>{if(E===e.GLOBSTAR){if(C)return;b+=B(2,y===h.length-1)}else{let $=!1,P="",a=!1,t="";for(const i of E){if(i!=="}"&&$){P+=i;continue}if(a&&(i!=="]"||!t)){let l;i==="-"?l=i:(i==="^"||i==="!")&&!t?l="^":i===e.GLOB_SPLIT?l="":l=(0,q.escapeRegExpCharacters)(i),t+=l;continue}switch(i){case"{":$=!0;continue;case"[":a=!0;continue;case"}":{const d=`(?:${s(P,",").map(k=>o(k)).join("|")})`;b+=d,$=!1,P="";break}case"]":{b+="["+t+"]",a=!1,t="";break}case"?":b+=D;continue;case"*":b+=B(1);continue;default:b+=(0,q.escapeRegExpCharacters)(i)}}y<h.length-1&&(h[y+1]!==e.GLOBSTAR||y+2<h.length)&&(b+=w)}C=E===e.GLOBSTAR})}return b}const n=/^\*\*\/\*\.[\w\.-]+$/,u=/^\*\*\/([\w\.-]+)\/?$/,m=/^{\*\*\/\*?[\w\.-]+\/?(,\*\*\/\*?[\w\.-]+\/?)*}$/,c=/^{\*\*\/\*?[\w\.-]+(\/(\*\*)?)?(,\*\*\/\*?[\w\.-]+(\/(\*\*)?)?)*}$/,W=/^\*\*((\/[\w\.-]+)+)\/?$/,Y=/^([\w\.-]+(\/[\w\.-]+)*)\/?$/,S=new R.LRUCache(1e4),p=function(){return!1},U=function(){return null};function G(f,b){if(!f)return U;let h;typeof f!="string"?h=f.pattern:h=f,h=h.trim();const C=`${h}_${!!b.trimForExclusions}`;let E=S.get(C);if(E)return Z(E,f);let y;return n.test(h)?E=g(h.substr(4),h):(y=u.exec(r(h,b)))?E=M(y[1],h):(b.trimForExclusions?c:m).test(h)?E=F(h,b):(y=W.exec(r(h,b)))?E=Q(y[1].substr(1),h,!0):(y=Y.exec(r(h,b)))?E=Q(y[1],h,!1):E=j(h),S.set(C,E),Z(E,f)}function Z(f,b){if(typeof b=="string")return f;const h=function(C,E){return(0,L.isEqualOrParent)(C,b.base,!I.isLinux)?f((0,q.ltrim)(C.substr(b.base.length),T.sep),E):null};return h.allBasenames=f.allBasenames,h.allPaths=f.allPaths,h.basenames=f.basenames,h.patterns=f.patterns,h}function r(f,b){return b.trimForExclusions&&f.endsWith("/**")?f.substr(0,f.length-2):f}function g(f,b){return function(h,C){return typeof h=="string"&&h.endsWith(f)?b:null}}function M(f,b){const h=`/${f}`,C=`\\${f}`,E=function($,P){return typeof $!="string"?null:P?P===f?b:null:$===f||$.endsWith(h)||$.endsWith(C)?b:null},y=[f];return E.basenames=y,E.patterns=[b],E.allBasenames=y,E}function F(f,b){const h=K(f.slice(1,-1).split(",").map(P=>G(P,b)).filter(P=>P!==U),f),C=h.length;if(!C)return U;if(C===1)return h[0];const E=function(P,a){for(let t=0,i=h.length;t<i;t++)if(h[t](P,a))return f;return null},y=h.find(P=>!!P.allBasenames);y&&(E.allBasenames=y.allBasenames);const $=h.reduce((P,a)=>a.allPaths?P.concat(a.allPaths):P,[]);return $.length&&(E.allPaths=$),E}function Q(f,b,h){const C=T.sep===T.posix.sep,E=C?f:f.replace(z,T.sep),y=T.sep+E,$=T.posix.sep+f;let P;return h?P=function(a,t){return typeof a=="string"&&(a===E||a.endsWith(y)||!C&&(a===f||a.endsWith($)))?b:null}:P=function(a,t){return typeof a=="string"&&(a===E||!C&&a===f)?b:null},P.allPaths=[(h?"*/":"./")+f],P}function j(f){try{const b=new RegExp(`^${o(f)}$`);return function(h){return b.lastIndex=0,typeof h=="string"&&b.test(h)?f:null}}catch{return U}}function X(f,b,h){return!f||typeof b!="string"?!1:ne(f)(b,void 0,h)}e.match=X;function ne(f,b={}){if(!f)return p;if(typeof f=="string"||_(f)){const h=G(f,b);if(h===U)return p;const C=function(E,y){return!!h(E,y)};return h.allBasenames&&(C.allBasenames=h.allBasenames),h.allPaths&&(C.allPaths=h.allPaths),C}return N(f,b)}e.parse=ne;function _(f){const b=f;return b?typeof b.base=="string"&&typeof b.pattern=="string":!1}e.isRelativePattern=_;function ee(f){return f.allBasenames||[]}e.getBasenameTerms=ee;function re(f){return f.allPaths||[]}e.getPathTerms=re;function N(f,b){const h=K(Object.getOwnPropertyNames(f).map(P=>J(P,f[P],b)).filter(P=>P!==U)),C=h.length;if(!C)return U;if(!h.some(P=>!!P.requiresSiblings)){if(C===1)return h[0];const P=function(i,l){let d;for(let k=0,H=h.length;k<H;k++){const V=h[k](i,l);if(typeof V=="string")return V;(0,O.isThenable)(V)&&(d||(d=[]),d.push(V))}return d?(async()=>{for(const k of d){const H=await k;if(typeof H=="string")return H}return null})():null},a=h.find(i=>!!i.allBasenames);a&&(P.allBasenames=a.allBasenames);const t=h.reduce((i,l)=>l.allPaths?i.concat(l.allPaths):i,[]);return t.length&&(P.allPaths=t),P}const E=function(P,a,t){let i,l;for(let d=0,k=h.length;d<k;d++){const H=h[d];H.requiresSiblings&&t&&(a||(a=(0,T.basename)(P)),i||(i=a.substr(0,a.length-(0,T.extname)(P).length)));const V=H(P,a,i,t);if(typeof V=="string")return V;(0,O.isThenable)(V)&&(l||(l=[]),l.push(V))}return l?(async()=>{for(const d of l){const k=await d;if(typeof k=="string")return k}return null})():null},y=h.find(P=>!!P.allBasenames);y&&(E.allBasenames=y.allBasenames);const $=h.reduce((P,a)=>a.allPaths?P.concat(a.allPaths):P,[]);return $.length&&(E.allPaths=$),E}function J(f,b,h){if(b===!1)return U;const C=G(f,h);if(C===U)return U;if(typeof b=="boolean")return C;if(b){const E=b.when;if(typeof E=="string"){const y=($,P,a,t)=>{if(!t||!C($,P))return null;const i=E.replace("$(basename)",()=>a),l=t(i);return(0,O.isThenable)(l)?l.then(d=>d?f:null):l?f:null};return y.requiresSiblings=!0,y}}return C}function K(f,b){const h=f.filter(P=>!!P.basenames);if(h.length<2)return f;const C=h.reduce((P,a)=>{const t=a.basenames;return t?P.concat(t):P},[]);let E;if(b){E=[];for(let P=0,a=C.length;P<a;P++)E.push(b)}else E=h.reduce((P,a)=>{const t=a.patterns;return t?P.concat(t):P},[]);const y=function(P,a){if(typeof P!="string")return null;if(!a){let i;for(i=P.length;i>0;i--){const l=P.charCodeAt(i-1);if(l===47||l===92)break}a=P.substr(i)}const t=C.indexOf(a);return t!==-1?E[t]:null};y.basenames=C,y.patterns=E,y.allBasenames=C;const $=f.filter(P=>!P.basenames);return $.push(y),$}function te(f,b){return(0,A.equals)(f,b,(h,C)=>typeof h=="string"&&typeof C=="string"?h===C:typeof h!="string"&&typeof C!="string"?h.base===C.base&&h.pattern===C.pattern:!1)}e.patternsEquals=te}),define(ie[15],se([0,1,21]),function(x,e,A){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getFileResults=void 0;const O=(L,R,T)=>{let I;if(L[0]===255&&L[1]===254)I=new TextDecoder("utf-16le").decode(L);else if(L[0]===254&&L[1]===255)I=new TextDecoder("utf-16be").decode(L);else if(I=new TextDecoder("utf8").decode(L),I.slice(0,1e3).includes("\uFFFD")&&L.includes(0))return[];const q=[],v=[];let w=null,D=T.remainingResultQuota;for(;D>=0&&(w=R.exec(I));)v.push({matchStartIndex:w.index,matchedText:w[0]}),D--;if(v.length){const z=new Set,B=new Set,s=[],o=W=>I.slice(s[W].start,s[W].end);let n=0,u=null;const m=/\r?\n/g;for(;u=m.exec(I);)s.push({start:n,end:u.index}),n=u.index+u[0].length;n<I.length&&s.push({start:n,end:I.length});let c=0;for(const{matchStartIndex:W,matchedText:Y}of v){if(D<0)break;for(;s[c+1]&&W>s[c].end;)c++;let S=c;for(;s[S+1]&&W+Y.length>s[S].end;)S++;if(T.beforeContext)for(let g=Math.max(0,c-T.beforeContext);g<c;g++)z.add(g);let p="",U=0;for(let g=c;g<=S;g++){let M=o(g);T.previewOptions?.charsPerLine&&M.length>T.previewOptions.charsPerLine&&(U=Math.max(W-s[c].start-20,0),M=M.substr(U,T.previewOptions.charsPerLine)),p+=`${M}
`,B.add(g)}const G=new A.Range(c,W-s[c].start,S,W+Y.length-s[S].start),Z=new A.Range(0,W-s[c].start-U,S-c,W+Y.length-s[S].start-(S===c?U:0)),r={ranges:G,preview:{text:p,matches:Z}};if(q.push(r),T.afterContext)for(let g=S+1;g<=Math.min(S+T.afterContext,s.length-1);g++)z.add(g)}for(const W of z)B.has(W)||q.push({text:o(W),lineNumber:W+1})}return q};e.getFileResults=O}),define(ie[16],se([0,1,9]),function(x,e,A){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.IgnoreFile=void 0;class O{constructor(R,T,I){if(this.b=T,this.c=I,T[T.length-1]==="\\")throw Error("Unexpected path format, do not use trailing backslashes");T[T.length-1]!=="/"&&(T+="/"),this.a=this.e(R,this.b,this.c)}updateContents(R){this.a=this.e(R,this.b,this.c)}isPathIncludedInTraversal(R,T){if(R[0]!=="/"||R[R.length-1]==="/")throw Error("Unexpected path format, expectred to begin with slash and end without. got:"+R);return!this.a(R,T)}isArbitraryPathIgnored(R,T){if(R[0]!=="/"||R[R.length-1]==="/")throw Error("Unexpected path format, expectred to begin with slash and end without. got:"+R);const I=R.split("/").filter(w=>w);let q=!1,v="";for(let w=0;w<I.length;w++){const D=w===I.length-1,z=I[w];if(v=v+"/"+z,!this.isPathIncludedInTraversal(v,D?T:!0)){q=!0;break}}return q}d(R,T,I){const q=R.map(w=>this.f(w,T)),v=Object.create(null);for(const w of q)v[w]=!0;return A.parse(v,{trimForExclusions:I})}e(R,T,I){const q=R.split(`
`).map(c=>c.trim()).filter(c=>c&&c[0]!=="#"),v=q.filter(c=>!c.endsWith("/")),w=v.filter(c=>!c.includes("!")),D=this.d(w,T,!0),z=v.filter(c=>c.includes("!")).map(c=>c.replace(/!/g,"")),B=this.d(z,T,!1),s=q.filter(c=>!c.includes("!")),o=this.d(s,T,!0),n=q.filter(c=>c.includes("!")).map(c=>c.replace(/!/g,"")),u=this.d(n,T,!1);return(c,W)=>c.startsWith(T)?W&&o(c)&&!u(c)||D(c)&&!B(c)?!0:I?I.a(c,W):!1:!1}f(R,T){const I=R.indexOf("/");return I===-1||I===R.length-1?R="**/"+R:(I===0?T.slice(-1)==="/"&&(R=R.slice(1)):T.slice(-1)!=="/"&&(R="/"+R),R=T+R),R}}e.IgnoreFile=O}),define(ie[22],se([0,1,9,6,3,14,15,16,4,8,7]),function(x,e,A,O,L,R,T,I,q,v,w){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LocalFileSearchSimpleWorker=e.create=void 0;const D=!1,z=+new Date,B={},s=async(S,p)=>{if(!D)return p();const U=Date.now(),G=(B[S]??0)+1;console.info(S,G,"starting",Math.round((U-z)*10)/1e4),B[S]=G;const Z=await p(),r=Date.now();return console.info(S,G,"took",r-U),Z};function o(S){return new n(S)}e.create=o;class n{constructor(p){this.d=p,this.cancellationTokens=new Map}cancelQuery(p){this.cancellationTokens.get(p)?.cancel()}g(p){const U=new R.CancellationTokenSource;return this.cancellationTokens.set(p,U),U}async listDirectory(p,U,G,Z,r){const g=m(G),M=new w.ExtUri(()=>Z),F=this.g(r),Q=[];let j=!1,X=0;const ne=U.maxResults||512,_=U.filePattern?ee=>U.filePattern.split("").every(re=>ee.includes(re)):ee=>!0;return await s("listDirectory",()=>this.h(p,c(U),g,M,ee=>{if(_(ee.name))return X++,ne&&X>ne&&(j=!0,F.cancel()),Q.push(ee.path)},F.token)),{results:Q,limitHit:j}}async searchDirectory(p,U,G,Z,r){const g=m(G),M=new w.ExtUri(()=>Z);return s("searchInFiles",async()=>{const F=this.g(r),Q=[],j=u(U.contentPattern),X=[];let ne=0,_=0;const ee=!1,re=async N=>{if(F.token.isCancellationRequested)return;ne++;const J=await N.resolve();if(F.token.isCancellationRequested)return;const K=new Uint8Array(J),te=(0,T.getFileResults)(K,j,{afterContext:U.afterContext??0,beforeContext:U.beforeContext??0,previewOptions:U.previewOptions,remainingResultQuota:U.maxResults?U.maxResults-_:1e4});if(te.length){_+=te.length,U.maxResults&&_>U.maxResults&&F.cancel();const f={resource:O.URI.joinPath(g.folder,N.path),results:te};this.d.sendTextSearchMatch(f,r),Q.push(f)}};return await s("walkFolderToResolve",()=>this.h(p,c(U),g,M,async N=>X.push(re(N)),F.token)),await s("resolveOngoingProcesses",()=>Promise.all(X)),D&&console.log("Searched in",ne,"files"),{results:Q,limitHit:ee}})}async h(p,U,G,Z,r,g){const M=A.parse(G.excludePattern??{},{trimForExclusions:!0}),F=(N,J,K)=>(N=N.slice(1),!!(M(N,J,K)||W(U,N))),Q=(N,J,K)=>(N=N.slice(1),!(M(N,J,K)||!Y(U,N,Z))),j=(N,J)=>({type:"file",name:N.name,path:J,resolve:()=>N.getFile().then(te=>te.arrayBuffer())}),X=N=>N.kind==="directory",ne=N=>N.kind==="file",_=async(N,J,K)=>{if(!G.disregardIgnoreFiles){const f=await Promise.all([N.getFileHandle(".gitignore").catch(b=>{}),N.getFileHandle(".ignore").catch(b=>{})]);await Promise.all(f.map(async b=>{if(!b)return;const h=new TextDecoder("utf8").decode(new Uint8Array(await(await b.getFile()).arrayBuffer()));K=new I.IgnoreFile(h,J,K)}))}const te=v.Promises.withAsyncBody(async f=>{const b=[],h=[],C=[],E=new Set;for await(const y of N.entries())C.push(y),E.add(y[0]);for(const[y,$]of C){if(g.isCancellationRequested)break;const P=J+y;if(K&&!K.isPathIncludedInTraversal(P,$.kind==="directory"))continue;const a=t=>E.has(t);X($)&&!F(P,y,a)?h.push(_($,P+"/",K)):ne($)&&Q(P,y,a)&&b.push(j($,P))}f([...await Promise.all(h),...b])});return{type:"dir",name:N.name,entries:te}},ee=async(N,J)=>{g.isCancellationRequested||await Promise.all((await N.entries).sort((K,te)=>-(K.type==="dir"?0:1)+(te.type==="dir"?0:1)).map(async K=>K.type==="dir"?ee(K,J):J(K)))},re=await s("process",()=>_(p,"/"));await s("resolve",()=>ee(re,r))}}e.LocalFileSearchSimpleWorker=n;function u(S){return(0,q.createRegExp)(S.pattern,!!S.isRegExp,{wholeWord:S.isWordMatch,global:!0,matchCase:S.isCaseSensitive,multiline:!0,unicode:!0})}function m(S){return{...S,folder:O.URI.revive(S.folder)}}function c(S){return{...S,extraFileResources:S.extraFileResources?.map(p=>O.URI.revive(p)),folderQueries:S.folderQueries.map(p=>m(p))}}function W(S,p){return!!(S.excludePattern&&A.match(S.excludePattern,p))}function Y(S,p,U){return S.excludePattern&&A.match(S.excludePattern,p)?!1:S.includePattern||S.usingSearchPaths?S.includePattern&&A.match(S.includePattern,p)?!0:S.usingSearchPaths?!!S.folderQueries&&S.folderQueries.some(G=>{const Z=G.folder,r=O.URI.file(p);if(U.isEqualOrParent(r,Z)){const g=L.relative(Z.path,r.path);return!G.includePattern||!!A.match(G.includePattern,g)}else return!1}):!1:!0}})}).call(this);

//# sourceMappingURL=https://ticino.blob.core.windows.net/sourcemaps/2d416df5f00253f5ebd60d2f08508a440747fd8d/core/vs/workbench/services/search/worker/localFileSearch.js.map
