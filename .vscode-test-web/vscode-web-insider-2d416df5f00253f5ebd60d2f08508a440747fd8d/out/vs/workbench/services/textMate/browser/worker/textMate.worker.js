/*!--------------------------------------------------------
 * Copyright (C) Microsoft Corporation. All rights reserved.
 *--------------------------------------------------------*/(function(){var p=["require","exports","vs/base/common/lifecycle","vs/base/common/observableImpl/logging","vs/base/common/errors","vs/base/common/platform","vs/base/common/observableImpl/base","vs/editor/common/tokens/lineTokens","vs/base/common/observableImpl/autorun","vs/base/common/observableImpl/derived","vs/base/common/observable","vs/base/common/buffer","vs/editor/common/core/eolCounter","vs/editor/common/encodedTokenAttributes","vs/editor/common/core/lineRange","vs/editor/common/tokens/contiguousMultilineTokensBuilder","vs/base/common/uri","vs/base/common/resources","vs/base/common/async","vs/editor/common/languages/nullTokenize","vs/base/common/observableImpl/utils","vs/base/common/stream","vs/base/common/symbols","vs/editor/common/model/fixedArray","vs/base/common/arrays","vs/editor/common/tokens/contiguousTokensEditing","vs/editor/common/tokens/contiguousMultilineTokens","vs/base/common/extpath","vs/base/common/path","vs/base/common/strings","vs/base/common/network","vs/base/common/event","vs/editor/common/languages","vs/editor/common/model/textModelTokens","vs/workbench/services/textMate/browser/tokenizationSupport/textMateTokenizationSupport","vs/workbench/services/textMate/browser/tokenizationSupport/tokenizationSupportWithLineLimit","vs/workbench/services/textMate/common/TMScopeRegistry","vs/workbench/services/textMate/common/TMGrammarFactory","vs/workbench/services/textMate/browser/worker/textMateWorkerModel","vs/base/common/lazy","vs/editor/common/core/position","vs/base/common/types","vs/base/common/cancellation","vs/base/common/stopwatch","vs/editor/common/core/offsetRange","vs/editor/common/model/mirrorTextModel","vscode-textmate","vs/workbench/services/textMate/browser/worker/textMate.worker"],K=function(F){for(var e=[],y=0,E=F.length;y<E;y++)e[y]=p[F[y]];return e};define(p[3],K([0,1]),function(F,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ConsoleObservableLogger=e.getLogger=e.setLogger=void 0;let y;function E(a){y=a}e.setLogger=E;function w(){return y}e.getLogger=w;class I{constructor(){this.a=0,this.d=new WeakMap}b(o){return r([h(v("|  ",this.a)),o])}c(o){return o.didChange?[h(" "),i(n(o.oldValue,70),{color:"red",strikeThrough:!0}),h(" "),i(n(o.newValue,60),{color:"green"})]:[h(" (unchanged)")]}handleObservableChanged(o,T){console.log(...this.b([t("observable value changed"),i(o.debugName,{color:"BlueViolet"}),...this.c(T)]))}formatChanges(o){if(o.size!==0)return i(" (changed deps: "+[...o].map(T=>T.debugName).join(", ")+")",{color:"gray"})}handleDerivedCreated(o){const T=o.handleChange;this.d.set(o,new Set),o.handleChange=(M,D)=>(this.d.get(o).add(M),T.apply(o,[M,D]))}handleDerivedRecomputed(o,T){const M=this.d.get(o);console.log(...this.b([t("derived recomputed"),i(o.debugName,{color:"BlueViolet"}),...this.c(T),this.formatChanges(M)])),M.clear()}handleFromEventObservableTriggered(o,T){console.log(...this.b([t("observable from event triggered"),i(o.debugName,{color:"BlueViolet"}),...this.c(T)]))}handleAutorunCreated(o){const T=o.handleChange;this.d.set(o,new Set),o.handleChange=(M,D)=>(this.d.get(o).add(M),T.apply(o,[M,D]))}handleAutorunTriggered(o){const T=this.d.get(o);console.log(...this.b([t("autorun"),i(o.debugName,{color:"BlueViolet"}),this.formatChanges(T)])),T.clear()}handleBeginTransaction(o){let T=o.getDebugName();T===void 0&&(T=""),console.log(...this.b([t("transaction"),i(T,{color:"BlueViolet"})])),this.a++}handleEndTransaction(){this.a--}}e.ConsoleObservableLogger=I;function r(a){const o=new Array,M={};let D="";function U(f){if("length"in f)for(const b of f)b&&U(b);else"text"in f?(D+=`%c${f.text}`,o.push(f.style),f.data&&Object.assign(M,f.data)):"data"in f&&Object.assign(M,f.data)}U(a);const k=[D,...o];return Object.keys(M).length>0&&k.push(M),k}function h(a){return i(a,{color:"black"})}function t(a){return i(l(`${a}: `,10),{color:"black",bold:!0})}function i(a,o={color:"black"}){function T(D){return Object.entries(D).reduce((U,[k,f])=>`${U}${k}:${f};`,"")}const M={color:o.color};return o.strikeThrough&&(M["text-decoration"]="line-through"),o.bold&&(M["font-weight"]="bold"),{text:a,style:T(M)}}function n(a,o){switch(typeof a){case"number":return""+a;case"string":return a.length+2<=o?`"${a}"`:`"${a.substr(0,o-7)}"+...`;case"boolean":return a?"true":"false";case"undefined":return"undefined";case"object":return a===null?"null":Array.isArray(a)?s(a,o):d(a,o);case"symbol":return a.toString();case"function":return`[[Function${a.name?" "+a.name:""}]]`;default:return""+a}}function s(a,o){let T="[ ",M=!0;for(const D of a){if(M||(T+=", "),T.length-5>o){T+="...";break}M=!1,T+=`${n(D,o-T.length)}`}return T+=" ]",T}function d(a,o){let T="{ ",M=!0;for(const[D,U]of Object.entries(a)){if(M||(T+=", "),T.length-5>o){T+="...";break}M=!1,T+=`${D}: ${n(U,o-T.length)}`}return T+=" }",T}function v(a,o){let T="";for(let M=1;M<=o;M++)T+=a;return T}function l(a,o){for(;a.length<o;)a+=" ";return a}}),define(p[8],K([0,1,4,2,3]),function(F,e,y,E,w){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.autorunDelta=e.AutorunObserver=e.autorunWithStore=e.autorunHandleChanges=e.autorun=void 0;function I(s,d){return new i(s,d,void 0,void 0)}e.autorun=I;function r(s,d,v){return new i(s,v,d.createEmptyChangeSummary,d.handleChange)}e.autorunHandleChanges=r;function h(s,d){const v=new E.DisposableStore,l=I(d,a=>{v.clear(),s(a,v)});return(0,E.toDisposable)(()=>{l.dispose(),v.dispose()})}e.autorunWithStore=h;var t;(function(s){s[s.dependenciesMightHaveChanged=1]="dependenciesMightHaveChanged",s[s.stale=2]="stale",s[s.upToDate=3]="upToDate"})(t||(t={}));class i{constructor(d,v,l,a){this.debugName=d,this.h=v,this.i=l,this.j=a,this.a=2,this.b=0,this.c=!1,this.e=new Set,this.f=new Set,this.g=this.i?.(),(0,w.getLogger)()?.handleAutorunCreated(this),this.k()}dispose(){this.c=!0;for(const d of this.e)d.removeObserver(this);this.e.clear()}k(){if(this.a===3)return;const d=this.f;this.f=this.e,this.e=d,this.a=3,(0,w.getLogger)()?.handleAutorunTriggered(this);try{const v=this.g;this.g=this.i?.(),this.h(this,v)}finally{for(const v of this.f)v.removeObserver(this);this.f.clear()}}toString(){return`Autorun<${this.debugName}>`}beginUpdate(){this.a===3&&(this.a=1),this.b++}endUpdate(){if(this.b===1)do{if(this.a===1){this.a=3;for(const d of this.e)if(d.reportChanges(),this.a===2)break}this.k()}while(this.a!==3);if(this.b--,this.b<0)throw new y.BugIndicatingError}handlePossibleChange(d){this.a===3&&this.e.has(d)&&(this.a=1)}handleChange(d,v){this.e.has(d)&&(!this.j||this.j({changedObservable:d,change:v,didChange:a=>a===d},this.g))&&(this.a=2)}readObservable(d){if(this.c)return d.get();d.addObserver(this);const v=d.get();return this.e.add(d),this.f.delete(d),v}}e.AutorunObserver=i,function(s){s.Observer=i}(I||(e.autorun=I={}));function n(s,d,v){let l;return I(s,a=>{const o=d.read(a),T=l;l=o,v({lastValue:T,newValue:o})})}e.autorunDelta=n}),define(p[6],K([0,1,3]),function(F,e,y){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DisposableObservableValue=e.disposableObservableValue=e.ObservableValue=e.observableValue=e.getFunctionName=e.TransactionImpl=e.subtransaction=e.transaction=e.BaseObservable=e.ConvenientObservable=e._setDerived=void 0;let E;function w(a){E=a}e._setDerived=w;class I{get TChange(){return null}reportChanges(){this.get()}read(o){return o?o.readObservable(this):this.get()}map(o){return E(()=>{const T=n(o);return T!==void 0?T:`${this.debugName} (mapped)`},T=>o(this.read(T),T))}}e.ConvenientObservable=I;class r extends I{constructor(){super(...arguments),this.a=new Set}addObserver(o){const T=this.a.size;this.a.add(o),T===0&&this.b()}removeObserver(o){this.a.delete(o)&&this.a.size===0&&this.c()}b(){}c(){}}e.BaseObservable=r;function h(a,o){const T=new i(a,o);try{(0,y.getLogger)()?.handleBeginTransaction(T),a(T)}finally{T.finish(),(0,y.getLogger)()?.handleEndTransaction()}}e.transaction=h;function t(a,o,T){a?o(a):h(o,T)}e.subtransaction=t;class i{constructor(o,T){this.b=o,this.c=T,this.a=[]}getDebugName(){return this.c?this.c():n(this.b)}updateObserver(o,T){this.a.push({observer:o,observable:T}),o.beginUpdate(T)}finish(){const o=this.a;this.a=null;for(const{observer:T,observable:M}of o)T.endUpdate(M)}}e.TransactionImpl=i;function n(a){const o=a.toString(),M=/\/\*\*\s*@description\s*([^*]*)\*\//.exec(o);return(M?M[1]:void 0)?.trim()}e.getFunctionName=n;function s(a,o){return new d(a,o)}e.observableValue=s;class d extends r{constructor(o,T){super(),this.debugName=o,this.d=T}get(){return this.d}set(o,T,M){if(this.d===o)return;let D;T||(T=D=new i(()=>{},()=>`Setting ${this.debugName}`));try{const U=this.d;this.e(o),(0,y.getLogger)()?.handleObservableChanged(this,{oldValue:U,newValue:o,change:M,didChange:!0});for(const k of this.a)T.updateObserver(k,this),k.handleChange(this,M)}finally{D&&D.finish()}}toString(){return`${this.debugName}: ${this.d}`}e(o){this.d=o}}e.ObservableValue=d;function v(a,o){return new l(a,o)}e.disposableObservableValue=v;class l extends d{e(o){this.d!==o&&(this.d&&this.d.dispose(),this.d=o)}dispose(){this.d?.dispose()}}e.DisposableObservableValue=l}),define(p[9],K([0,1,4,6,3]),function(F,e,y,E,w){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Derived=e.derivedHandleChanges=e.derived=void 0;function I(i,n){return new t(i,n,void 0,void 0)}e.derived=I;function r(i,n,s){return new t(i,s,n.createEmptyChangeSummary,n.handleChange)}e.derivedHandleChanges=r,(0,E._setDerived)(I);var h;(function(i){i[i.initial=0]="initial",i[i.dependenciesMightHaveChanged=1]="dependenciesMightHaveChanged",i[i.stale=2]="stale",i[i.upToDate=3]="upToDate"})(h||(h={}));class t extends E.BaseObservable{get debugName(){return typeof this.k=="function"?this.k():this.k}constructor(n,s,d,v){super(),this.k=n,this.l=s,this.m=d,this.n=v,this.e=0,this.f=void 0,this.g=0,this.h=new Set,this.i=new Set,this.j=void 0,this.j=this.m?.(),(0,w.getLogger)()?.handleDerivedCreated(this)}c(){this.e=0,this.f=void 0;for(const n of this.h)n.removeObserver(this);this.h.clear()}get(){if(this.a.size===0){const n=this.l(this,this.m?.());return this.c(),n}else{do{if(this.e===1){this.e=3;for(const n of this.h)if(n.reportChanges(),this.e===2)break}this.q()}while(this.e!==3);return this.f}}q(){if(this.e===3)return;const n=this.i;this.i=this.h,this.h=n;const s=this.e!==0,d=this.f;this.e=3;const v=this.j;this.j=this.m?.();try{this.f=this.l(this,v)}finally{for(const a of this.i)a.removeObserver(this);this.i.clear()}const l=s&&d!==this.f;if((0,w.getLogger)()?.handleDerivedRecomputed(this,{oldValue:d,newValue:this.f,change:void 0,didChange:l}),l)for(const a of this.a)a.handleChange(this,void 0)}toString(){return`LazyDerived<${this.debugName}>`}beginUpdate(n){this.g++;const s=this.g===1;if(this.e===3&&(this.e=1,!s))for(const d of this.a)d.handlePossibleChange(this);if(s)for(const d of this.a)d.beginUpdate(this)}endUpdate(n){if(this.g--,this.g===0){const s=[...this.a];for(const d of s)d.endUpdate(this)}if(this.g<0)throw new y.BugIndicatingError}handlePossibleChange(n){if(this.e===3&&this.h.has(n)){this.e=1;for(const s of this.a)s.handlePossibleChange(this)}}handleChange(n,s){const d=this.e===3;let v=!0;if(this.n&&this.h.has(n)&&(v=this.n({changedObservable:n,change:s,didChange:l=>l===n},this.j)),v&&(this.e===1||d)&&this.h.has(n)&&(this.e=2,d))for(const l of this.a)l.handlePossibleChange(this)}readObservable(n){n.addObserver(this);const s=n.get();return this.h.add(n),this.i.delete(n),s}addObserver(n){!this.a.has(n)&&this.g>0&&n.beginUpdate(this),super.addObserver(n)}removeObserver(n){this.a.has(n)&&this.g>0&&n.endUpdate(this),super.removeObserver(n)}}e.Derived=t}),define(p[20],K([0,1,2,8,6,9,3]),function(F,e,y,E,w,I,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.derivedObservableWithWritableCache=e.derivedObservableWithCache=e.keepAlive=e.wasEventTriggeredRecently=e.debouncedObservable=e.observableSignal=e.observableSignalFromEvent=e.FromEventObservable=e.observableFromEvent=e.waitForState=e.observableFromPromise=e.constObservable=void 0;function h(b){return new t(b)}e.constObservable=h;class t extends w.ConvenientObservable{constructor(m){super(),this.a=m}get debugName(){return this.toString()}get(){return this.a}addObserver(m){}removeObserver(m){}toString(){return`Const: ${this.a}`}}function i(b){const m=(0,w.observableValue)("promiseValue",{});return b.then(C=>{m.set({value:C},void 0)}),m}e.observableFromPromise=i;function n(b,m){return new Promise(C=>{let z=!1,c=!1;const P=(0,E.autorun)("waitForState",B=>{const O=b.read(B);m(O)&&(z?P.dispose():c=!0,C(O))});z=!0,c&&P.dispose()})}e.waitForState=n;function s(b,m){return new d(b,m)}e.observableFromEvent=s;class d extends w.BaseObservable{constructor(m,C){super(),this.h=m,this.i=C,this.f=!1,this.l=z=>{const c=this.i(z),P=!this.f||this.e!==c;(0,r.getLogger)()?.handleFromEventObservableTriggered(this,{oldValue:this.e,newValue:c,change:void 0,didChange:P}),P&&(this.e=c,this.f&&(0,w.transaction)(B=>{for(const O of this.a)B.updateObserver(O,this),O.handleChange(this,void 0)},()=>{const B=this.j();return"Event fired"+(B?`: ${B}`:"")}),this.f=!0)}}j(){return(0,w.getFunctionName)(this.i)}get debugName(){const m=this.j();return"From Event"+(m?`: ${m}`:"")}b(){this.g=this.h(this.l)}c(){this.g.dispose(),this.g=void 0,this.f=!1,this.e=void 0}get(){return this.g?(this.f||this.l(void 0),this.e):this.i(void 0)}}e.FromEventObservable=d,function(b){b.Observer=d}(s||(e.observableFromEvent=s={}));function v(b,m){return new l(b,m)}e.observableSignalFromEvent=v;class l extends w.BaseObservable{constructor(m,C){super(),this.debugName=m,this.f=C,this.h=()=>{(0,w.transaction)(z=>{for(const c of this.a)z.updateObserver(c,this),c.handleChange(this,void 0)},()=>this.debugName)}}b(){this.e=this.f(this.h)}c(){this.e.dispose(),this.e=void 0}get(){}}function a(b){return new o(b)}e.observableSignal=a;class o extends w.BaseObservable{constructor(m){super(),this.debugName=m}trigger(m,C){if(!m){(0,w.transaction)(z=>{this.trigger(z,C)},()=>`Trigger signal ${this.debugName}`);return}for(const z of this.a)m.updateObserver(z,this),z.handleChange(this,C)}get(){}}function T(b,m,C){const z=(0,w.observableValue)("debounced",void 0);let c;return C.add((0,E.autorun)("debounce",P=>{const B=b.read(P);c&&clearTimeout(c),c=setTimeout(()=>{(0,w.transaction)(O=>{z.set(B,O)})},m)})),z}e.debouncedObservable=T;function M(b,m,C){const z=(0,w.observableValue)("triggeredRecently",!1);let c;return C.add(b(()=>{z.set(!0,void 0),c&&clearTimeout(c),c=setTimeout(()=>{z.set(!1,void 0)},m)})),z}e.wasEventTriggeredRecently=M;function D(b,m){const C=new U(m??!1);return b.addObserver(C),(0,y.toDisposable)(()=>{b.removeObserver(C)})}e.keepAlive=D;class U{constructor(m){this.b=m,this.a=0}beginUpdate(m){this.a++}endUpdate(m){this.a--,this.a===0&&this.b&&m.reportChanges()}handlePossibleChange(m){}handleChange(m,C){}}function k(b,m){let C;return(0,I.derived)(b,c=>(C=m(c,C),C))}e.derivedObservableWithCache=k;function f(b,m){let C;const z=(0,w.observableValue)("derivedObservableWithWritableCache.counter",0),c=(0,I.derived)(b,P=>(z.read(P),C=m(P,C),C));return Object.assign(c,{clearCache:P=>{C=void 0,z.set(z.get()+1,P)}})}e.derivedObservableWithWritableCache=f});var re=this&&this.__createBinding||(Object.create?function(F,e,y,E){E===void 0&&(E=y);var w=Object.getOwnPropertyDescriptor(e,y);(!w||("get"in w?!e.__esModule:w.writable||w.configurable))&&(w={enumerable:!0,get:function(){return e[y]}}),Object.defineProperty(F,E,w)}:function(F,e,y,E){E===void 0&&(E=y),F[E]=e[y]}),se=this&&this.__exportStar||function(F,e){for(var y in F)y!=="default"&&!Object.prototype.hasOwnProperty.call(e,y)&&re(e,F,y)};define(p[10],K([0,1,6,9,8,20,3]),function(F,e,y,E,w,I,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.autorunWithStore=e.autorunHandleChanges=e.autorunDelta=e.autorun=e.derived=e.transaction=e.observableValue=void 0,Object.defineProperty(e,"observableValue",{enumerable:!0,get:function(){return y.observableValue}}),Object.defineProperty(e,"transaction",{enumerable:!0,get:function(){return y.transaction}}),Object.defineProperty(e,"derived",{enumerable:!0,get:function(){return E.derived}}),Object.defineProperty(e,"autorun",{enumerable:!0,get:function(){return w.autorun}}),Object.defineProperty(e,"autorunDelta",{enumerable:!0,get:function(){return w.autorunDelta}}),Object.defineProperty(e,"autorunHandleChanges",{enumerable:!0,get:function(){return w.autorunHandleChanges}}),Object.defineProperty(e,"autorunWithStore",{enumerable:!0,get:function(){return w.autorunWithStore}}),se(I,e),!1&&(0,r.setLogger)(new r.ConsoleObservableLogger)}),define(p[21],K([0,1,4,2]),function(F,e,y,E){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.prefixedStream=e.prefixedReadable=e.transform=e.toReadable=e.emptyStream=e.toStream=e.peekStream=e.listenStream=e.consumeStream=e.peekReadable=e.consumeReadable=e.newWriteableStream=e.isReadableBufferedStream=e.isReadableStream=e.isReadable=void 0;function w(U){const k=U;return k?typeof k.read=="function":!1}e.isReadable=w;function I(U){const k=U;return k?[k.on,k.pause,k.resume,k.destroy].every(f=>typeof f=="function"):!1}e.isReadableStream=I;function r(U){const k=U;return k?I(k.stream)&&Array.isArray(k.buffer)&&typeof k.ended=="boolean":!1}e.isReadableBufferedStream=r;function h(U,k){return new t(U,k)}e.newWriteableStream=h;class t{constructor(k,f){this.e=k,this.f=f,this.a={flowing:!1,ended:!1,destroyed:!1},this.b={data:[],error:[]},this.c={data:[],error:[],end:[]},this.d=[]}pause(){this.a.destroyed||(this.a.flowing=!1)}resume(){this.a.destroyed||this.a.flowing||(this.a.flowing=!0,this.j(),this.k(),this.l())}write(k){if(!this.a.destroyed){if(this.a.flowing)this.g(k);else if(this.b.data.push(k),typeof this.f?.highWaterMark=="number"&&this.b.data.length>this.f.highWaterMark)return new Promise(f=>this.d.push(f))}}error(k){this.a.destroyed||(this.a.flowing?this.h(k):this.b.error.push(k))}end(k){this.a.destroyed||(typeof k<"u"&&this.write(k),this.a.flowing?(this.i(),this.destroy()):this.a.ended=!0)}g(k){this.c.data.slice(0).forEach(f=>f(k))}h(k){this.c.error.length===0?(0,y.onUnexpectedError)(k):this.c.error.slice(0).forEach(f=>f(k))}i(){this.c.end.slice(0).forEach(k=>k())}on(k,f){if(!this.a.destroyed)switch(k){case"data":this.c.data.push(f),this.resume();break;case"end":this.c.end.push(f),this.a.flowing&&this.l()&&this.destroy();break;case"error":this.c.error.push(f),this.a.flowing&&this.k();break}}removeListener(k,f){if(this.a.destroyed)return;let b;switch(k){case"data":b=this.c.data;break;case"end":b=this.c.end;break;case"error":b=this.c.error;break}if(b){const m=b.indexOf(f);m>=0&&b.splice(m,1)}}j(){if(this.b.data.length>0){const k=this.e(this.b.data);this.g(k),this.b.data.length=0;const f=[...this.d];this.d.length=0,f.forEach(b=>b())}}k(){if(this.c.error.length>0){for(const k of this.b.error)this.h(k);this.b.error.length=0}}l(){return this.a.ended?(this.i(),this.c.end.length>0):!1}destroy(){this.a.destroyed||(this.a.destroyed=!0,this.a.ended=!0,this.b.data.length=0,this.b.error.length=0,this.c.data.length=0,this.c.error.length=0,this.c.end.length=0,this.d.length=0)}}function i(U,k){const f=[];let b;for(;(b=U.read())!==null;)f.push(b);return k(f)}e.consumeReadable=i;function n(U,k,f){const b=[];let m;for(;(m=U.read())!==null&&b.length<f;)b.push(m);return m===null&&b.length>0?k(b):{read:()=>{if(b.length>0)return b.shift();if(typeof m<"u"){const C=m;return m=void 0,C}return U.read()}}}e.peekReadable=n;function s(U,k){return new Promise((f,b)=>{const m=[];d(U,{onData:C=>{k&&m.push(C)},onError:C=>{k?b(C):f(void 0)},onEnd:()=>{f(k?k(m):void 0)}})})}e.consumeStream=s;function d(U,k){let f=!1;return U.on("error",b=>{f||k.onError(b)}),U.on("end",()=>{f||k.onEnd()}),U.on("data",b=>{f||k.onData(b)}),(0,E.toDisposable)(()=>f=!0)}e.listenStream=d;function v(U,k){return new Promise((f,b)=>{const m=new E.DisposableStore,C=[],z=B=>{if(C.push(B),C.length>k)return m.dispose(),U.pause(),f({stream:U,buffer:C,ended:!1})},c=B=>b(B),P=()=>f({stream:U,buffer:C,ended:!0});m.add((0,E.toDisposable)(()=>U.removeListener("error",c))),U.on("error",c),m.add((0,E.toDisposable)(()=>U.removeListener("end",P))),U.on("end",P),m.add((0,E.toDisposable)(()=>U.removeListener("data",z))),U.on("data",z)})}e.peekStream=v;function l(U,k){const f=h(k);return f.end(U),f}e.toStream=l;function a(){const U=h(()=>{throw new Error("not supported")});return U.end(),U}e.emptyStream=a;function o(U){let k=!1;return{read:()=>k?null:(k=!0,U)}}e.toReadable=o;function T(U,k,f){const b=h(f);return d(U,{onData:m=>b.write(k.data(m)),onError:m=>b.error(k.error?k.error(m):m),onEnd:()=>b.end()}),b}e.transform=T;function M(U,k,f){let b=!1;return{read:()=>{const m=k.read();return b?m:(b=!0,m!==null?f([U,m]):U)}}}e.prefixedReadable=M;function D(U,k,f){let b=!1;const m=h(f);return d(k,{onData:C=>b?m.write(C):(b=!0,m.write(f([U,C]))),onError:C=>m.error(C),onEnd:()=>{b||(b=!0,m.write(U)),m.end()}}),m}e.prefixedStream=D}),define(p[11],K([0,1,39,21]),function(F,e,y,E){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.encodeBase64=e.decodeBase64=e.prefixedBufferStream=e.prefixedBufferReadable=e.newWriteableBufferStream=e.streamToBufferReadableStream=e.bufferToStream=e.bufferedStreamToBuffer=e.streamToBuffer=e.bufferToReadable=e.readableToBuffer=e.writeUInt8=e.readUInt8=e.writeUInt32LE=e.readUInt32LE=e.writeUInt32BE=e.readUInt32BE=e.writeUInt16LE=e.readUInt16LE=e.VSBuffer=void 0;const w=typeof Buffer<"u",I=new y.Lazy(()=>new Uint8Array(256));let r,h;class t{static alloc(g){return w?new t(Buffer.allocUnsafe(g)):new t(new Uint8Array(g))}static wrap(g){return w&&!Buffer.isBuffer(g)&&(g=Buffer.from(g.buffer,g.byteOffset,g.byteLength)),new t(g)}static fromString(g,A){return!(A?.dontUseNodeBuffer||!1)&&w?new t(Buffer.from(g)):(r||(r=new TextEncoder),new t(r.encode(g)))}static fromByteArray(g){const A=t.alloc(g.length);for(let j=0,_=g.length;j<_;j++)A.buffer[j]=g[j];return A}static concat(g,A){if(typeof A>"u"){A=0;for(let $=0,V=g.length;$<V;$++)A+=g[$].byteLength}const j=t.alloc(A);let _=0;for(let $=0,V=g.length;$<V;$++){const W=g[$];j.set(W,_),_+=W.byteLength}return j}constructor(g){this.buffer=g,this.byteLength=this.buffer.byteLength}clone(){const g=t.alloc(this.byteLength);return g.set(this),g}toString(){return w?this.buffer.toString():(h||(h=new TextDecoder),h.decode(this.buffer))}slice(g,A){return new t(this.buffer.subarray(g,A))}set(g,A){if(g instanceof t)this.buffer.set(g.buffer,A);else if(g instanceof Uint8Array)this.buffer.set(g,A);else if(g instanceof ArrayBuffer)this.buffer.set(new Uint8Array(g),A);else if(ArrayBuffer.isView(g))this.buffer.set(new Uint8Array(g.buffer,g.byteOffset,g.byteLength),A);else throw new Error("Unknown argument 'array'")}readUInt32BE(g){return s(this.buffer,g)}writeUInt32BE(g,A){d(this.buffer,g,A)}readUInt32LE(g){return v(this.buffer,g)}writeUInt32LE(g,A){l(this.buffer,g,A)}readUInt8(g){return a(this.buffer,g)}writeUInt8(g,A){o(this.buffer,g,A)}indexOf(g){const A=g instanceof t?g.buffer:g,j=A.byteLength,_=this.buffer,$=_.byteLength;if(j===0)return 0;if(j===1)return _.indexOf(A[0]);if(j>$)return-1;const V=I.value;V.fill(A.length);for(let J=0;J<A.length;J++)V[A[J]]=A.length-J-1;let W=A.length-1,G=W,Z=-1;for(;W<$;)if(_[W]===A[G]){if(G===0){Z=W;break}W--,G--}else W+=Math.max(A.length-G,V[_[W]]),G=A.length-1;return Z}}e.VSBuffer=t;function i(O,g){return O[g+0]<<0>>>0|O[g+1]<<8>>>0}e.readUInt16LE=i;function n(O,g,A){O[A+0]=g&255,g=g>>>8,O[A+1]=g&255}e.writeUInt16LE=n;function s(O,g){return O[g]*2**24+O[g+1]*2**16+O[g+2]*2**8+O[g+3]}e.readUInt32BE=s;function d(O,g,A){O[A+3]=g,g=g>>>8,O[A+2]=g,g=g>>>8,O[A+1]=g,g=g>>>8,O[A]=g}e.writeUInt32BE=d;function v(O,g){return O[g+0]<<0>>>0|O[g+1]<<8>>>0|O[g+2]<<16>>>0|O[g+3]<<24>>>0}e.readUInt32LE=v;function l(O,g,A){O[A+0]=g&255,g=g>>>8,O[A+1]=g&255,g=g>>>8,O[A+2]=g&255,g=g>>>8,O[A+3]=g&255}e.writeUInt32LE=l;function a(O,g){return O[g]}e.readUInt8=a;function o(O,g,A){O[A]=g}e.writeUInt8=o;function T(O){return E.consumeReadable(O,g=>t.concat(g))}e.readableToBuffer=T;function M(O){return E.toReadable(O)}e.bufferToReadable=M;function D(O){return E.consumeStream(O,g=>t.concat(g))}e.streamToBuffer=D;async function U(O){return O.ended?t.concat(O.buffer):t.concat([...O.buffer,await D(O.stream)])}e.bufferedStreamToBuffer=U;function k(O){return E.toStream(O,g=>t.concat(g))}e.bufferToStream=k;function f(O){return E.transform(O,{data:g=>typeof g=="string"?t.fromString(g):t.wrap(g)},g=>t.concat(g))}e.streamToBufferReadableStream=f;function b(O){return E.newWriteableStream(g=>t.concat(g),O)}e.newWriteableBufferStream=b;function m(O,g){return E.prefixedReadable(O,g,A=>t.concat(A))}e.prefixedBufferReadable=m;function C(O,g){return E.prefixedStream(O,g,A=>t.concat(A))}e.prefixedBufferStream=C;function z(O){let g=0,A=0,j=0;const _=new Uint8Array(Math.floor(O.length/4*3)),$=W=>{switch(A){case 3:_[j++]=g|W,A=0;break;case 2:_[j++]=g|W>>>2,g=W<<6,A=3;break;case 1:_[j++]=g|W>>>4,g=W<<4,A=2;break;default:g=W<<2,A=1}};for(let W=0;W<O.length;W++){const G=O.charCodeAt(W);if(G>=65&&G<=90)$(G-65);else if(G>=97&&G<=122)$(G-97+26);else if(G>=48&&G<=57)$(G-48+52);else if(G===43||G===45)$(62);else if(G===47||G===95)$(63);else{if(G===61)break;throw new SyntaxError(`Unexpected base64 character ${O[W]}`)}}const V=j;for(;A>0;)$(0);return t.wrap(_).slice(0,V)}e.decodeBase64=z;const c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",P="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_";function B({buffer:O},g=!0,A=!1){const j=A?P:c;let _="";const $=O.byteLength%3;let V=0;for(;V<O.byteLength-$;V+=3){const W=O[V+0],G=O[V+1],Z=O[V+2];_+=j[W>>>2],_+=j[(W<<4|G>>>4)&63],_+=j[(G<<2|Z>>>6)&63],_+=j[Z&63]}if($===1){const W=O[V+0];_+=j[W>>>2],_+=j[W<<4&63],g&&(_+="==")}else if($===2){const W=O[V+0],G=O[V+1];_+=j[W>>>2],_+=j[(W<<4|G>>>4)&63],_+=j[G<<2&63],g&&(_+="=")}return _}e.encodeBase64=B}),define(p[22],K([0,1]),function(F,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MicrotaskDelay=void 0,e.MicrotaskDelay=Symbol("MicrotaskDelay")}),define(p[12],K([0,1]),function(F,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.countEOL=e.StringEOL=void 0;var y;(function(w){w[w.Unknown=0]="Unknown",w[w.Invalid=3]="Invalid",w[w.LF=1]="LF",w[w.CRLF=2]="CRLF"})(y||(e.StringEOL=y={}));function E(w){let I=0,r=0,h=0,t=0;for(let i=0,n=w.length;i<n;i++){const s=w.charCodeAt(i);s===13?(I===0&&(r=i),I++,i+1<n&&w.charCodeAt(i+1)===10?(t|=2,i++):t|=3,h=i+1):s===10&&(t|=1,I===0&&(r=i),I++,h=i+1)}return I===0&&(r=w.length),[I,r,w.length-h,t]}e.countEOL=E}),define(p[13],K([0,1]),function(F,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TokenMetadata=e.MetadataConsts=e.StandardTokenType=e.ColorId=e.FontStyle=e.LanguageId=void 0;var y;(function(t){t[t.Null=0]="Null",t[t.PlainText=1]="PlainText"})(y||(e.LanguageId=y={}));var E;(function(t){t[t.NotSet=-1]="NotSet",t[t.None=0]="None",t[t.Italic=1]="Italic",t[t.Bold=2]="Bold",t[t.Underline=4]="Underline",t[t.Strikethrough=8]="Strikethrough"})(E||(e.FontStyle=E={}));var w;(function(t){t[t.None=0]="None",t[t.DefaultForeground=1]="DefaultForeground",t[t.DefaultBackground=2]="DefaultBackground"})(w||(e.ColorId=w={}));var I;(function(t){t[t.Other=0]="Other",t[t.Comment=1]="Comment",t[t.String=2]="String",t[t.RegEx=3]="RegEx"})(I||(e.StandardTokenType=I={}));var r;(function(t){t[t.LANGUAGEID_MASK=255]="LANGUAGEID_MASK",t[t.TOKEN_TYPE_MASK=768]="TOKEN_TYPE_MASK",t[t.BALANCED_BRACKETS_MASK=1024]="BALANCED_BRACKETS_MASK",t[t.FONT_STYLE_MASK=30720]="FONT_STYLE_MASK",t[t.FOREGROUND_MASK=16744448]="FOREGROUND_MASK",t[t.BACKGROUND_MASK=4278190080]="BACKGROUND_MASK",t[t.ITALIC_MASK=2048]="ITALIC_MASK",t[t.BOLD_MASK=4096]="BOLD_MASK",t[t.UNDERLINE_MASK=8192]="UNDERLINE_MASK",t[t.STRIKETHROUGH_MASK=16384]="STRIKETHROUGH_MASK",t[t.SEMANTIC_USE_ITALIC=1]="SEMANTIC_USE_ITALIC",t[t.SEMANTIC_USE_BOLD=2]="SEMANTIC_USE_BOLD",t[t.SEMANTIC_USE_UNDERLINE=4]="SEMANTIC_USE_UNDERLINE",t[t.SEMANTIC_USE_STRIKETHROUGH=8]="SEMANTIC_USE_STRIKETHROUGH",t[t.SEMANTIC_USE_FOREGROUND=16]="SEMANTIC_USE_FOREGROUND",t[t.SEMANTIC_USE_BACKGROUND=32]="SEMANTIC_USE_BACKGROUND",t[t.LANGUAGEID_OFFSET=0]="LANGUAGEID_OFFSET",t[t.TOKEN_TYPE_OFFSET=8]="TOKEN_TYPE_OFFSET",t[t.BALANCED_BRACKETS_OFFSET=10]="BALANCED_BRACKETS_OFFSET",t[t.FONT_STYLE_OFFSET=11]="FONT_STYLE_OFFSET",t[t.FOREGROUND_OFFSET=15]="FOREGROUND_OFFSET",t[t.BACKGROUND_OFFSET=24]="BACKGROUND_OFFSET"})(r||(e.MetadataConsts=r={}));class h{static getLanguageId(i){return(i&255)>>>0}static getTokenType(i){return(i&768)>>>8}static containsBalancedBrackets(i){return(i&1024)!==0}static getFontStyle(i){return(i&30720)>>>11}static getForeground(i){return(i&16744448)>>>15}static getBackground(i){return(i&4278190080)>>>24}static getClassNameFromMetadata(i){let s="mtk"+this.getForeground(i);const d=this.getFontStyle(i);return d&1&&(s+=" mtki"),d&2&&(s+=" mtkb"),d&4&&(s+=" mtku"),d&8&&(s+=" mtks"),s}static getInlineStyleFromMetadata(i,n){const s=this.getForeground(i),d=this.getFontStyle(i);let v=`color: ${n[s]};`;d&1&&(v+="font-style: italic;"),d&2&&(v+="font-weight: bold;");let l="";return d&4&&(l+=" underline"),d&8&&(l+=" line-through"),l&&(v+=`text-decoration:${l};`),v}static getPresentationFromMetadata(i){const n=this.getForeground(i),s=this.getFontStyle(i);return{foreground:n,italic:!!(s&1),bold:!!(s&2),underline:!!(s&4),strikethrough:!!(s&8)}}}e.TokenMetadata=h}),define(p[23],K([0,1,24]),function(F,e,y){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FixedArray=void 0;class E{constructor(r){this.b=r,this.a=[]}get(r){return r<this.a.length?this.a[r]:this.b}set(r,h){for(;r>=this.a.length;)this.a[this.a.length]=this.b;this.a[r]=h}replace(r,h,t){if(r>=this.a.length)return;if(h===0){this.insert(r,t);return}else if(t===0){this.delete(r,h);return}const i=this.a.slice(0,r),n=this.a.slice(r+h),s=w(t,this.b);this.a=i.concat(s,n)}delete(r,h){h===0||r>=this.a.length||this.a.splice(r,h)}insert(r,h){if(h===0||r>=this.a.length)return;const t=[];for(let i=0;i<h;i++)t[i]=this.b;this.a=(0,y.arrayInsert)(this.a,r,t)}}e.FixedArray=E;function w(I,r){const h=[];for(let t=0;t<I;t++)h[t]=r;return h}}),define(p[7],K([0,1,13]),function(F,e,y){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LineTokens=void 0;class E{static createEmpty(r,h){const t=E.defaultTokenMetadata,i=new Uint32Array(2);return i[0]=r.length,i[1]=t,new E(i,r,h)}constructor(r,h,t){this._lineTokensBrand=void 0,this.a=r,this.b=this.a.length>>>1,this.c=h,this.d=t}equals(r){return r instanceof E?this.slicedEquals(r,0,this.b):!1}slicedEquals(r,h,t){if(this.c!==r.c||this.b!==r.b)return!1;const i=h<<1,n=i+(t<<1);for(let s=i;s<n;s++)if(this.a[s]!==r.a[s])return!1;return!0}getLineContent(){return this.c}getCount(){return this.b}getStartOffset(r){return r>0?this.a[r-1<<1]:0}getMetadata(r){return this.a[(r<<1)+1]}getLanguageId(r){const h=this.a[(r<<1)+1],t=y.TokenMetadata.getLanguageId(h);return this.d.decodeLanguageId(t)}getStandardTokenType(r){const h=this.a[(r<<1)+1];return y.TokenMetadata.getTokenType(h)}getForeground(r){const h=this.a[(r<<1)+1];return y.TokenMetadata.getForeground(h)}getClassName(r){const h=this.a[(r<<1)+1];return y.TokenMetadata.getClassNameFromMetadata(h)}getInlineStyle(r,h){const t=this.a[(r<<1)+1];return y.TokenMetadata.getInlineStyleFromMetadata(t,h)}getPresentation(r){const h=this.a[(r<<1)+1];return y.TokenMetadata.getPresentationFromMetadata(h)}getEndOffset(r){return this.a[r<<1]}findTokenIndexAtOffset(r){return E.findIndexInTokensArray(this.a,r)}inflate(){return this}sliceAndInflate(r,h,t){return new w(this,r,h,t)}static convertToEndOffset(r,h){const i=(r.length>>>1)-1;for(let n=0;n<i;n++)r[n<<1]=r[n+1<<1];r[i<<1]=h}static findIndexInTokensArray(r,h){if(r.length<=2)return 0;let t=0,i=(r.length>>>1)-1;for(;t<i;){const n=t+Math.floor((i-t)/2),s=r[n<<1];if(s===h)return n+1;s<h?t=n+1:s>h&&(i=n)}return t}withInserted(r){if(r.length===0)return this;let h=0,t=0,i="";const n=new Array;let s=0;for(;;){const d=h<this.b?this.a[h<<1]:-1,v=t<r.length?r[t]:null;if(d!==-1&&(v===null||d<=v.offset)){i+=this.c.substring(s,d);const l=this.a[(h<<1)+1];n.push(i.length,l),h++,s=d}else if(v){if(v.offset>s){i+=this.c.substring(s,v.offset);const l=this.a[(h<<1)+1];n.push(i.length,l),s=v.offset}i+=v.text,n.push(i.length,v.tokenMetadata),t++}else break}return new E(new Uint32Array(n),i,this.d)}}e.LineTokens=E,E.defaultTokenMetadata=(0<<11|1<<15|2<<24)>>>0;class w{constructor(r,h,t,i){this.a=r,this.b=h,this.c=t,this.d=i,this.e=r.findTokenIndexAtOffset(h),this.f=0;for(let n=this.e,s=r.getCount();n<s&&!(r.getStartOffset(n)>=t);n++)this.f++}getMetadata(r){return this.a.getMetadata(this.e+r)}getLanguageId(r){return this.a.getLanguageId(this.e+r)}getLineContent(){return this.a.getLineContent().substring(this.b,this.c)}equals(r){return r instanceof w?this.b===r.b&&this.c===r.c&&this.d===r.d&&this.a.slicedEquals(r.a,this.e,this.f):!1}getCount(){return this.f}getForeground(r){return this.a.getForeground(this.e+r)}getEndOffset(r){const h=this.a.getEndOffset(this.e+r);return Math.min(this.c,h)-this.b+this.d}getClassName(r){return this.a.getClassName(this.e+r)}getInlineStyle(r,h){return this.a.getInlineStyle(this.e+r,h)}getPresentation(r){return this.a.getPresentation(this.e+r)}findTokenIndexAtOffset(r){return this.a.findTokenIndexAtOffset(r+this.b-this.d)-this.e}}}),define(p[25],K([0,1,7]),function(F,e,y){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.toUint32Array=e.ContiguousTokensEditing=e.EMPTY_LINE_TOKENS=void 0,e.EMPTY_LINE_TOKENS=new Uint32Array(0).buffer;class E{static deleteBeginning(r,h){return r===null||r===e.EMPTY_LINE_TOKENS?r:E.delete(r,0,h)}static deleteEnding(r,h){if(r===null||r===e.EMPTY_LINE_TOKENS)return r;const t=w(r),i=t[t.length-2];return E.delete(r,h,i)}static delete(r,h,t){if(r===null||r===e.EMPTY_LINE_TOKENS||h===t)return r;const i=w(r),n=i.length>>>1;if(h===0&&i[i.length-2]===t)return e.EMPTY_LINE_TOKENS;const s=y.LineTokens.findIndexInTokensArray(i,h),d=s>0?i[s-1<<1]:0,v=i[s<<1];if(t<v){const M=t-h;for(let D=s;D<n;D++)i[D<<1]-=M;return r}let l,a;d!==h?(i[s<<1]=h,l=s+1<<1,a=h):(l=s<<1,a=d);const o=t-h;for(let M=s+1;M<n;M++){const D=i[M<<1]-o;D>a&&(i[l++]=D,i[l++]=i[(M<<1)+1],a=D)}if(l===i.length)return r;const T=new Uint32Array(l);return T.set(i.subarray(0,l),0),T.buffer}static append(r,h){if(h===e.EMPTY_LINE_TOKENS)return r;if(r===e.EMPTY_LINE_TOKENS)return h;if(r===null)return r;if(h===null)return null;const t=w(r),i=w(h),n=i.length>>>1,s=new Uint32Array(t.length+i.length);s.set(t,0);let d=t.length;const v=t[t.length-2];for(let l=0;l<n;l++)s[d++]=i[l<<1]+v,s[d++]=i[(l<<1)+1];return s.buffer}static insert(r,h,t){if(r===null||r===e.EMPTY_LINE_TOKENS)return r;const i=w(r),n=i.length>>>1;let s=y.LineTokens.findIndexInTokensArray(i,h);s>0&&i[s-1<<1]===h&&s--;for(let d=s;d<n;d++)i[d<<1]+=t;return r}}e.ContiguousTokensEditing=E;function w(I){return I instanceof Uint32Array?I:new Uint32Array(I)}e.toUint32Array=w}),define(p[26],K([0,1,24,11,40,12,25,14]),function(F,e,y,E,w,I,r,h){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ContiguousMultilineTokens=void 0;class t{static deserialize(n,s,d){const v=new Uint32Array(n.buffer),l=(0,E.readUInt32BE)(n,s);s+=4;const a=(0,E.readUInt32BE)(n,s);s+=4;const o=[];for(let T=0;T<a;T++){const M=(0,E.readUInt32BE)(n,s);s+=4,o.push(v.subarray(s/4,s/4+M/4)),s+=M}return d.push(new t(l,o)),s}get startLineNumber(){return this.a}get endLineNumber(){return this.a+this.b.length-1}constructor(n,s){this.a=n,this.b=s}getLineRange(){return new h.LineRange(this.a,this.a+this.b.length)}getLineTokens(n){return this.b[n-this.a]}appendLineTokens(n){this.b.push(n)}serializeSize(){let n=0;n+=4,n+=4;for(let s=0;s<this.b.length;s++){const d=this.b[s];if(!(d instanceof Uint32Array))throw new Error("Not supported!");n+=4,n+=d.byteLength}return n}serialize(n,s){(0,E.writeUInt32BE)(n,this.a,s),s+=4,(0,E.writeUInt32BE)(n,this.b.length,s),s+=4;for(let d=0;d<this.b.length;d++){const v=this.b[d];if(!(v instanceof Uint32Array))throw new Error("Not supported!");(0,E.writeUInt32BE)(n,v.byteLength,s),s+=4,n.set(new Uint8Array(v.buffer),s),s+=v.byteLength}return s}applyEdit(n,s){const[d,v]=(0,I.countEOL)(s);this.c(n),this.d(new w.Position(n.startLineNumber,n.startColumn),d,v)}c(n){if(n.startLineNumber===n.endLineNumber&&n.startColumn===n.endColumn)return;const s=n.startLineNumber-this.a,d=n.endLineNumber-this.a;if(d<0){const v=d-s;this.a-=v;return}if(!(s>=this.b.length)){if(s<0&&d>=this.b.length){this.a=0,this.b=[];return}if(s===d){this.b[s]=r.ContiguousTokensEditing.delete(this.b[s],n.startColumn-1,n.endColumn-1);return}if(s>=0)if(this.b[s]=r.ContiguousTokensEditing.deleteEnding(this.b[s],n.startColumn-1),d<this.b.length){const v=r.ContiguousTokensEditing.deleteBeginning(this.b[d],n.endColumn-1);this.b[s]=r.ContiguousTokensEditing.append(this.b[s],v),this.b.splice(s+1,d-s)}else this.b[s]=r.ContiguousTokensEditing.append(this.b[s],null),this.b=this.b.slice(0,s+1);else{const v=-s;this.a-=v,this.b[d]=r.ContiguousTokensEditing.deleteBeginning(this.b[d],n.endColumn-1),this.b=this.b.slice(d)}}}d(n,s,d){if(s===0&&d===0)return;const v=n.lineNumber-this.a;if(v<0){this.a+=s;return}if(!(v>=this.b.length)){if(s===0){this.b[v]=r.ContiguousTokensEditing.insert(this.b[v],n.column-1,d);return}this.b[v]=r.ContiguousTokensEditing.deleteEnding(this.b[v],n.column-1),this.b[v]=r.ContiguousTokensEditing.insert(this.b[v],n.column-1,d),this.e(n.lineNumber,s)}}e(n,s){if(s===0)return;const d=[];for(let v=0;v<s;v++)d[v]=null;this.b=y.arrayInsert(this.b,n,d)}}e.ContiguousMultilineTokens=t}),define(p[15],K([0,1,11,26]),function(F,e,y,E){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ContiguousMultilineTokensBuilder=void 0;class w{static deserialize(r){let h=0;const t=(0,y.readUInt32BE)(r,h);h+=4;const i=[];for(let n=0;n<t;n++)h=E.ContiguousMultilineTokens.deserialize(r,h,i);return i}constructor(){this.a=[]}add(r,h){if(this.a.length>0){const t=this.a[this.a.length-1];if(t.endLineNumber+1===r){t.appendLineTokens(h);return}}this.a.push(new E.ContiguousMultilineTokens(r,[h]))}finalize(){return this.a}serialize(){const r=this.b(),h=new Uint8Array(r);return this.c(h),h}b(){let r=0;r+=4;for(let h=0;h<this.a.length;h++)r+=this.a[h].serializeSize();return r}c(r){let h=0;(0,y.writeUInt32BE)(r,this.a.length,h),h+=4;for(let t=0;t<this.a.length;t++)h=this.a[t].serialize(r,h)}}e.ContiguousMultilineTokensBuilder=w}),define(p[27],K([0,1,28,5,29,41]),function(F,e,y,E,w,I){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.randomPath=e.parseLineAndColumnAware=e.indexOfPath=e.getDriveLetter=e.hasDriveLetter=e.isRootOrDriveLetter=e.sanitizeFilePath=e.isWindowsDriveLetter=e.isEqualOrParent=e.isEqual=e.isValidBasename=e.isUNC=e.getRoot=e.toPosixPath=e.toSlashes=e.isPathSeparator=void 0;function r(c){return c===47||c===92}e.isPathSeparator=r;function h(c){return c.replace(/[\\/]/g,y.posix.sep)}e.toSlashes=h;function t(c){return c.indexOf("/")===-1&&(c=h(c)),/^[a-zA-Z]:(\/|$)/.test(c)&&(c="/"+c),c}e.toPosixPath=t;function i(c,P=y.posix.sep){if(!c)return"";const B=c.length,O=c.charCodeAt(0);if(r(O)){if(r(c.charCodeAt(1))&&!r(c.charCodeAt(2))){let A=3;const j=A;for(;A<B&&!r(c.charCodeAt(A));A++);if(j!==A&&!r(c.charCodeAt(A+1))){for(A+=1;A<B;A++)if(r(c.charCodeAt(A)))return c.slice(0,A+1).replace(/[\\/]/g,P)}}return P}else if(T(O)&&c.charCodeAt(1)===58)return r(c.charCodeAt(2))?c.slice(0,2)+P:c.slice(0,2);let g=c.indexOf("://");if(g!==-1){for(g+=3;g<B;g++)if(r(c.charCodeAt(g)))return c.slice(0,g+1)}return""}e.getRoot=i;function n(c){if(!E.isWindows||!c||c.length<5)return!1;let P=c.charCodeAt(0);if(P!==92||(P=c.charCodeAt(1),P!==92))return!1;let B=2;const O=B;for(;B<c.length&&(P=c.charCodeAt(B),P!==92);B++);return!(O===B||(P=c.charCodeAt(B+1),isNaN(P)||P===92))}e.isUNC=n;const s=/[\\/:\*\?"<>\|]/g,d=/[\\/]/g,v=/^(con|prn|aux|clock\$|nul|lpt[0-9]|com[0-9])(\.(.*?))?$/i;function l(c,P=E.isWindows){const B=P?s:d;return!(!c||c.length===0||/^\s+$/.test(c)||(B.lastIndex=0,B.test(c))||P&&v.test(c)||c==="."||c===".."||P&&c[c.length-1]==="."||P&&c.length!==c.trim().length||c.length>255)}e.isValidBasename=l;function a(c,P,B){const O=c===P;return!B||O?O:!c||!P?!1:(0,w.equalsIgnoreCase)(c,P)}e.isEqual=a;function o(c,P,B,O=y.sep){if(c===P)return!0;if(!c||!P||P.length>c.length)return!1;if(B){if(!(0,w.startsWithIgnoreCase)(c,P))return!1;if(P.length===c.length)return!0;let A=P.length;return P.charAt(P.length-1)===O&&A--,c.charAt(A)===O}return P.charAt(P.length-1)!==O&&(P+=O),c.indexOf(P)===0}e.isEqualOrParent=o;function T(c){return c>=65&&c<=90||c>=97&&c<=122}e.isWindowsDriveLetter=T;function M(c,P){return E.isWindows&&c.endsWith(":")&&(c+=y.sep),(0,y.isAbsolute)(c)||(c=(0,y.join)(P,c)),c=(0,y.normalize)(c),E.isWindows?(c=(0,w.rtrim)(c,y.sep),c.endsWith(":")&&(c+=y.sep)):(c=(0,w.rtrim)(c,y.sep),c||(c=y.sep)),c}e.sanitizeFilePath=M;function D(c){const P=(0,y.normalize)(c);return E.isWindows?c.length>3?!1:U(P)&&(c.length===2||P.charCodeAt(2)===92):P===y.posix.sep}e.isRootOrDriveLetter=D;function U(c,P=E.isWindows){return P?T(c.charCodeAt(0))&&c.charCodeAt(1)===58:!1}e.hasDriveLetter=U;function k(c,P=E.isWindows){return U(c,P)?c[0]:void 0}e.getDriveLetter=k;function f(c,P,B){return P.length>c.length?-1:c===P?0:(B&&(c=c.toLowerCase(),P=P.toLowerCase()),c.indexOf(P))}e.indexOfPath=f;function b(c){const P=c.split(":");let B,O,g;for(const A of P){const j=Number(A);(0,I.isNumber)(j)?O===void 0?O=j:g===void 0&&(g=j):B=B?[B,A].join(":"):A}if(!B)throw new Error("Format for `--goto` should be: `FILE:LINE(:COLUMN)`");return{path:B,line:O!==void 0?O:void 0,column:g!==void 0?g:O!==void 0?1:void 0}}e.parseLineAndColumnAware=b;const m="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",C="BDEFGHIJKMOQRSTUVWXYZbdefghijkmoqrstuvwxyz0123456789";function z(c,P,B=8){let O="";for(let A=0;A<B;A++){let j;A===0&&E.isWindows&&!P&&(B===3||B===4)?j=C:j=m,O+=j.charAt(Math.floor(Math.random()*j.length))}let g;return P?g=`${P}-${O}`:g=O,c?(0,y.join)(c,g):g}e.randomPath=z}),define(p[30],K([0,1,4,5,16]),function(F,e,y,E,w){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.COI=e.FileAccess=e.nodeModulesAsarUnpackedPath=e.nodeModulesAsarPath=e.nodeModulesPath=e.builtinExtensionsPath=e.RemoteAuthorities=e.connectionTokenQueryName=e.connectionTokenCookieName=e.Schemas=void 0;var I;(function(i){i.inMemory="inmemory",i.vscode="vscode",i.internal="private",i.walkThrough="walkThrough",i.walkThroughSnippet="walkThroughSnippet",i.http="http",i.https="https",i.file="file",i.mailto="mailto",i.untitled="untitled",i.data="data",i.command="command",i.vscodeRemote="vscode-remote",i.vscodeRemoteResource="vscode-remote-resource",i.vscodeUserData="vscode-userdata",i.vscodeCustomEditor="vscode-custom-editor",i.vscodeNotebookCell="vscode-notebook-cell",i.vscodeNotebookCellMetadata="vscode-notebook-cell-metadata",i.vscodeNotebookCellOutput="vscode-notebook-cell-output",i.vscodeInteractive="vscode-interactive",i.vscodeInteractiveInput="vscode-interactive-input",i.vscodeSettings="vscode-settings",i.vscodeWorkspaceTrust="vscode-workspace-trust",i.vscodeTerminal="vscode-terminal",i.vscodeInteractiveSesssion="vscode-chat-editor",i.webviewPanel="webview-panel",i.vscodeWebview="vscode-webview",i.extension="extension",i.vscodeFileResource="vscode-file",i.tmp="tmp",i.vsls="vsls",i.vscodeSourceControl="vscode-scm"})(I||(e.Schemas=I={})),e.connectionTokenCookieName="vscode-tkn",e.connectionTokenQueryName="tkn";class r{constructor(){this.a=Object.create(null),this.b=Object.create(null),this.c=Object.create(null),this.d="http",this.e=null,this.f=`/${I.vscodeRemoteResource}`}setPreferredWebSchema(n){this.d=n}setDelegate(n){this.e=n}setServerRootPath(n){this.f=`${n}/${I.vscodeRemoteResource}`}set(n,s,d){this.a[n]=s,this.b[n]=d}setConnectionToken(n,s){this.c[n]=s}getPreferredWebSchema(){return this.d}rewrite(n){if(this.e)try{return this.e(n)}catch(o){return y.onUnexpectedError(o),n}const s=n.authority;let d=this.a[s];d&&d.indexOf(":")!==-1&&d.indexOf("[")===-1&&(d=`[${d}]`);const v=this.b[s],l=this.c[s];let a=`path=${encodeURIComponent(n.path)}`;return typeof l=="string"&&(a+=`&${e.connectionTokenQueryName}=${encodeURIComponent(l)}`),w.URI.from({scheme:E.isWeb?this.d:I.vscodeRemoteResource,authority:`${d}:${v}`,path:this.f,query:a})}}e.RemoteAuthorities=new r,e.builtinExtensionsPath="vs/../../extensions",e.nodeModulesPath="vs/../../node_modules",e.nodeModulesAsarPath="vs/../../node_modules.asar",e.nodeModulesAsarUnpackedPath="vs/../../node_modules.asar.unpacked";class h{asBrowserUri(n){const s=this.b(n,F);return this.uriToBrowserUri(s)}uriToBrowserUri(n){return n.scheme===I.vscodeRemote?e.RemoteAuthorities.rewrite(n):n.scheme===I.file&&(E.isNative||E.isWebWorker&&E.globals.origin===`${I.vscodeFileResource}://${h.a}`)?n.with({scheme:I.vscodeFileResource,authority:n.authority||h.a,query:null,fragment:null}):n}asFileUri(n){const s=this.b(n,F);return this.uriToFileUri(s)}uriToFileUri(n){return n.scheme===I.vscodeFileResource?n.with({scheme:I.file,authority:n.authority!==h.a?n.authority:null,query:null,fragment:null}):n}b(n,s){return w.URI.isUri(n)?n:w.URI.parse(s.toUrl(n))}}h.a="vscode-app",e.FileAccess=new h;var t;(function(i){const n=new Map([["1",{"Cross-Origin-Opener-Policy":"same-origin"}],["2",{"Cross-Origin-Embedder-Policy":"require-corp"}],["3",{"Cross-Origin-Opener-Policy":"same-origin","Cross-Origin-Embedder-Policy":"require-corp"}]]);i.CoopAndCoep=Object.freeze(n.get("3"));const s="vscode-coi";function d(l){let a;typeof l=="string"?a=new URL(l).searchParams:l instanceof URL?a=l.searchParams:w.URI.isUri(l)&&(a=new URL(l.toString(!0)).searchParams);const o=a?.get(s);if(o)return n.get(o)}i.getHeadersFromQuery=d;function v(l,a,o){if(!globalThis.crossOriginIsolated)return;const T=a&&o?"3":o?"2":"1";l instanceof URLSearchParams?l.set(s,T):l[s]=T}i.addSearchParam=v})(t||(e.COI=t={}))}),define(p[17],K([0,1,27,30,28,5,29,16]),function(F,e,y,E,w,I,r,h){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.toLocalResource=e.DataUri=e.distinctParents=e.addTrailingPathSeparator=e.removeTrailingPathSeparator=e.hasTrailingPathSeparator=e.isEqualAuthority=e.isAbsolutePath=e.resolvePath=e.relativePath=e.normalizePath=e.joinPath=e.dirname=e.extname=e.basename=e.basenameOrAuthority=e.getComparisonKey=e.isEqualOrParent=e.isEqual=e.extUriIgnorePathCase=e.extUriBiasedIgnorePathCase=e.extUri=e.ExtUri=e.originalFSPath=void 0;function t(v){return(0,h.uriToFsPath)(v,!0)}e.originalFSPath=t;class i{constructor(l){this.a=l}compare(l,a,o=!1){return l===a?0:(0,r.compare)(this.getComparisonKey(l,o),this.getComparisonKey(a,o))}isEqual(l,a,o=!1){return l===a?!0:!l||!a?!1:this.getComparisonKey(l,o)===this.getComparisonKey(a,o)}getComparisonKey(l,a=!1){return l.with({path:this.a(l)?l.path.toLowerCase():void 0,fragment:a?null:void 0}).toString()}ignorePathCasing(l){return this.a(l)}isEqualOrParent(l,a,o=!1){if(l.scheme===a.scheme){if(l.scheme===E.Schemas.file)return y.isEqualOrParent(t(l),t(a),this.a(l))&&l.query===a.query&&(o||l.fragment===a.fragment);if((0,e.isEqualAuthority)(l.authority,a.authority))return y.isEqualOrParent(l.path,a.path,this.a(l),"/")&&l.query===a.query&&(o||l.fragment===a.fragment)}return!1}joinPath(l,...a){return h.URI.joinPath(l,...a)}basenameOrAuthority(l){return(0,e.basename)(l)||l.authority}basename(l){return w.posix.basename(l.path)}extname(l){return w.posix.extname(l.path)}dirname(l){if(l.path.length===0)return l;let a;return l.scheme===E.Schemas.file?a=h.URI.file(w.dirname(t(l))).path:(a=w.posix.dirname(l.path),l.authority&&a.length&&a.charCodeAt(0)!==47&&(console.error(`dirname("${l.toString})) resulted in a relative path`),a="/")),l.with({path:a})}normalizePath(l){if(!l.path.length)return l;let a;return l.scheme===E.Schemas.file?a=h.URI.file(w.normalize(t(l))).path:a=w.posix.normalize(l.path),l.with({path:a})}relativePath(l,a){if(l.scheme!==a.scheme||!(0,e.isEqualAuthority)(l.authority,a.authority))return;if(l.scheme===E.Schemas.file){const M=w.relative(t(l),t(a));return I.isWindows?y.toSlashes(M):M}let o=l.path||"/";const T=a.path||"/";if(this.a(l)){let M=0;for(const D=Math.min(o.length,T.length);M<D&&!(o.charCodeAt(M)!==T.charCodeAt(M)&&o.charAt(M).toLowerCase()!==T.charAt(M).toLowerCase());M++);o=T.substr(0,M)+o.substr(M)}return w.posix.relative(o,T)}resolvePath(l,a){if(l.scheme===E.Schemas.file){const o=h.URI.file(w.resolve(t(l),a));return l.with({authority:o.authority,path:o.path})}return a=y.toPosixPath(a),l.with({path:w.posix.resolve(l.path,a)})}isAbsolutePath(l){return!!l.path&&l.path[0]==="/"}isEqualAuthority(l,a){return l===a||l!==void 0&&a!==void 0&&(0,r.equalsIgnoreCase)(l,a)}hasTrailingPathSeparator(l,a=w.sep){if(l.scheme===E.Schemas.file){const o=t(l);return o.length>y.getRoot(o).length&&o[o.length-1]===a}else{const o=l.path;return o.length>1&&o.charCodeAt(o.length-1)===47&&!/^[a-zA-Z]:(\/$|\\$)/.test(l.fsPath)}}removeTrailingPathSeparator(l,a=w.sep){return(0,e.hasTrailingPathSeparator)(l,a)?l.with({path:l.path.substr(0,l.path.length-1)}):l}addTrailingPathSeparator(l,a=w.sep){let o=!1;if(l.scheme===E.Schemas.file){const T=t(l);o=T!==void 0&&T.length===y.getRoot(T).length&&T[T.length-1]===a}else{a="/";const T=l.path;o=T.length===1&&T.charCodeAt(T.length-1)===47}return!o&&!(0,e.hasTrailingPathSeparator)(l,a)?l.with({path:l.path+"/"}):l}}e.ExtUri=i,e.extUri=new i(()=>!1),e.extUriBiasedIgnorePathCase=new i(v=>v.scheme===E.Schemas.file?!I.isLinux:!0),e.extUriIgnorePathCase=new i(v=>!0),e.isEqual=e.extUri.isEqual.bind(e.extUri),e.isEqualOrParent=e.extUri.isEqualOrParent.bind(e.extUri),e.getComparisonKey=e.extUri.getComparisonKey.bind(e.extUri),e.basenameOrAuthority=e.extUri.basenameOrAuthority.bind(e.extUri),e.basename=e.extUri.basename.bind(e.extUri),e.extname=e.extUri.extname.bind(e.extUri),e.dirname=e.extUri.dirname.bind(e.extUri),e.joinPath=e.extUri.joinPath.bind(e.extUri),e.normalizePath=e.extUri.normalizePath.bind(e.extUri),e.relativePath=e.extUri.relativePath.bind(e.extUri),e.resolvePath=e.extUri.resolvePath.bind(e.extUri),e.isAbsolutePath=e.extUri.isAbsolutePath.bind(e.extUri),e.isEqualAuthority=e.extUri.isEqualAuthority.bind(e.extUri),e.hasTrailingPathSeparator=e.extUri.hasTrailingPathSeparator.bind(e.extUri),e.removeTrailingPathSeparator=e.extUri.removeTrailingPathSeparator.bind(e.extUri),e.addTrailingPathSeparator=e.extUri.addTrailingPathSeparator.bind(e.extUri);function n(v,l){const a=[];for(let o=0;o<v.length;o++){const T=l(v[o]);v.some((M,D)=>D===o?!1:(0,e.isEqualOrParent)(T,l(M)))||a.push(v[o])}return a}e.distinctParents=n;var s;(function(v){v.META_DATA_LABEL="label",v.META_DATA_DESCRIPTION="description",v.META_DATA_SIZE="size",v.META_DATA_MIME="mime";function l(a){const o=new Map;a.path.substring(a.path.indexOf(";")+1,a.path.lastIndexOf(";")).split(";").forEach(D=>{const[U,k]=D.split(":");U&&k&&o.set(U,k)});const M=a.path.substring(0,a.path.indexOf(";"));return M&&o.set(v.META_DATA_MIME,M),o}v.parseMetaData=l})(s||(e.DataUri=s={}));function d(v,l,a){if(l){let o=v.path;return o&&o[0]!==w.posix.sep&&(o=w.posix.sep+o),v.with({scheme:a,authority:l,path:o})}return v.with({scheme:a})}e.toLocalResource=d}),define(p[18],K([0,1,42,4,31,2,17,5,22]),function(F,e,y,E,w,I,r,h,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createCancelableAsyncIterable=e.CancelableAsyncIterableObject=e.AsyncIterableObject=e.Promises=e.DeferredPromise=e.IntervalCounter=e.TaskSequentializer=e.retry=e.IdleValue=e.runWhenIdle=e.ThrottledWorker=e.RunOnceWorker=e.ProcessTimeRunOnceScheduler=e.RunOnceScheduler=e.IntervalTimer=e.TimeoutTimer=e.ResourceQueue=e.Queue=e.Limiter=e.firstParallel=e.first=e.sequence=e.disposableTimeout=e.timeout=e.AutoOpenBarrier=e.Barrier=e.ThrottledDelayer=e.Delayer=e.SequencerByKey=e.Sequencer=e.Throttler=e.asPromise=e.raceTimeout=e.raceCancellablePromises=e.raceCancellationError=e.raceCancellation=e.createCancelablePromise=e.isThenable=void 0;function i(R){return!!R&&typeof R.then=="function"}e.isThenable=i;function n(R){const u=new y.CancellationTokenSource,S=R(u.token),L=new Promise((N,q)=>{const H=u.token.onCancellationRequested(()=>{H.dispose(),u.dispose(),q(new E.CancellationError)});Promise.resolve(S).then(Q=>{H.dispose(),u.dispose(),N(Q)},Q=>{H.dispose(),u.dispose(),q(Q)})});return new class{cancel(){u.cancel()}then(N,q){return L.then(N,q)}catch(N){return this.then(void 0,N)}finally(N){return L.finally(N)}}}e.createCancelablePromise=n;function s(R,u,S){return new Promise((L,N)=>{const q=u.onCancellationRequested(()=>{q.dispose(),L(S)});R.then(L,N).finally(()=>q.dispose())})}e.raceCancellation=s;function d(R,u){return new Promise((S,L)=>{const N=u.onCancellationRequested(()=>{N.dispose(),L(new E.CancellationError)});R.then(S,L).finally(()=>N.dispose())})}e.raceCancellationError=d;async function v(R){let u=-1;const S=R.map((L,N)=>L.then(q=>(u=N,q)));try{return await Promise.race(S)}finally{R.forEach((L,N)=>{N!==u&&L.cancel()})}}e.raceCancellablePromises=v;function l(R,u,S){let L;const N=setTimeout(()=>{L?.(void 0),S?.()},u);return Promise.race([R.finally(()=>clearTimeout(N)),new Promise(q=>L=q)])}e.raceTimeout=l;function a(R){return new Promise((u,S)=>{const L=R();i(L)?L.then(u,S):u(L)})}e.asPromise=a;class o{constructor(){this.a=null,this.b=null,this.d=null}queue(u){if(this.a){if(this.d=u,!this.b){const S=()=>{this.b=null;const L=this.queue(this.d);return this.d=null,L};this.b=new Promise(L=>{this.a.then(S,S).then(L)})}return new Promise((S,L)=>{this.b.then(S,L)})}return this.a=u(),new Promise((S,L)=>{this.a.then(N=>{this.a=null,S(N)},N=>{this.a=null,L(N)})})}}e.Throttler=o;class T{constructor(){this.a=Promise.resolve(null)}queue(u){return this.a=this.a.then(()=>u(),()=>u())}}e.Sequencer=T;class M{constructor(){this.a=new Map}queue(u,S){const N=(this.a.get(u)??Promise.resolve()).catch(()=>{}).then(S).finally(()=>{this.a.get(u)===N&&this.a.delete(u)});return this.a.set(u,N),N}}e.SequencerByKey=M;const D=(R,u)=>{let S=!0;const L=setTimeout(()=>{S=!1,u()},R);return{isTriggered:()=>S,dispose:()=>{clearTimeout(L),S=!1}}},U=R=>{let u=!0;return queueMicrotask(()=>{u&&(u=!1,R())}),{isTriggered:()=>u,dispose:()=>{u=!1}}};class k{constructor(u){this.defaultDelay=u,this.a=null,this.b=null,this.d=null,this.f=null,this.g=null}trigger(u,S=this.defaultDelay){this.g=u,this.h(),this.b||(this.b=new Promise((N,q)=>{this.d=N,this.f=q}).then(()=>{if(this.b=null,this.d=null,this.g){const N=this.g;return this.g=null,N()}}));const L=()=>{this.a=null,this.d?.(null)};return this.a=S===t.MicrotaskDelay?U(L):D(S,L),this.b}isTriggered(){return!!this.a?.isTriggered()}cancel(){this.h(),this.b&&(this.f?.(new E.CancellationError),this.b=null)}h(){this.a?.dispose(),this.a=null}dispose(){this.cancel()}}e.Delayer=k;class f{constructor(u){this.a=new k(u),this.b=new o}trigger(u,S){return this.a.trigger(()=>this.b.queue(u),S)}isTriggered(){return this.a.isTriggered()}cancel(){this.a.cancel()}dispose(){this.a.dispose()}}e.ThrottledDelayer=f;class b{constructor(){this.a=!1,this.b=new Promise((u,S)=>{this.d=u})}isOpen(){return this.a}open(){this.a=!0,this.d(!0)}wait(){return this.b}}e.Barrier=b;class m extends b{constructor(u){super(),this.f=setTimeout(()=>this.open(),u)}open(){clearTimeout(this.f),super.open()}}e.AutoOpenBarrier=m;function C(R,u){return u?new Promise((S,L)=>{const N=setTimeout(()=>{q.dispose(),S()},R),q=u.onCancellationRequested(()=>{clearTimeout(N),q.dispose(),L(new E.CancellationError)})}):n(S=>C(R,S))}e.timeout=C;function z(R,u=0){const S=setTimeout(R,u);return(0,I.toDisposable)(()=>clearTimeout(S))}e.disposableTimeout=z;function c(R){const u=[];let S=0;const L=R.length;function N(){return S<L?R[S++]():null}function q(H){H!=null&&u.push(H);const Q=N();return Q?Q.then(q):Promise.resolve(u)}return Promise.resolve(null).then(q)}e.sequence=c;function P(R,u=L=>!!L,S=null){let L=0;const N=R.length,q=()=>{if(L>=N)return Promise.resolve(S);const H=R[L++];return Promise.resolve(H()).then(X=>u(X)?Promise.resolve(X):q())};return q()}e.first=P;function B(R,u=L=>!!L,S=null){if(R.length===0)return Promise.resolve(S);let L=R.length;const N=()=>{L=-1;for(const q of R)q.cancel?.()};return new Promise((q,H)=>{for(const Q of R)Q.then(X=>{--L>=0&&u(X)?(N(),q(X)):L===0&&q(S)}).catch(X=>{--L>=0&&(N(),H(X))})})}e.firstParallel=B;class O{constructor(u){this.a=0,this.d=u,this.f=[],this.b=0,this.g=new w.Emitter}get onDrained(){return this.g.event}get size(){return this.a}queue(u){return this.a++,new Promise((S,L)=>{this.f.push({factory:u,c:S,e:L}),this.h()})}h(){for(;this.f.length&&this.b<this.d;){const u=this.f.shift();this.b++;const S=u.factory();S.then(u.c,u.e),S.then(()=>this.j(),()=>this.j())}}j(){this.a--,this.b--,this.f.length>0?this.h():this.g.fire()}dispose(){this.g.dispose()}}e.Limiter=O;class g extends O{constructor(){super(1)}}e.Queue=g;class A{constructor(){this.a=new Map,this.b=new Set}async whenDrained(){if(this.d())return;const u=new ee;return this.b.add(u),u.p}d(){for(const[,u]of this.a)if(u.size>0)return!1;return!0}queueFor(u,S=r.extUri){const L=S.getComparisonKey(u);let N=this.a.get(L);return N||(N=new g,w.Event.once(N.onDrained)(()=>{N?.dispose(),this.a.delete(L),this.f()}),this.a.set(L,N)),N}f(){this.d()&&this.g()}g(){for(const u of this.b)u.complete();this.b.clear()}dispose(){for(const[,u]of this.a)u.dispose();this.a.clear(),this.g()}}e.ResourceQueue=A;class j{constructor(u,S){this.a=-1,typeof u=="function"&&typeof S=="number"&&this.setIfNotSet(u,S)}dispose(){this.cancel()}cancel(){this.a!==-1&&(clearTimeout(this.a),this.a=-1)}cancelAndSet(u,S){this.cancel(),this.a=setTimeout(()=>{this.a=-1,u()},S)}setIfNotSet(u,S){this.a===-1&&(this.a=setTimeout(()=>{this.a=-1,u()},S))}}e.TimeoutTimer=j;class _{constructor(){this.a=-1}dispose(){this.cancel()}cancel(){this.a!==-1&&(clearInterval(this.a),this.a=-1)}cancelAndSet(u,S){this.cancel(),this.a=setInterval(()=>{u()},S)}}e.IntervalTimer=_;class ${constructor(u,S){this.b=-1,this.a=u,this.d=S,this.f=this.g.bind(this)}dispose(){this.cancel(),this.a=null}cancel(){this.isScheduled()&&(clearTimeout(this.b),this.b=-1)}schedule(u=this.d){this.cancel(),this.b=setTimeout(this.f,u)}get delay(){return this.d}set delay(u){this.d=u}isScheduled(){return this.b!==-1}flush(){this.isScheduled()&&(this.cancel(),this.h())}g(){this.b=-1,this.a&&this.h()}h(){this.a?.()}}e.RunOnceScheduler=$;class V{constructor(u,S){S%1e3!==0&&console.warn(`ProcessTimeRunOnceScheduler resolution is 1s, ${S}ms is not a multiple of 1000ms.`),this.a=u,this.b=S,this.d=0,this.f=-1,this.g=this.h.bind(this)}dispose(){this.cancel(),this.a=null}cancel(){this.isScheduled()&&(clearInterval(this.f),this.f=-1)}schedule(u=this.b){u%1e3!==0&&console.warn(`ProcessTimeRunOnceScheduler resolution is 1s, ${u}ms is not a multiple of 1000ms.`),this.cancel(),this.d=Math.ceil(u/1e3),this.f=setInterval(this.g,1e3)}isScheduled(){return this.f!==-1}h(){this.d--,!(this.d>0)&&(clearInterval(this.f),this.f=-1,this.a?.())}}e.ProcessTimeRunOnceScheduler=V;class W extends ${constructor(u,S){super(u,S),this.j=[]}work(u){this.j.push(u),this.isScheduled()||this.schedule()}h(){const u=this.j;this.j=[],this.a?.(u)}dispose(){this.j=[],super.dispose()}}e.RunOnceWorker=W;class G extends I.Disposable{constructor(u,S){super(),this.g=u,this.h=S,this.a=[],this.b=this.B(new I.MutableDisposable),this.f=!1}get pending(){return this.a.length}work(u){if(this.f)return!1;if(typeof this.g.maxBufferedWork=="number"){if(this.b.value){if(this.pending+u.length>this.g.maxBufferedWork)return!1}else if(this.pending+u.length-this.g.maxWorkChunkSize>this.g.maxBufferedWork)return!1}for(const S of u)this.a.push(S);return this.b.value||this.j(),!0}j(){this.h(this.a.splice(0,this.g.maxWorkChunkSize)),this.a.length>0&&(this.b.value=new $(()=>{this.b.clear(),this.j()},this.g.throttleDelay),this.b.value.schedule())}dispose(){super.dispose(),this.f=!0}}e.ThrottledWorker=G,function(){typeof requestIdleCallback!="function"||typeof cancelIdleCallback!="function"?e.runWhenIdle=R=>{(0,h.setTimeout0)(()=>{if(u)return;const S=Date.now()+15;R(Object.freeze({didTimeout:!0,timeRemaining(){return Math.max(0,S-Date.now())}}))});let u=!1;return{dispose(){u||(u=!0)}}}:e.runWhenIdle=(R,u)=>{const S=requestIdleCallback(R,typeof u=="number"?{timeout:u}:void 0);let L=!1;return{dispose(){L||(L=!0,cancelIdleCallback(S))}}}}();class Z{constructor(u){this.d=!1,this.a=()=>{try{this.f=u()}catch(S){this.g=S}finally{this.d=!0}},this.b=(0,e.runWhenIdle)(()=>this.a())}dispose(){this.b.dispose()}get value(){if(this.d||(this.b.dispose(),this.a()),this.g)throw this.g;return this.f}get isInitialized(){return this.d}}e.IdleValue=Z;async function J(R,u,S){let L;for(let N=0;N<S;N++)try{return await R()}catch(q){L=q,await C(u)}throw L}e.retry=J;class ae{hasPending(u){return this.a?typeof u=="number"?this.a.taskId===u:!!this.a:!1}get pending(){return this.a?.promise}cancelPending(){this.a?.cancel()}setPending(u,S,L){return this.a={taskId:u,cancel:()=>L?.(),promise:S},S.then(()=>this.d(u),()=>this.d(u)),S}d(u){this.a&&u===this.a.taskId&&(this.a=void 0,this.f())}f(){if(this.b){const u=this.b;this.b=void 0,u.run().then(u.promiseResolve,u.promiseReject)}}setNext(u){if(this.b)this.b.run=u;else{let S,L;const N=new Promise((q,H)=>{S=q,L=H});this.b={run:u,promise:N,promiseResolve:S,promiseReject:L}}return this.b.promise}hasNext(){return!!this.b}async join(){return this.b?.promise??this.a?.promise}}e.TaskSequentializer=ae;class oe{constructor(u,S=()=>Date.now()){this.d=u,this.f=S,this.a=0,this.b=0}increment(){const u=this.f();return u-this.a>this.d&&(this.a=u,this.b=0),this.b++,this.b}}e.IntervalCounter=oe;var x;(function(R){R[R.Resolved=0]="Resolved",R[R.Rejected=1]="Rejected"})(x||(x={}));class ee{get isRejected(){return this.d?.outcome===1}get isResolved(){return this.d?.outcome===0}get isSettled(){return!!this.d}get value(){return this.d?.outcome===0?this.d?.value:void 0}constructor(){this.p=new Promise((u,S)=>{this.a=u,this.b=S})}complete(u){return new Promise(S=>{this.a(u),this.d={outcome:0,value:u},S()})}error(u){return new Promise(S=>{this.b(u),this.d={outcome:1,value:u},S()})}cancel(){return this.error(new E.CancellationError)}}e.DeferredPromise=ee;var te;(function(R){async function u(L){let N;const q=await Promise.all(L.map(H=>H.then(Q=>Q,Q=>{N||(N=Q)})));if(typeof N<"u")throw N;return q}R.settled=u;function S(L){return new Promise(async(N,q)=>{try{await L(N,q)}catch(H){q(H)}})}R.withAsyncBody=S})(te||(e.Promises=te={}));var ne;(function(R){R[R.Initial=0]="Initial",R[R.DoneOK=1]="DoneOK",R[R.DoneError=2]="DoneError"})(ne||(ne={}));class Y{static fromArray(u){return new Y(S=>{S.emitMany(u)})}static fromPromise(u){return new Y(async S=>{S.emitMany(await u)})}static fromPromises(u){return new Y(async S=>{await Promise.all(u.map(async L=>S.emitOne(await L)))})}static merge(u){return new Y(async S=>{await Promise.all(u.map(async L=>{for await(const N of L)S.emitOne(N)}))})}constructor(u){this.a=0,this.b=[],this.d=null,this.f=new w.Emitter,queueMicrotask(async()=>{const S={emitOne:L=>this.g(L),emitMany:L=>this.h(L),reject:L=>this.k(L)};try{await Promise.resolve(u(S)),this.j()}catch(L){this.k(L)}finally{S.emitOne=void 0,S.emitMany=void 0,S.reject=void 0}})}[Symbol.asyncIterator](){let u=0;return{next:async()=>{do{if(this.a===2)throw this.d;if(u<this.b.length)return{done:!1,value:this.b[u++]};if(this.a===1)return{done:!0,value:void 0};await w.Event.toPromise(this.f.event)}while(!0)}}}static map(u,S){return new Y(async L=>{for await(const N of u)L.emitOne(S(N))})}map(u){return Y.map(this,u)}static filter(u,S){return new Y(async L=>{for await(const N of u)S(N)&&L.emitOne(N)})}filter(u){return Y.filter(this,u)}static coalesce(u){return Y.filter(u,S=>!!S)}coalesce(){return Y.coalesce(this)}static async toPromise(u){const S=[];for await(const L of u)S.push(L);return S}toPromise(){return Y.toPromise(this)}g(u){this.a===0&&(this.b.push(u),this.f.fire())}h(u){this.a===0&&(this.b=this.b.concat(u),this.f.fire())}j(){this.a===0&&(this.a=1,this.f.fire())}k(u){this.a===0&&(this.a=2,this.d=u,this.f.fire())}}e.AsyncIterableObject=Y,Y.EMPTY=Y.fromArray([]);class ie extends Y{constructor(u,S){super(S),this.l=u}cancel(){this.l.cancel()}}e.CancelableAsyncIterableObject=ie;function ue(R){const u=new y.CancellationTokenSource,S=R(u.token);return new ie(u,async L=>{const N=u.token.onCancellationRequested(()=>{N.dispose(),u.dispose(),L.reject(new E.CancellationError)});try{for await(const q of S){if(u.token.isCancellationRequested)return;L.emitOne(q)}N.dispose(),u.dispose()}catch(q){N.dispose(),u.dispose(),L.reject(q)}})}e.createCancelableAsyncIterable=ue}),define(p[19],K([0,1,32]),function(F,e,y){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.nullTokenizeEncoded=e.nullTokenize=e.NullState=void 0,e.NullState=new class{clone(){return this}equals(I){return this===I}};function E(I,r){return new y.TokenizationResult([new y.Token(0,"",I)],r)}e.nullTokenize=E;function w(I,r){const h=new Uint32Array(2);return h[0]=0,h[1]=(I<<0|0<<8|0<<11|1<<15|2<<24)>>>0,new y.EncodedTokenizationResult(h,r===null?e.NullState:r)}e.nullTokenizeEncoded=w}),define(p[33],K([0,1,18,4,5,43,12,14,44,19,23,15,7]),function(F,e,y,E,w,I,r,h,t,i,n,s,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DefaultBackgroundTokenizer=e.RangePriorityQueueImpl=e.TokenizationStateStore=e.TrackingTokenizationStateStore=e.TokenizerWithStateStoreAndTextModel=e.TokenizerWithStateStore=void 0;var v;(function(k){k[k.CHEAP_TOKENIZATION_LENGTH_LIMIT=2048]="CHEAP_TOKENIZATION_LENGTH_LIMIT"})(v||(v={}));class l{constructor(f,b){this.tokenizationSupport=b,this.a=this.tokenizationSupport.getInitialState(),this.store=new o(f)}getStartState(f){return f===1?this.a:this.store.getEndState(f-1)}}e.TokenizerWithStateStore=l;class a extends l{constructor(f,b,m,C){super(f,b),this._textModel=m,this._languageIdCodec=C}updateTokensUntilLine(f,b){const m=this._textModel.getLanguageId();for(;;){const C=this.store.getFirstInvalidEndStateLineNumber();if(!C||C>b)break;const z=this._textModel.getLineContent(C),c=this.getStartState(C),P=D(this._languageIdCodec,m,this.tokenizationSupport,z,!0,c);f.add(C,P.tokens),this.store.setEndState(C,P.endState)}}getTokenTypeIfInsertingCharacter(f,b){const m=this.getStartState(f.lineNumber);if(!m)return 0;const C=this._textModel.getLanguageId(),z=this._textModel.getLineContent(f.lineNumber),c=z.substring(0,f.column-1)+b+z.substring(f.column-1),P=D(this._languageIdCodec,C,this.tokenizationSupport,c,!0,m),B=new d.LineTokens(P.tokens,c,this._languageIdCodec);if(B.getCount()===0)return 0;const O=B.findTokenIndexAtOffset(f.column-1);return B.getStandardTokenType(O)}tokenizeLineWithEdit(f,b,m){const C=f.lineNumber,z=f.column,c=this.getStartState(C);if(!c)return null;const P=this._textModel.getLineContent(C),B=P.substring(0,z-1)+m+P.substring(z-1+b),O=this._textModel.getLanguageIdAtPosition(C,0),g=D(this._languageIdCodec,O,this.tokenizationSupport,B,!0,c);return new d.LineTokens(g.tokens,B,this._languageIdCodec)}isCheapToTokenize(f){const b=this.store.getFirstInvalidEndStateLineNumberOrMax();return f<b||f===b&&this._textModel.getLineLength(f)<2048}tokenizeHeuristically(f,b,m){if(m<=this.store.getFirstInvalidEndStateLineNumberOrMax())return{heuristicTokens:!1};if(b<=this.store.getFirstInvalidEndStateLineNumberOrMax())return this.updateTokensUntilLine(f,m),{heuristicTokens:!1};let C=this.b(b);const z=this._textModel.getLanguageId();for(let c=b;c<=m;c++){const P=this._textModel.getLineContent(c),B=D(this._languageIdCodec,z,this.tokenizationSupport,P,!0,C);f.add(c,B.tokens),C=B.endState}return{heuristicTokens:!0}}b(f){let b=this._textModel.getLineFirstNonWhitespaceColumn(f);const m=[];let C=null;for(let P=f-1;b>1&&P>=1;P--){const B=this._textModel.getLineFirstNonWhitespaceColumn(P);if(B!==0&&B<b&&(m.push(this._textModel.getLineContent(P)),b=B,C=this.getStartState(P),C))break}C||(C=this.tokenizationSupport.getInitialState()),m.reverse();const z=this._textModel.getLanguageId();let c=C;for(const P of m)c=D(this._languageIdCodec,z,this.tokenizationSupport,P,!1,c).endState;return c}}e.TokenizerWithStateStoreAndTextModel=a;class o{constructor(f){this.d=f,this.a=new T,this.b=new M,this.b.addRange(new t.OffsetRange(1,f+1))}getEndState(f){return this.a.getEndState(f)}setEndState(f,b){for(;;){const C=this.b.min;if(C!==null&&C<=f)this.b.removeMin();else break}const m=this.a.setEndState(f,b);return m&&f<this.d&&this.b.addRange(new t.OffsetRange(f+1,f+2)),m}acceptChange(f,b){this.d+=b-f.length,this.a.acceptChange(f,b),this.b.addRangeAndResize(new t.OffsetRange(f.startLineNumber,f.endLineNumberExclusive),b)}acceptChanges(f){for(const b of f){const[m]=(0,r.countEOL)(b.text);this.acceptChange(new h.LineRange(b.range.startLineNumber,b.range.endLineNumber+1),m+1)}}invalidateEndStateRange(f){this.b.addRange(new t.OffsetRange(f.startLineNumber,f.endLineNumberExclusive))}getFirstInvalidEndStateLineNumber(){return this.b.min}getFirstInvalidEndStateLineNumberOrMax(){return this.b.min||Number.MAX_SAFE_INTEGER}isTokenizationComplete(){return this.b.min===null}}e.TrackingTokenizationStateStore=o;class T{constructor(){this.a=new n.FixedArray(null)}getEndState(f){return this.a.get(f)}setEndState(f,b){const m=this.a.get(f);return m&&m.equals(b)?!1:(this.a.set(f,b),!0)}acceptChange(f,b){let m=f.length;b>0&&m>0&&(m--,b--),this.a.replace(f.startLineNumber,m,b)}acceptChanges(f){for(const b of f){const[m]=(0,r.countEOL)(b.text);this.acceptChange(new h.LineRange(b.range.startLineNumber,b.range.endLineNumber+1),m+1)}}}e.TokenizationStateStore=T;class M{constructor(){this.a=[]}getRanges(){return this.a}get min(){return this.a.length===0?null:this.a[0].start}removeMin(){if(this.a.length===0)return null;const f=this.a[0];return f.start+1===f.endExclusive?this.a.shift():this.a[0]=new t.OffsetRange(f.start+1,f.endExclusive),f.start}addRange(f){t.OffsetRange.addRange(f,this.a)}addRangeAndResize(f,b){let m=0;for(;!(m>=this.a.length||f.start<=this.a[m].endExclusive);)m++;let C=m;for(;!(C>=this.a.length||f.endExclusive<this.a[C].start);)C++;const z=b-f.length;for(let c=C;c<this.a.length;c++)this.a[c]=this.a[c].delta(z);if(m===C){const c=new t.OffsetRange(f.start,f.start+b);c.isEmpty||this.a.splice(m,0,c)}else{const c=Math.min(f.start,this.a[m].start),P=Math.max(f.endExclusive,this.a[C-1].endExclusive),B=new t.OffsetRange(c,P+z);B.isEmpty?this.a.splice(m,C-m):this.a.splice(m,C-m,B)}}toString(){return this.a.map(f=>f.toString()).join(" + ")}}e.RangePriorityQueueImpl=M;function D(k,f,b,m,C,z){let c=null;if(b)try{c=b.tokenizeEncoded(m,C,z.clone())}catch(P){(0,E.onUnexpectedError)(P)}return c||(c=(0,i.nullTokenizeEncoded)(k.encodeLanguageId(f),z)),d.LineTokens.convertToEndOffset(c.tokens,m.length),c}class U{constructor(f,b){this.b=f,this.d=b,this.a=!1,this.f=!1}dispose(){this.a=!0}handleChanges(){this.g()}g(){this.f||!this.b._textModel.isAttachedToEditor()||!this.k()||(this.f=!0,(0,y.runWhenIdle)(f=>{this.f=!1,this.h(f)}))}h(f){const b=Date.now()+f.timeRemaining(),m=()=>{this.a||!this.b._textModel.isAttachedToEditor()||!this.k()||(this.j(),Date.now()<b?(0,w.setTimeout0)(m):this.g())};m()}j(){const f=this.b._textModel.getLineCount(),b=new s.ContiguousMultilineTokensBuilder,m=I.StopWatch.create(!1);do if(m.elapsed()>1||this.l(b)>=f)break;while(this.k());this.d.setTokens(b.finalize()),this.checkFinished()}k(){return this.b?!this.b.store.isTokenizationComplete():!1}l(f){if(!this.b||!this.k())return this.b._textModel.getLineCount()+1;const b=this.b.store.getFirstInvalidEndStateLineNumber();return this.b.updateTokensUntilLine(f,b),b}checkFinished(){this.a||this.b.store.isTokenizationComplete()&&this.d.backgroundTokenizationFinished()}requestTokens(f,b){this.b.store.invalidateEndStateRange(new h.LineRange(f,b))}}e.DefaultBackgroundTokenizer=U}),define(p[34],K([0,1,31,2,13,32]),function(F,e,y,E,w,I){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TextMateTokenizationSupport=void 0;class r extends E.Disposable{constructor(t,i,n,s,d=()=>!1){super(),this.c=t,this.f=i,this.g=n,this.h=s,this.j=d,this.a=[],this.b=this.B(new y.Emitter),this.onDidEncounterLanguage=this.b.event}get backgroundTokenizerShouldOnlyVerifyTokens(){return this.j()}getInitialState(){return this.f}tokenize(t,i,n){throw new Error("Not supported!")}createBackgroundTokenizer(t,i){if(this.h)return this.h(t,i)}tokenizeEncoded(t,i,n){const s=this.c.tokenizeLine2(t,n,500);if(s.stoppedEarly)return console.warn(`Time limit reached when tokenizing line: ${t.substring(0,100)}`),new I.EncodedTokenizationResult(s.tokens,n);if(this.g){const v=this.a,l=s.tokens;for(let a=0,o=l.length>>>1;a<o;a++){const T=l[(a<<1)+1],M=w.TokenMetadata.getLanguageId(T);v[M]||(v[M]=!0,this.b.fire(M))}}let d;return n.equals(s.ruleStack)?d=n:d=s.ruleStack,new I.EncodedTokenizationResult(s.tokens,d)}}e.TextMateTokenizationSupport=r}),define(p[35],K([0,1,19,2,10]),function(F,e,y,E,w){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TokenizationSupportWithLineLimit=void 0;class I extends E.Disposable{get backgroundTokenizerShouldOnlyVerifyTokens(){return this.b.backgroundTokenizerShouldOnlyVerifyTokens}constructor(h,t,i){super(),this.a=h,this.b=t,this.c=i,this.B((0,w.keepAlive)(this.c))}getInitialState(){return this.b.getInitialState()}tokenize(h,t,i){throw new Error("Not supported!")}tokenizeEncoded(h,t,i){return h.length>=this.c.get()?(0,y.nullTokenizeEncoded)(this.a,i):this.b.tokenizeEncoded(h,t,i)}createBackgroundTokenizer(h,t){if(this.b.createBackgroundTokenizer)return this.b.createBackgroundTokenizer(h,t)}}e.TokenizationSupportWithLineLimit=I}),define(p[36],K([0,1,17]),function(F,e,y){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TMScopeRegistry=void 0;class E{constructor(){this.a=Object.create(null)}reset(){this.a=Object.create(null)}register(I){if(this.a[I.scopeName]){const r=this.a[I.scopeName];y.isEqual(r.location,I.location)||console.warn(`Overwriting grammar scope name to file mapping for scope ${I.scopeName}.
Old grammar file: ${r.location.toString()}.
New grammar file: ${I.location.toString()}`)}this.a[I.scopeName]=I}getGrammarDefinition(I){return this.a[I]||null}}e.TMScopeRegistry=E}),define(p[37],K([0,1,2,36]),function(F,e,y,E){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TMGrammarFactory=e.missingTMGrammarErrorMessage=void 0,e.missingTMGrammarErrorMessage="No TM Grammar registered for this language.";class w extends y.Disposable{constructor(r,h,t,i){super(),this.a=r,this.b=t.INITIAL,this.c=new E.TMScopeRegistry,this.f={},this.g={},this.h=new Map,this.j=this.B(new t.Registry({onigLib:i,loadGrammar:async n=>{const s=this.c.getGrammarDefinition(n);if(!s)return this.a.logTrace(`No grammar found for scope ${n}`),null;const d=s.location;try{const v=await this.a.readFile(d);return t.parseRawGrammar(v,d.path)}catch(v){return this.a.logError(`Unable to load and parse grammar for scope ${n} from ${d}`,v),null}},getInjections:n=>{const s=n.split(".");let d=[];for(let v=1;v<=s.length;v++){const l=s.slice(0,v).join(".");d=[...d,...this.f[l]||[]]}return d}}));for(const n of h){if(this.c.register(n),n.injectTo){for(const s of n.injectTo){let d=this.f[s];d||(this.f[s]=d=[]),d.push(n.scopeName)}if(n.embeddedLanguages)for(const s of n.injectTo){let d=this.g[s];d||(this.g[s]=d=[]),d.push(n.embeddedLanguages)}}n.language&&this.h.set(n.language,n.scopeName)}}has(r){return this.h.has(r)}setTheme(r,h){this.j.setTheme(r,h)}getColorMap(){return this.j.getColorMap()}async createGrammar(r,h){const t=this.h.get(r);if(typeof t!="string")throw new Error(e.missingTMGrammarErrorMessage);const i=this.c.getGrammarDefinition(t);if(!i)throw new Error(e.missingTMGrammarErrorMessage);const n=i.embeddedLanguages;if(this.g[t]){const v=this.g[t];for(const l of v)for(const a of Object.keys(l))n[a]=l[a]}const s=Object.keys(n).length>0;let d;try{d=await this.j.loadGrammarWithConfiguration(t,h,{embeddedLanguages:n,tokenTypes:i.tokenTypes,balancedBracketSelectors:i.balancedBracketSelectors,unbalancedBracketSelectors:i.unbalancedBracketSelectors})}catch(v){throw v.message&&v.message.startsWith("No grammar provided for")?new Error(e.missingTMGrammarErrorMessage):v}return{languageId:r,grammar:d,initialState:this.b,containsEmbeddedLanguages:s}}}e.TMGrammarFactory=w}),define(p[38],K([0,1,45,33,46,15,7,34,18,10,35,14]),function(F,e,y,E,w,I,r,h,t,i,n,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TextMateWorkerModel=void 0;class d extends y.MirrorTextModel{constructor(a,o,T,M,D,U,k,f){super(a,o,T,M),this.m=D,this.q=U,this.s=k,this.a=null,this.b=!1,this.c=(0,i.observableValue)("_maxTokenizationLineLength",-1),this.t=new t.RunOnceScheduler(()=>this.v(),10),this.c.set(f,void 0),this.u()}dispose(){this.b=!0,super.dispose()}onLanguageId(a,o){this.q=a,this.s=o,this.u()}onEvents(a){super.onEvents(a),this.a&&this.a.store.acceptChanges(a.changes),this.t.schedule()}acceptMaxTokenizationLineLength(a){this.c.set(a,void 0)}retokenize(a,o){this.a&&(this.a.store.invalidateEndStateRange(new s.LineRange(a,o)),this.t.schedule())}u(){this.a=null;const a=this.q,o=this.s;this.m.getOrCreateGrammar(a,o).then(T=>{if(!(this.b||a!==this.q||o!==this.s||!T)){if(T.grammar){const M=new n.TokenizationSupportWithLineLimit(this.s,new h.TextMateTokenizationSupport(T.grammar,T.initialState,!1),this.c);this.a=new E.TokenizerWithStateStore(this.f.length,M)}else this.a=null;this.v()}})}v(){if(this.b||!this.a)return;const a=new Date().getTime();for(;;){let o=0;const T=new I.ContiguousMultilineTokensBuilder,M=new v;for(;;){const k=this.a.store.getFirstInvalidEndStateLineNumber();if(k===null||o>200)break;o++;const f=this.f[k-1],b=this.a.getStartState(k),m=this.a.tokenizationSupport.tokenizeEncoded(f,!0,b);if(this.a.store.setEndState(k,m.endState)){const z=(0,w.diffStateStacksRefEq)(b,m.endState);M.setState(k,z)}else M.setState(k,null);if(r.LineTokens.convertToEndOffset(m.tokens,f.length),T.add(k,m.tokens),new Date().getTime()-a>20)break}if(o===0)break;const D=M.getStateDeltas();if(this.m.setTokensAndStates(this.d,this.h,T.serialize(),D),new Date().getTime()-a>20){setTimeout(()=>this.v(),3);return}}}}e.TextMateWorkerModel=d;class v{constructor(){this.a=-1,this.b=[]}setState(a,o){a===this.a+1?this.b[this.b.length-1].stateDeltas.push(o):this.b.push({startLineNumber:a,stateDeltas:[o]}),this.a=a}getStateDeltas(){return this.b}}}),define(p[47],K([0,1,16,37,38]),function(F,e,y,E,w){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.create=e.TextMateTokenizationWorker=void 0;class I{constructor(t,i){this.f=i,this.b=Object.create(null),this.c=[],this.a=t.host;const n=i.grammarDefinitions.map(s=>({location:y.URI.revive(s.location),language:s.language,scopeName:s.scopeName,embeddedLanguages:s.embeddedLanguages,tokenTypes:s.tokenTypes,injectTo:s.injectTo,balancedBracketSelectors:s.balancedBracketSelectors,unbalancedBracketSelectors:s.unbalancedBracketSelectors}));this.d=this.g(n)}async g(t){const i=this.f.textmateMainUri,n=await new Promise((a,o)=>{F([i],a,o)}),s=await new Promise((a,o)=>{F([this.f.onigurumaMainUri],a,o)}),v=await(await fetch(this.f.onigurumaWASMUri)).arrayBuffer();await s.loadWASM(v);const l=Promise.resolve({createOnigScanner:a=>s.createOnigScanner(a),createOnigString:a=>s.createOnigString(a)});return new E.TMGrammarFactory({logTrace:a=>{},logError:(a,o)=>console.error(a,o),readFile:a=>this.a.readFile(a)},t,n,l)}acceptNewModel(t){const i=y.URI.revive(t.uri),n=i.toString();this.b[n]=new w.TextMateWorkerModel(i,t.lines,t.EOL,t.versionId,this,t.languageId,t.encodedLanguageId,t.maxTokenizationLineLength)}acceptModelChanged(t,i){this.b[t].onEvents(i)}retokenize(t,i,n){this.b[t].retokenize(i,n)}acceptModelLanguageChanged(t,i,n){this.b[t].onLanguageId(i,n)}acceptRemovedModel(t){this.b[t]&&(this.b[t].dispose(),delete this.b[t])}async acceptTheme(t,i){(await this.d)?.setTheme(t,i)}acceptMaxTokenizationLineLength(t,i){this.b[t].acceptMaxTokenizationLineLength(i)}async getOrCreateGrammar(t,i){const n=await this.d;return n?(this.c[i]||(this.c[i]=n.createGrammar(t,i)),this.c[i]):Promise.resolve(null)}setTokensAndStates(t,i,n,s){this.a.setTokensAndStates(t,i,n,s)}}e.TextMateTokenizationWorker=I;function r(h,t){return new I(h,t)}e.create=r})}).call(this);

//# sourceMappingURL=https://ticino.blob.core.windows.net/sourcemaps/2d416df5f00253f5ebd60d2f08508a440747fd8d/core/vs/workbench/services/textMate/browser/worker/textMate.worker.js.map
